(this["webpackJsonpreact-ts-netease"]=this["webpackJsonpreact-ts-netease"]||[]).push([[0],{263:function(e,t){},296:function(e,t,a){e.exports=a(511)},509:function(e,t,a){},511:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),i=a(3),s=a(512),o=a(1),u=a.n(o),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,a=Object(n.useState)(e),r=Object(i.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){l(e)}),t);return function(){clearTimeout(a)}}),[t,e]),c},d=a(7),p=a.n(d),f=a(11),v=a(521),E=a(127),g=a.n(E);g.a.defaults.baseURL="http://localhost:3001",g.a.defaults.withCredentials=!0,g.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.resolve(!1)}));var h=g.a,b=a(42),y=r.a.memo((function(e){var t=e.value,a=Object(n.useState)({songs:[],albums:[],artists:[],playlists:[]}),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useContext)(Yt),u=Object(b.g)();return Object(n.useEffect)((function(){var e=!1;function a(e){if(!(e instanceof Array))return[];for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({name:n.name,singerName:n.artist.name,id:n.id})}return t}function n(e){if(!(e instanceof Array))return[];for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({name:n.name,id:n.id})}return t}function r(e){if(!(e instanceof Array))return[];for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({name:n.name,id:n.id})}return t}function c(){return(c=Object(f.a)(p.a.mark((function c(){var l,i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,h.get("/search/suggest?keywords="+t);case 2:l=c.sent,i=l.data,!e&&s({playlists:r(i.result.playlists),songs:[],albums:a(i.result.albums),artists:n(i.result.artists)});case 5:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){e=!0}}),[t]),r.a.createElement("div",{className:"search-keywords"},r.a.createElement("div",{className:"search-keywords-title"},"\u641c\u201c",r.a.createElement("span",null,t),"\u201d\u76f8\u5173\u7684\u7ed3\u679c"),0!==l.artists.length&&r.a.createElement("div",{className:"search-keywords-item"},r.a.createElement("div",{className:"search-keywords-item-title"},r.a.createElement(v.a,null),"\u6b4c\u624b"),l.artists.map((function(e){return r.a.createElement("div",{className:"search-item",key:e.id,onClick:function(){return t=e.id,o.setHistoryStack("push","sinerDetail"),void u.push("/singerDetail/"+t);var t}},e.name)}))),0!==l.albums.length&&r.a.createElement("div",{className:"search-keywords-item"},r.a.createElement("div",{className:"search-keywords-item-title"},r.a.createElement("i",{className:"iconfont icon-changpian1"}),"\u4e13\u8f91"),l.albums.map((function(e){return r.a.createElement("div",{className:"search-item",key:e.id,onClick:function(){return t=e.id,o.setHistoryStack("push","album"),void u.push("/album/"+t);var t}},e.name+"-"+e.singerName)}))),0!==l.playlists.length&&r.a.createElement("div",{className:"search-keywords-item"},r.a.createElement("div",{className:"search-keywords-item-title"},r.a.createElement("i",{className:"iconfont icon-gedan"}),"\u6b4c\u5355"),l.playlists.map((function(e){return r.a.createElement("div",{className:"search-item",key:e.id,onClick:function(){return t=e.id,o.setHistoryStack("push","playlist"),void u.push("/playlist/"+t);var t}},e.name)}))))})),O=r.a.memo((function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(N);return Object(n.useEffect)((function(){var e=!1;function t(){return(t=Object(f.a)(p.a.mark((function t(){var a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/search/hot");case 2:a=t.sent,n=a.data,r=n.result.hots,!e&&c(r.map((function(e){return e.first})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[]),r.a.createElement("div",{className:"hot-search-content"},r.a.createElement("div",{className:"hot-search-content-title"},"\u70ed\u95e8\u641c\u7d22"),a.map((function(e){return r.a.createElement("div",{className:"search-item",key:e,onClick:function(){return t=e,void l.changeValue(t);var t}},e)})))})),j=r.a.memo((function(e){var t=e.value;return r.a.createElement("div",{className:"zsw-search-content"},t&&r.a.createElement(y,{value:t}),!t&&r.a.createElement(O,null))})),N=Object(n.createContext)({changeValue:function(){}}),k=function(e){var t=e.placeholder,a=e.className,c=e.onChange,l=e.style,s=e.debounce,o=e.value,d=e.suffixIcon,p=e.suffix,f=e.onSearch,v=u()("zsw-input",a),E=Object(n.useState)(o),g=Object(i.a)(E,2),h=g[0],b=g[1],y=m(h),O=Object(n.useState)(!1),k=Object(i.a)(O,2),w=k[0],C=k[1],S={changeValue:Object(n.useCallback)((function(e){b(e)}),[])};function x(){h&&f&&f(h)}return Object(n.useEffect)((function(){c&&s&&c(y)}),[c,y,s]),r.a.createElement("div",{className:v,style:l},r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;b(t),!s&&c&&c(t)},placeholder:t,value:h||"",onFocus:function(){C(!0)},onBlur:function(){setTimeout((function(){C(!1)}),200)},onKeyUp:function(e){"Enter"===e.key&&x()}}),p&&r.a.createElement("i",{className:d+" suffix-icon",onClick:x}),r.a.createElement(N.Provider,{value:S},w&&r.a.createElement(j,{value:h||""})))};k.defaultProps={debounce:!0,suffixIcon:"iconfont icon-xianxingtubiaozhizuomoban-20",suffix:!0},k.displayName="SearchInput";var w=r.a.memo(k),C=a(522),S=a(523),x=a(30),I={show:!1},U=function(e){return{type:"change_signIn_show",show:e}},z=a(520),P=a(57),R=a.n(P),T=Object(x.b)((function(e){var t=e.header;return{user:t.user,userState:t.userState}}),(function(e){return{changeSignInShow:function(t){var a=U(t);e(a)},handleUserLogOut:function(){e({type:"user_log_out"})}}}))(r.a.memo((function(e){var t=e.userState,a=e.user,c=e.changeSignInShow,l=e.historyStack,o=e.handleUserLogOut,u=a.nickname,m=a.avatarUrl,d=Object(b.g)(),p=Object(n.useContext)(Yt),f=Object(n.useState)(!1),E=Object(i.a)(f,2),g=E[0],h=E[1],y=Object(P.useAliveController)().dropScope;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-inner"},r.a.createElement("a",{href:"/",className:"logo",onClick:function(e){return e.preventDefault()}},r.a.createElement("span",{className:" iconfont icon-wangyiyunyinyueclick"}),r.a.createElement("span",{className:"name"},"\u7f51\u6613\u4e91\u97f3\u4e50")),r.a.createElement("div",{className:"navigators"},r.a.createElement("div",{className:"navigator-prev ".concat(l.prev?"able":""),onClick:function(){l.prev&&(p.setHistoryStack("prev",""),d.goBack())}},r.a.createElement(C.a,null)),r.a.createElement("div",{className:"navigator-next ".concat(l.next?"able":""),onClick:function(){l.next&&(p.setHistoryStack("next",""),d.goForward())}},r.a.createElement(S.a,null))),r.a.createElement(w,{style:{float:"left",marginLeft:"4rem"},placeholder:"\u641c\u7d22\u97f3\u4e50,\u6b4c\u624b,\u6b4c\u8bcd,\u7528\u6237",onSearch:function(e){p.setHistoryStack("push","searchResult"),d.push("/searchResult/".concat(e))}}),r.a.createElement("div",{className:"user",onClick:function(){if(!t)return c(!0);h(!g)}},r.a.createElement("span",{className:"user-img"},m?r.a.createElement("img",{src:m,alt:""}):r.a.createElement(v.a,{className:"user-icon"})),t?r.a.createElement("span",{className:"user-state user-online"},u):r.a.createElement("span",{className:"user-state user-offline"},"\u672a\u767b\u5f55"),r.a.createElement(s.a,{visible:g,title:"\u786e\u5b9a\u9000\u51fa\u5417",cancelText:"\u53d6\u6d88",okText:"\u9000\u51fa",onConfirm:function(){o(),d.replace("/"),p.setHistoryStack("clear",""),y(/^((?!recommend).)*$/)}}))))}))),M=a(517),Q=a(515),D=a(518),A=a(524),H=a(525),L=function(e){var t=Q.a.useForm(),a=Object(i.a)(t,1)[0],n=e.show,c=e.handleUserLogin,l=e.changeSignInShow,s=u()("signin",{show:n});return r.a.createElement("div",{className:s},r.a.createElement("div",{className:"content"},r.a.createElement(M.a,{title:"\u9000\u51fa",onBack:function(){return l(!1)},className:"nav"}),r.a.createElement("h2",{className:"title"},"\u624b\u673a \xb7 \u767b\u5f55"),r.a.createElement(Q.a,{form:a,style:{padding:"2rem 1rem"}},r.a.createElement(Q.a.Item,{name:"phone",rules:[{required:!0,message:"\u624b\u673a\u53f7\u5fc5\u987b\u586b\u5199"}],initialValue:"18257712408"},r.a.createElement(D.a,{prefix:r.a.createElement(A.a,null),allowClear:!0})),r.a.createElement(Q.a.Item,{name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u586b\u5199"}],initialValue:"a986176132"},r.a.createElement(D.a.Password,{prefix:r.a.createElement(H.a,null),allowClear:!0})),r.a.createElement("div",{className:"btn",onClick:function(){a.validateFields().then((function(e){var t=e.phone,a=e.password;c({phone:t,password:a})}))}},"\u767b \u5f55"))))};L.displayName="SignIn";var _=Object(x.b)((function(e){return{show:e.signIn.show}}),(function(e){return{handleUserLogin:function(t){var a,n=(a=t,function(e){z.b.loading({content:"\u767b\u9646\u4e2d",duration:0,key:"loading"});var t=a.phone,n=a.password,r="/login/cellphone?phone=".concat(t,"&password=").concat(n);h.get(r,{withCredentials:!0}).then((function(t){z.b.destroy();var a={},n=t.data.profile,r=n.avatarUrl,c=n.nickname,l=n.userId;a.avatarUrl=r,a.nickname=c,a.userId=l,e({type:"update_user_state",state:!0}),e(function(e){return{type:"set_user_info",user:e}}(a)),z.b.success({content:"\u767b\u5f55\u6210\u529f",duration:1,onClose:function(){return e(U(!1))}}),sessionStorage.setItem("islogin","true")})).catch((function(){z.b.destroy(),z.b.error("\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u8bef")}))});e(n)},changeSignInShow:function(t){var a=U(t);e(a)}}}))(r.a.memo(L)),J=a(75),K=a(513),V=a(547),W=a(526),B=r.a.memo((function(){var e=Object(n.useContext)(F),t=e.currIndex,a=e.count;function c(){e.leave&&e.leave()}return r.a.createElement("ul",{className:"dots clearfix"},function(){if(a){for(var n=[],l=function(l){var i=!1;(t===l+1||0===t&&l===a-1||t===a+1&&0===l)&&(i=!0),n.push(r.a.createElement("li",{key:l,className:"dot ".concat(i?"active":""),onMouseEnter:function(){return t=l+1,void(e.hover&&e.hover(t));var t},onMouseLeave:c}))},i=0;i<a;i++)l(i);return n}}())}));B.displayName="Dots";var Y=B,F=Object(n.createContext)({}),q=function(e){var t=e.style,a=e.children,c=e.duration,l=Object(n.useRef)(0),s=Object(n.useRef)(),o=Object(n.useState)(!0),u=Object(i.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(1),f=Object(i.a)(p,2),v=f[0],E=f[1],g={currIndex:v,count:l.current,hover:function(e){d(!1),clearTimeout(s.current),E(e)},leave:function(){d(!0)}};return Object(n.useEffect)((function(){m&&function(){if(l&&void 0!==l.current)v===l.current?E(0):s.current=setTimeout((function(){E(v+1)}),c)}()}),[v,c,m]),r.a.createElement("div",{className:"zsw-swipe",style:t},r.a.createElement(F.Provider,{value:g},r.a.createElement("div",null,function(){var e=r.a.Children.count(a),t=r.a.Children.map(a,(function(e,t){var a=e;if("SwipeItem"===a.type.displayName)return r.a.cloneElement(a,{index:t+1});console.error("Warning: Swipe's children must be SwipeItem")}));return 0!==t.length&&t[0]&&t[e-1]&&(t.unshift(r.a.cloneElement(t[e-1],{key:"copy_last",index:0})),t.push(r.a.cloneElement(t[1],{key:"copy_first",index:e+1}))),g.count=e,l.current=e,t}()),r.a.createElement(Y,null)))};q.defaultProps={duration:5e3};var Z=q,G=r.a.memo((function(e){var t=e.index,a=e.children,c=e.style,l=Object(n.useContext)(F),i=l.currIndex,s=l.count,o=void 0===i||void 0===s?"center":i+1===t?"right":i-1===t||!i&&t===s-1?"left":i===t?"active":"center";return r.a.createElement("div",{style:c,className:"swipe-item ".concat(o)},a)}));G.displayName="SwipeItem";var X=G,$=Z;$.Item=X;var ee=$,te=r.a.memo((function(e){var t=e.title,a=e.moreClick;return r.a.createElement("div",{className:"recommend-panel-title"},r.a.createElement("span",{className:"fl"},t),r.a.createElement("span",{className:"fr",onClick:a},"\u66f4\u591a"))})),ae=function(e){return parseInt("".concat(e/1e4))+"\u4e07"},ne=function(e,t){var a,n=new Date(t),r={"Y+":n.getFullYear().toString(),"m+":(n.getMonth()+1).toString(),"d+":n.getDate().toString(),"H+":n.getHours().toString(),"M+":n.getMinutes().toString(),"S+":n.getSeconds().toString()};for(var c in r)(a=new RegExp("("+c+")").exec(e))&&(e=e.replace(a[1],1===a[1].length?r[c]:r[c].padStart(a[1].length,"0")));return e},re=function(e){var t=parseInt(""+e/1e3),a=parseInt("".concat(t/60)),n=parseInt("".concat(t-60*a));return a.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},ce=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({name:n.name,id:n.id})}return t},le=a(291),ie=Object(le.a)(/^\[([0-9]+):([0-9]+\.[0-9]+)\](.*)?$/gm,{minute:1,second:2,content:3}),se=function(e,t){if(e)return!1;switch(t){case 0:case 8:return!0;case 1:return!1;default:return console.log(t),!1}},oe=a(527),ue=r.a.memo((function(e){var t=e.src,a=e.className,c=Object(n.useRef)(null),l=Object(n.useRef)(new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(e.target.src=t,l.current.unobserve(e.target))}))})));return Object(n.useEffect)((function(){(new Image).src=t}),[t]),Object(n.useEffect)((function(){var e=l.current;return c&&c.current&&l&&l.current&&l.current.observe(c.current),function(){e.disconnect()}}),[c]),r.a.createElement("img",{src:"data:image/png;base64,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",alt:"",className:"lazyload "+a,ref:c})})),me=r.a.memo((function(e){var t=e.playCount,a=e.picUrl,n=e.onClick,c=e.name,l=e.copywriter;return r.a.createElement("div",{onClick:n,className:"playlist-item"},r.a.createElement(ue,{src:a,className:l?"tran":""}),t&&r.a.createElement("div",{className:"play-count"},r.a.createElement(W.a,null),ae(t)),c&&r.a.createElement("div",{className:"description"},c),r.a.createElement("div",{className:"play-icon"},r.a.createElement(oe.a,null)),l&&r.a.createElement("div",{className:"copywriter"},l))})),de=r.a.memo((function(e){var t=e.name,a=Object(b.g)(),c=Object(n.useContext)(Yt);return r.a.createElement("div",{className:"main-tabs-nav"},r.a.createElement(J.a,{mode:"horizontal",selectedKeys:[t],onClick:function(e){var t=e.key;a.push("/".concat("recommend"===t?"":t)),c.setHistoryStack("push",t)}},r.a.createElement(J.a.Item,{title:"\u4e2a\u6027\u63a8\u8350",key:"recommend"},"\u4e2a\u6027\u63a8\u8350"),r.a.createElement(J.a.Item,{title:"\u6b4c\u5355",key:"totalPlaylist"},"\u6b4c\u5355"),r.a.createElement(J.a.Item,{title:"\u6392\u884c\u699c",key:"rank"},"\u6392\u884c\u699c")))})),pe=Object(x.b)((function(e){return{userId:e.header.user.userId}}))(r.a.memo((function(e){var t=e.moreClick,a=e.userId,c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),p=d[0],f=d[1],v=u()("recommend"),E=Object(b.g)(),g=Object(n.useContext)(Yt);return Object(n.useEffect)((function(){h.get("/banner?type=0").then((function(e){for(var t=e.data.banners,a=[],n=0;n<t.length;n++){var r=t[n];a.push(r.imageUrl)}o(a)})),h.get("/personalized?limit=10&timestamp="+Date.now()).then((function(e){for(var t=e.data.result,a=[],n=0;n<t.length;n++){var r=t[n],c=r.id,l=r.name,i=r.picUrl,s=r.playCount,o=r.copywriter;a.push({id:c,name:l,picUrl:i,playCount:s,copywriter:o})}f(a)}))}),[a]),r.a.createElement("div",{className:v},r.a.createElement("div",null,r.a.createElement(de,{name:"recommend"}),r.a.createElement(ee,{style:{margin:"0 auto",marginTop:30}},s.map((function(e){return r.a.createElement(ee.Item,{key:e},r.a.createElement("img",{src:e,alt:""}))}))),r.a.createElement("div",{className:"recommend-playlists"},r.a.createElement(te,{title:"\u63a8\u8350\u6b4c\u5355",moreClick:t}),r.a.createElement("div",{className:"playlist-item-container"},p.map((function(e){return r.a.createElement(me,Object.assign({},e,{key:e.id,onClick:function(){return t=e.id,E.push("/playlist/".concat(t)),void g.setHistoryStack("push","playlist");var t}}))}))))))}))),fe=a(519),ve=a(528),Ee=r.a.memo((function(e){var t=e.icon,a=e.categoryName,n=e.arr,c=e.onClick,l=e.currCategory;return r.a.createElement("div",{className:"all-categories-dropdown-content-item"},r.a.createElement("div",{className:"all-categories-dropdown-content-item-left"},r.a.createElement("div",null,r.a.createElement("i",{className:"iconfont "+t}),r.a.createElement("span",null,a))),r.a.createElement("div",{className:"all-categories-dropdown-content-item-right"},r.a.createElement("div",null,n.map((function(e){return r.a.createElement("div",{className:"all-categories-dropdown-content-item-right-item "+(l===e.name?"selected":""),key:e.name,onClick:function(){return c(e.name)}},e.name,e.hot&&r.a.createElement("span",{className:"all-categories-dropdown-content-item-right-item-hot"},"HOT"))})))))})),ge=["icon-diqiu","icon-fengge","icon-kafei","icon-xiaolian","icon-zhuti_"],he=r.a.memo((function(e){var t=e.categories,a=e.currCategory,n=e.changeCategory,c=e.show,l=e.changeShow;function i(){l(!c)}function s(e){i(),n(e)}return r.a.createElement("div",{className:"all-categories"},r.a.createElement("div",{className:"all-categories-btn",onClick:i},a,r.a.createElement(ve.a,null)),r.a.createElement("div",{className:"all-categories-dropdown "+(c?"show":"")},r.a.createElement("div",{className:"all-categories-dropdown-title"},"\u9009\u62e9\u6807\u7b7e"),r.a.createElement("div",{className:"all-categories-dropdown-content"},r.a.createElement("div",null,r.a.createElement("div",{className:"all-categories-dropdown-content-top "+("\u5168\u90e8\u6b4c\u5355"===a?"selected":""),onClick:function(){return s("\u5168\u90e8\u6b4c\u5355")}},"\u5168\u90e8\u6b4c\u5355"),t.map((function(e,t){return r.a.createElement(Ee,Object.assign({},e,{icon:ge[t],key:e.categoryName,onClick:s,currCategory:a}))}))))))})),be=a(529),ye=a(288);function Oe(e){var t=[];for(var a in e)t.push(e[a]);return t}var je=r.a.memo((function(e){var t=u()("total-playlists"),a=e.match,c=a&&a.params.type?a.params.type:"\u5168\u90e8\u6b4c\u5355",l=Object(n.useState)(c),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)([]),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useState)([]),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)(!1),w=Object(i.a)(k,2),C=w[0],S=w[1],x=Object(n.useState)([]),I=Object(i.a)(x,2),U=I[0],z=I[1],P=Object(n.useState)({page:0,limit:50}),R=Object(i.a)(P,2),T=R[0],M=R[1],Q=Object(n.useState)({current:1}),D=Object(i.a)(Q,2),A=D[0],H=D[1],L=Object(n.useRef)({defaultCurrent:1,defaultPageSize:50,hideOnSinglePage:!0,size:"small",showSizeChanger:!1,onChange:function(e){M((function(t){return{page:e-1,limit:t.limit}}))}}),_=Object(n.useContext)(Yt),J=Object(b.g)(),K=Object(n.useRef)(null),V=Object(n.useState)(!1),W=Object(i.a)(V,2),B=W[0],Y=W[1];return Object(n.useEffect)((function(){var e=K;function t(e){e.target.classList.contains("all-categories-btn")||Y(!1)}return e.current&&e.current.addEventListener("click",t),function(){e.current&&e.current.removeEventListener("click",t)}}),[]),Object(n.useEffect)((function(){m("\u53e6\u7c7b"===c?"\u53e6\u7c7b/\u72ec\u7acb":c)}),[c]),Object(n.useEffect)((function(){function e(e){for(var t=[],a=0;a<e.length;a++){var n=e[a],r={name:n.name,category:n.category,hot:n.hot};t.push(r)}return t}function t(){return(t=Object(f.a)(p.a.mark((function t(){var a,n,r,c,l,i,s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/playlist/catlist");case 2:for(a=t.sent,n=a.data,r=n.categories,c=Oe(r),l=n.sub,i=[],console.log(c),s=function(t){var a=e(l.filter((function(e){return e.category===t}))),n={categoryName:c[t],arr:a};i.push(n)},o=0;o<c.length;o++)s(o);g(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(f.a)(p.a.mark((function e(){var t,a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/playlist/hot");case 2:for(t=e.sent,a=t.data,n=a.tags,r=[],c=0;c<n.length;c++)r.push({name:n[c].name,id:n[c].id});N(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}(),function(){console.log("unmount")}}),[]),Object(n.useEffect)((function(){function e(){var e=T.page,t=T.limit,a=e*t;return"\u5168\u90e8\u6b4c\u5355"===o?"/top/playlist?limit=".concat(t,"&offset=").concat(a):"/top/playlist?cat=".concat(o,"&limit=").concat(t,"&offset=").concat(a)}function t(){return(t=Object(f.a)(p.a.mark((function t(){var a,n,r,c,l,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(!0),0!==U.length){t.next=4;break}return t.next=4,new Promise((function(e){setTimeout(e,500)}));case 4:return t.next=6,h.get(e());case 6:for(a=t.sent,n=a.data,r=n.playlists,c=[],l=0;l<r.length;l++)i=r[l],c.push({name:i.name,id:i.id,playCount:i.playCount,picUrl:i.coverImgUrl});H({total:500}),z(c),S(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[o,T]),r.a.createElement("div",{className:t,ref:K},r.a.createElement("div",{className:"total-playlists-inner"},r.a.createElement(de,{name:"totalPlaylist"}),r.a.createElement(he,{categories:E,currCategory:o,changeCategory:m,show:B,changeShow:Y}),r.a.createElement("div",{className:"hot-categories"},r.a.createElement("span",{className:"hot-categories-title"},"\u70ed\u95e8\u6807\u7b7e: "),j.map((function(e){return r.a.createElement("span",{key:e.name,className:"hot-categories-item",onClick:function(){return m(e.name)}},e.name)}))),r.a.createElement("div",{className:"all-playlists-inner-content"},C?r.a.createElement("div",{className:"all-playlists-inner-content-loading"},r.a.createElement(be.a,null),"\u8f7d\u5165\u4e2d"):r.a.createElement("div",null,U.map((function(e){return r.a.createElement(me,Object.assign({},e,{onClick:function(){return t=e.id,_.setHistoryStack("push","playlist"),void J.push("/playlist/"+t);var t},key:e.id}))}))),r.a.createElement("div",{className:"all-playlists-inner-pagination"},r.a.createElement(ye.a,Object.assign({},L.current,A,{style:{display:C?"none":"block"}}))))))})),Ne=r.a.memo((function(e){var t=e.picUrl,a=e.tracks,n=e.updateTime,c=e.onClick;function l(){c&&c()}return r.a.createElement("div",{className:"official-rank-item"},r.a.createElement("div",{className:"official-rank-item-top",style:{backgroundImage:"url(".concat(t,"?param=300y100)")}},r.a.createElement("div",{className:"official-rank-item-left-overlay",onClick:l},r.a.createElement(oe.a,null))),r.a.createElement("div",{className:"official-rank-item-bottom"},a.map((function(e,t){return r.a.createElement("div",{className:"official-rank-item-bottom-item",key:t},r.a.createElement("div",{className:"official-rank-item-bottom-item-index"},t+1),r.a.createElement("div",{className:"official-rank-item-bottom-item-song-name"},e.first),r.a.createElement("div",{className:"official-rank-item-bottom-item-singer-name"},e.second))})),r.a.createElement("div",{className:"official-rank-item-bottom-btn"},r.a.createElement("span",{style:{float:"left"}},ne("mm\u6708dd\u65e5\u66f4\u65b0",n)),r.a.createElement("span",{style:{float:"right"},onClick:l},"\u67e5\u770b\u5168\u90e8",r.a.createElement(S.a,null)))))})),ke=r.a.memo((function(){var e=u()("total-ranks"),t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),m=o[0],d=o[1],v=Object(n.useState)([]),E=Object(i.a)(v,2),g=E[0],y=E[1],O=Object(n.useContext)(Yt),j=Object(b.g)();function N(e,t){return t?j.push("/singerRank"):(O.setHistoryStack("push","playlist"),void j.push("/playlist/"+e))}return Object(n.useEffect)((function(){function e(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({picUrl:n.coverImgUrl,updateTime:n.updateTime,id:n.id,tracks:n.tracks})}return console.log(t),t}function t(e){return{updateTime:Date.now(),picUrl:e.coverUrl,tracks:e.artists,id:"",type:"singer"}}function a(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({picUrl:n.coverImgUrl,id:n.id,name:n.name,playCount:n.playCount})}return t}function n(){return(n=Object(f.a)(p.a.mark((function n(){var r,c,i,s,o,u;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l(!0),0!==m.length){n.next=4;break}return n.next=4,new Promise((function(e){setTimeout(e,500)}));case 4:return n.next=6,h.get("/toplist/detail");case 6:r=n.sent,c=r.data,i=c.list,s=c.artistToplist,o=i.slice(0,4),u=i.slice(4),d(e(o).concat([t(s)])),y(a(u)),l(!1);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:e},r.a.createElement("div",null,r.a.createElement(de,{name:"rank"}),c?r.a.createElement("div",{className:"total-rank-loading"},r.a.createElement(be.a,null),"\u8f7d\u5165\u4e2d..."):r.a.createElement("div",{className:"total-ranks-inner"},r.a.createElement("div",{className:"official-rank"},r.a.createElement("div",{className:"total-ranks-title"},"\u5b98\u65b9\u699c"),r.a.createElement("div",{className:"official-rank-content"},m.map((function(e){return r.a.createElement(Ne,Object.assign({},e,{key:e.id,onClick:function(){return N(e.id,e.type)}}))})))),r.a.createElement("div",{className:"global-rank"},r.a.createElement("div",{className:"total-ranks-title"},"\u5168\u7403\u699c"),r.a.createElement("div",{className:"global-rank-content"},g.map((function(e){return r.a.createElement(me,Object.assign({},e,{key:e.id,onClick:function(){return N(e.id)}}))})))))))})),we=r.a.memo((function(e){var t=e.picUrl,a=e.name,n=e.lastRank,c=e.index,l=e.score,i=e.totalScore,s=e.onClick;return r.a.createElement("div",{className:"total-singer-rank-item",onClick:s},r.a.createElement("div",{className:"total-singer-rank-item-index"},r.a.createElement("div",{className:"total-singer-rank-item-index-curr ".concat(c<3?"three":"")},c+1),void 0===n?r.a.createElement("div",{className:"total-singer-rank-item-index-dis new"},"new"):c-n===0?r.a.createElement("div",{className:"total-singer-rank-item-index-dis"},"-0"):c-n>0?r.a.createElement("div",{className:"total-singer-rank-item-index-dis positive"},r.a.createElement("span",{className:"iconfont icon-down-jiantou-right"}),c-n):r.a.createElement("div",{className:"total-singer-rank-item-index-dis negative"},r.a.createElement("span",{className:"iconfont icon-down-jiantou-right"}),c-n)),r.a.createElement("div",{className:"total-singer-rank-item-img"},r.a.createElement(ue,{src:t+"?param=44y44"})),r.a.createElement("div",{className:"total-singer-rank-item-name"},a),r.a.createElement("div",{className:"total-singer-rank-item-score"},r.a.createElement("div",{className:"total-singer-rank-item-score-inner",style:{width:l/i*100+"%"}})))})),Ce=new Map;Ce.set("\u534e\u8bed",1),Ce.set("\u6b27\u7f8e",2),Ce.set("\u97e9\u56fd",3),Ce.set("\u65e5\u672c",4);var Se=r.a.memo((function(){var e=u()("total-singer-rank"),t=Object(n.useState)("\u534e\u8bed"),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),m=o[0],d=o[1],v=Object(n.useRef)(0),E=Object(n.useState)(0),g=Object(i.a)(E,2),y=g[0],O=g[1],j=Object(n.useState)(!1),N=Object(i.a)(j,2),k=N[0],w=N[1],C=Object(n.useContext)(Yt),S=Object(b.g)();function x(e){l(e)}return Object(n.useEffect)((function(){var e=!1;function t(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];0===a&&(v.current=n.score),t.push({name:n.name,score:n.score,id:n.id,picUrl:n.picUrl,lastRank:n.lastRank})}return t}function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r,l,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return!e&&w(!0),a.next=3,h.get("/toplist/artist?type=".concat(Ce.get(c)));case 3:n=a.sent,r=n.data,l=r.list,!e&&O(l.updateTime),i=l.artists,!e&&d(t(i)),!e&&w(!1);case 10:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e=!0}}),[c]),r.a.createElement("div",{className:e},r.a.createElement("div",null,r.a.createElement("div",{className:"total-singer-rank-title"},"\u4e91\u97f3\u4e50\u6b4c\u624b\u699c"),r.a.createElement("div",{className:"total-singer-rank-tab"},r.a.createElement("div",{className:"total-singer-rank-tab-item ".concat("\u534e\u8bed"===c?"selected":""),onClick:function(){return x("\u534e\u8bed")}},"\u534e\u8bed"),r.a.createElement("div",{className:"total-singer-rank-tab-item ".concat("\u6b27\u7f8e"===c?"selected":""),onClick:function(){return x("\u6b27\u7f8e")}},"\u6b27\u7f8e"),r.a.createElement("div",{className:"total-singer-rank-tab-item ".concat("\u97e9\u56fd"===c?"selected":""),onClick:function(){return x("\u97e9\u56fd")}},"\u97e9\u56fd"),r.a.createElement("div",{className:"total-singer-rank-tab-item ".concat("\u65e5\u672c"===c?"selected":""),onClick:function(){return x("\u65e5\u672c")}},"\u65e5\u672c"),y?r.a.createElement("div",{className:"total-singer-rank-tab-updateTime"},r.a.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4:"),ne("mm\u6708dd\u65e5",y)):""),r.a.createElement("div",{className:"total-singer-rank-content"},k?r.a.createElement("div",{className:"total-singer-rank-content-loading"},r.a.createElement(be.a,null),"\u8f7d\u5165\u4e2d"):r.a.createElement("div",null,m.map((function(e,t){return r.a.createElement(we,Object.assign({key:e.id},e,{index:t,totalScore:v.current,onClick:function(){return t=e.id,C.setHistoryStack("push","singerDetail"),void S.push("/singerDetail/"+t);var t}}))}))))))})),xe=r.a.memo((function(){var e=Object(b.g)(),t=u()("search-music"),a=Object(n.useContext)(Yt);function c(e,t,a){var n=a||"/"+e;return r.a.createElement(b.b,{path:n},(function(a){var n=a.location;return r.a.createElement(fe.a,{in:n.pathname.includes(e)||"recommend"===e&&"/"===n.pathname,timeout:200,mountOnEnter:!0,unmountOnExit:!0,classNames:{enter:"animate__animated",enterActive:"animate__fadeIn",exit:"animate__animated",exitActive:"animate__fadeOut"}},r.a.createElement(R.a,{name:e},t))}))}return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"search-music-content"},c("recommend",r.a.createElement(pe,{moreClick:function(){a.setHistoryStack("push","totalPlaylist"),e.push("/totalPlaylist")}}),"/"),r.a.createElement(b.b,{path:"/totalPlaylist/:type?"},(function(e){return r.a.createElement(fe.a,{in:e.location.pathname.includes("totalPlaylist"),timeout:200,mountOnEnter:!0,unmountOnExit:!0,classNames:{enter:"animate__animated",enterActive:"animate__fadeIn",exit:"animate__animated",exitActive:"animate__fadeOut"}},r.a.createElement(R.a,null,r.a.createElement(je,{match:e.match})))})),c("rank",r.a.createElement(ke,null)),c("singerRank",r.a.createElement(Se,null))))})),Ie=a(532),Ue=a(533),ze=a(534),Pe=a(535),Re=a(531),Te=a(516),Me=r.a.memo((function(e){var t=e.max,a=e.onChange,c=e.value,l=e.onChanging,i=e.className,s=Object(n.useRef)();return r.a.createElement("div",{className:i},r.a.createElement("span",{className:"current-time"},re(1e3*c)),r.a.createElement(Te.a,{max:t,onAfterChange:function(e){s&&s.current&&s.current.blur(),a(e)},value:c,defaultValue:0,onChange:l,ref:s,tipFormatter:function(e){return re(e?1e3*e:0).toString()}}),r.a.createElement("span",{className:"duration"},re(1e3*t)))})),Qe=a(64),De=a(8),Ae={playLyricMap:new Map,playDetailMap:new Map,playUrlMap:new Map,playQueue:[],current:-1,playState:!1,willPlayQueue:[],willplaylistId:[]};function He(e){var t=new Map(e.playDetailMap),a=new Map(e.playUrlMap),n=new Map(e.playLyricMap),r=JSON.parse(JSON.stringify(e));return r.playLyricMap=n,r.playUrlMap=a,r.playDetailMap=t,r}var Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"push_play_queue",id:e,shouldCover:t,playlistId:a}},_e=function(e,t){return{type:"set_play_url_map",url:e,id:t}},Je=function(e,t){return{type:"set_play_lyric_map",lyric:e,id:t}},Ke=function(e){return{type:"set_play_detail_map",items:e}},Ve=function(e){return{type:"change_play_index",id:e}},We=function(e){return{type:"change_play_state",flag:e}},Be=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/song/url?id=".concat(e),t.prev=1,t.next=4,h.get(n);case 4:r=t.sent,c=r.data,0!==(l=c.data).length&&a(_e(l[0].url,e)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"push_play_queue":var a=t.id,n=t.shouldCover,r=t.playlistId,c=He(e);if(n&&(c.playQueue=[],c.willPlayQueue=[],r&&(c.willplaylistId=[r]),c.willplaylistId=[]),a instanceof Array){var l;0===a.length&&(window.audio.pause(),window.audio.src="",c.current=-1,c.playState=!1),(l=c.playQueue).push.apply(l,Object(De.a)(a));for(var i=0;i<a.length;i++){var s=c.playDetailMap.get(a[i]);if(s){var o=s.name,u=s.singers,m=s.duration,d=s.id;c.willPlayQueue.push({name:o,singers:u,duration:m,id:d})}}}else{c.playQueue.splice(c.current+1,0,a);var p=c.playDetailMap.get(a);if(p){var f=p.name,v=p.singers,E=p.duration,g=p.id;c.willPlayQueue.splice(c.current+1,0,{name:f,singers:v,duration:E,id:g})}}return c;case"set_play_url_map":var h=t.url,b=t.id,y=He(e);return y.playUrlMap.set(b,h),y;case"set_play_lyric_map":var O=t.lyric,j=t.id,N=He(e);return N.playLyricMap.set(j,O),N;case"set_play_detail_map":var k=t.items,w=He(e);return w.playDetailMap=new Map([].concat(Object(De.a)(w.playDetailMap),Object(De.a)(k))),w;case"change_play_index":var C=t.id,S=He(e);return S.current=S.playQueue.indexOf(C),S;case"change_play_id":var x=t.index,I=He(e);return console.log(x),I.current=x,I;case"change_play_state":var U=t.flag,z=He(e);return z.playState=U,z;default:return e}},Fe=a(514),qe=a(530),Ze=Object(x.b)((function(e){var t=e.player,a=t.current;return{willPlayQueue:t.willPlayQueue,current:t.playQueue[a],playState:t.playState}}),(function(e){return{fetchPlayUrl:function(t){e(Be(t))},changePlayIndex:function(t){e(Ve(t))},pushPlayQueue:function(t){e(Le(t,!0))}}}))(r.a.memo((function(e){var t=e.willPlayQueue,a=e.fetchPlayUrl,c=e.changePlayIndex,l=e.current,i=e.playState,s=e.pushPlayQueue;var o=Object(n.useContext)(Yt),u=Object(b.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"will-play-list-tips"},r.a.createElement("div",{className:"will-play-list-total"},"\u5171",t.length,"\u9996"),r.a.createElement("div",{className:"will-play-list-clear-all",onClick:function(){s([])}},r.a.createElement(qe.a,null),"\u6e05\u7a7a")),r.a.createElement(Fe.a,{dataSource:t,className:"will-play-list-content",showHeader:!1,rowKey:function(e){return e.id},pagination:!1,size:"small",showSorterTooltip:!1,scroll:{y:485},onRow:function(e){return{onDoubleClick:function(){return t=e.id,a(t),void c(t);var t}}}},r.a.createElement(Fe.a.Column,{width:50,className:"will-play-list-play-state",render:function(e,t,a){return l===t.id?r.a.createElement(Re.a,{className:"will-play-list-".concat(i?"play":"pause")}):r.a.createElement("span",null)}}),r.a.createElement(Fe.a.Column,{dataIndex:"name",width:300,className:"will-play-list-name"}),r.a.createElement(Fe.a.Column,{dataIndex:"singers",className:"will-play-list-singername",render:function(e){return e.map((function(e){return r.a.createElement("span",{key:e.id,onClick:function(){return t=e.id,o.setHistoryStack("push","singerDetail"),void u.push("/singerDetail/"+t);var t},className:"singer-name"},e.name)}))}}),r.a.createElement(Fe.a.Column,{dataIndex:"duration",className:"will-play-list-duration"})))}))),Ge=r.a.memo((function(e){var t=e.show,a=u()("will-play-list",{show:t});return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"will-play-list-title"},r.a.createElement("div",{className:"will-play-list-title-center"},r.a.createElement("div",{className:"will-play-list-title-playlist sele"},"\u64ad\u653e\u5217\u8868"),r.a.createElement("div",{className:"will-play-list-title-history"},"\u5386\u53f2\u8bb0\u5f55"))),r.a.createElement(Ze,null))})),Xe=[{playMode:"order",title:"\u987a\u5e8f\u64ad\u653e",icon:"icon-shouye-bofangmoshi-shunxubofang",index:0},{playMode:"random",title:"\u968f\u673a\u64ad\u653e",icon:"icon-shouye-bofangmoshi-suijibofang",index:1},{playMode:"repeat",title:"\u5355\u66f2\u5faa\u73af",icon:"icon-shouye-bofangmoshi-danquxunhuan",index:2}],$e=Object(x.b)((function(e){var t=e.player,a=t.current,n=t.playQueue,r=n[a];return{src:t.playUrlMap.get(r),currIndex:a,playQueue:n,playUrlMap:t.playUrlMap}}),(function(e){return{changePlayId:function(t){console.log(t),e(function(e){return{type:"change_play_id",index:e}}(t))},fetchPlayUrl:function(t){e(Be(t))},changePlayState:function(t){e(We(t))}}}))(r.a.memo((function(e){var t=e.src,a=e.currIndex,c=e.playQueue,l=e.changePlayId,s=e.playUrlMap,o=e.fetchPlayUrl,u=e.changePlayState,m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(0),E=Object(i.a)(v,2),g=E[0],h=E[1],b=Object(n.useState)(1),y=Object(i.a)(b,2),O=y[0],j=y[1],N=Object(n.useState)(0),k=Object(i.a)(N,2),w=k[0],C=k[1],S=Object(n.useRef)(),x=Object(n.useState)(!1),I=Object(i.a)(x,2),U=I[0],z=I[1],P=Object(n.useState)(0),R=Object(i.a)(P,2),T=R[0],M=R[1],Q=Object(n.useState)(!1),D=Object(i.a)(Q,2),A=D[0],H=D[1];function L(){if(0!==c.length)switch(T){case 0:return K();case 1:return J();case 2:return _()}}function _(){window.audio.currentTime=0}function J(){var e=Math.floor(Math.random()*c.length);s.get(c[e])||o(c[e]),l(e)}function K(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){var t=a+1;t>=c.length&&(t=0),s.get(c[t])||o(c[t]),console.log(t),l(t)}else{var n=a-1;n<0&&(n=c.length-1),s.get(c[n])||o(c[n]),l(n)}}function V(e){window.audio.src&&(e?(window.audio.play(),f(!0),u(!0)):(window.audio.pause(),f(!1),u(!1)))}return Object(n.useEffect)((function(){return S.current=setInterval((function(){h(window.audio.currentTime),p||clearInterval(S.current)})),function(){clearInterval(S.current)}}),[p,U]),Object(n.useEffect)((function(){window.audio=document.getElementById("play-audio")}),[]),r.a.createElement("div",{className:"zsw-player"},r.a.createElement("ul",{className:"btn"},r.a.createElement("li",null,r.a.createElement(Ie.a,{onClick:function(){if(0!==c.length)switch(T){case 0:return K(!1);case 1:return J();case 2:return _()}}})),r.a.createElement("li",null,window.audio&&!window.audio.paused?r.a.createElement(Ue.a,{onClick:function(){return V(0)}}):r.a.createElement(ze.a,{onClick:function(){return V(1)}})),r.a.createElement("li",null,r.a.createElement(Pe.a,{onClick:L}))),r.a.createElement(Me,{onChange:function(e){window.audio.currentTime=e,z(!U),f(!0)},max:w,value:g,onChanging:function(e){h(e),clearInterval(S.current)},className:"player-progress"}),r.a.createElement("div",{className:"volumn"},r.a.createElement(Re.a,null),r.a.createElement(Te.a,{max:1,step:.1,className:"volumn-slider",defaultValue:0,value:O,onChange:function(e){window.audio.volume=e,j(e)}})),r.a.createElement("div",{className:"play-mode"},r.a.createElement(Qe.a,{title:Xe[T].title},r.a.createElement("span",{className:"iconfont ".concat(Xe[T].icon),onClick:function(){return function(e){if(e+1>2)return M(0);M(e+1)}(Xe[T].index)}}))),r.a.createElement("div",{className:"will-play"},r.a.createElement("span",{className:"iconfont icon-bofangliebiao",title:"\u64ad\u653e\u5217\u8868",onClick:function(){H(!A)}})),r.a.createElement("audio",{src:t,id:"play-audio",onCanPlay:function(){window.audio.play(),C(window.audio.duration),f(!0),u(!0)},onEnded:function(){L()}}),r.a.createElement(Ge,{show:A}))}))),et=a(542),tt=a(537),at=a(538),nt=a(539),rt=a(540),ct=a(541),lt=a(536),it=r.a.memo((function(e){var t=e.nickname,a=e.avatarUrl,n=e.content,c=e.time,l=e.beReplied,i=e.likedCount;return r.a.createElement("div",{className:"comment-item"},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:a,alt:"",className:"avatar",width:36})),r.a.createElement("div",{className:"info"},r.a.createElement("p",{className:"content"},r.a.createElement("span",{className:"avatar-name"},t,":")," ",n),l&&0!==l.length&&l.map((function(e){return r.a.createElement("div",{className:"reply",key:e.beRepliedCommentId},r.a.createElement("span",{className:"avatar-name"},e.nickname),e.content)})),r.a.createElement("p",{className:"time"},ne("YYYY\u5e74m\u6708d\u65e5 HH:MM",c))),r.a.createElement("div",{className:"interaction"},r.a.createElement("span",null,r.a.createElement(lt.a,null),"(",i,")"),r.a.createElement("span",{className:"split"},"|"),r.a.createElement("span",null,"\u5206\u4eab"),r.a.createElement("span",{className:"split"},"|"),r.a.createElement("span",null,"\u56de\u590d")))}));function st(e){if(0===e.length)return[];for(var t=[],a=0;a<e.length;a++){var n=e[a],r={content:n.content,userId:n.user.userId,nickname:n.user.nickname,beRepliedCommentId:n.beRepliedCommentId};t.push(r)}return t}function ot(e){if(0===e.length)return[];for(var t=[],a=0;a<e.length;a++){var n=e[a],r={userId:n.user.userId,nickname:n.user.nickname,avatarUrl:n.user.avatarUrl,content:n.content,time:n.time,likedCount:n.likedCount,commentId:n.commentId,beReplied:st(n.beReplied)};t.push(r)}return t}var ut=Object(x.b)((function(e){return{userState:e.header.userState}}),(function(e){return{ChangeSignInShow:function(){e(U(!0))}}}))(r.a.memo((function(e){var t=Object(n.useState)(280),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)([]),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useState)(!1),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)(!1),w=Object(i.a)(k,2),C=w[0],x=w[1],I=Object(n.useState)(!1),U=Object(i.a)(I,2),P=U[0],R=U[1],T=e.userState,M=e.ChangeSignInShow,Q=e.id,D=e.type,A=e.beforeClickMoreComments,H=Object(n.useState)({current:1}),L=Object(i.a)(H,2),_=L[0],J=L[1],K=Object(n.useRef)(null),V=Object(n.useRef)({defaultCurrent:1,defaultPageSize:50,hideOnSinglePage:!0,size:"small",showSizeChanger:!1,onChange:function(e){e>=2?R(!1):1===e&&R(!0);t=200,W&&W.current&&W.current.scroll({top:t}),G((function(t){return{page:e-1,limit:t.limit}}));var t}}),W=Object(n.useRef)(),B=Object(n.useContext)(Yt),Y=Object(b.g)(),F=Object(n.useState)({page:0,limit:50}),q=Object(i.a)(F,2),Z=q[0],G=q[1];return Object(n.useEffect)((function(){W.current=document.getElementsByClassName("home-content")[0]}),[]),Object(n.useEffect)((function(){var e=!1;function t(e,t){var a=Z.page,n=Z.limit,r=a*n;switch(t){case"playlist":return"comment/playlist?id=".concat(e,"&limit=").concat(n,"&offset=").concat(r,"&timestamp=").concat(Date.now());case"music":return"comment/music?id=".concat(e,"&limit=").concat(n,"&offset=").concat(r,"&timestamp=").concat(Date.now());case"mv":return"comment/mv?id=".concat(e,"&limit=").concat(n,"&offset=").concat(r,"&timestamp=").concat(Date.now());case"album":return"comment/album?id=".concat(e,"&limit=").concat(n,"&offset=").concat(r,"&timestamp=").concat(Date.now())}}function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return!e&&N(!0),a.next=3,h.get(t(Q,D));case 3:n=a.sent,r=n.data,0===Z.page&&(!e&&x(r.moreHot),!e&&m(ot(r.hotComments)),!e&&R(!0)),!e&&g(ot(r.comments)),!e&&J({total:r.total}),!e&&N(!1);case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e=!0}}),[Q,D,Z]),r.a.createElement("div",{className:"zsw-comments"},r.a.createElement("div",{className:"textarea"},r.a.createElement("div",{className:"textarea-inner"},r.a.createElement("textarea",{name:"",id:"",rows:3,maxLength:280,onChange:function(e){l(280-e.target.value.length)},ref:K}),r.a.createElement("div",{className:"rest-words-count"},c)),r.a.createElement("button",{className:"btn-comment",onClick:function(){if(!T)return M();if(K&&K.current){var e=function(e){switch(e){case"music":return 0;case"mv":return 1;case"playlist":return 2}}(D);h.get("/comment?t=1&type=".concat(e,"&id=").concat(Q,"&content=").concat(K.current.value),{withCredentials:!0}).then((function(e){var t=e.data.comment,a={commentId:t.commentId,content:t.content,time:t.time,userId:t.user.userId,nickname:t.user.nickname,avatarUrl:t.user.avatarUrl,likedCount:0};z.b.success({content:"\u8bc4\u8bba\u53d1\u9001\u6210\u529f",duration:.5,onClose:function(){g((function(e){return[a].concat(e)})),K&&K.current&&(K.current.value="")}})})).catch((function(e){return console.log(e)}))}}},"\u8bc4\u8bba")),0!==u.length&&r.a.createElement("div",{className:"pop-comments ".concat(P?"show":"")},r.a.createElement("div",{className:"zsw-comments-title"},"\u7cbe\u5f69\u8bc4\u8bba"),u.map((function(e){return r.a.createElement(it,Object.assign({},e,{key:e.commentId}))})),C&&r.a.createElement("div",{className:"more"},r.a.createElement("span",{onClick:function(){A&&A(),B.setHistoryStack("push","moreComments"),Y.push("/moreComments/".concat(D,"/").concat(Q))}},"\u67e5\u770b\u66f4\u591a\u8bc4\u8bba",r.a.createElement(S.a,null)))),r.a.createElement("div",{className:"new-comments"},r.a.createElement("div",{className:"zsw-comments-title"},"\u6700\u65b0\u8bc4\u8bba(",_.total,")"),j&&r.a.createElement("div",{className:"loading"},r.a.createElement(be.a,null),r.a.createElement("span",{className:"text"},"\u52a0\u8f7d\u4e2d...")),E.map((function(e){return r.a.createElement(it,Object.assign({},e,{key:e.commentId}))})),r.a.createElement("div",{className:"comments-pagination"},r.a.createElement(ye.a,Object.assign({},V.current,_)))))}))),mt=r.a.memo((function(e){var t=e.picUrl,a=e.name,n=e.playCount,c=e.onClick,l=e.id;return r.a.createElement("div",{className:"simi-playlist-item",onClick:function(){c&&c(l)}},r.a.createElement("div",{className:"simi-playlist-item-left"},r.a.createElement("img",{src:t,alt:""})),r.a.createElement("div",{className:"simi-playlist-item-right"},r.a.createElement("p",{className:"simi-playlist-item-right-name"},a),r.a.createElement("p",{className:"simi-playlist-item-right-playcount"},ae(n))))})),dt=a(285),pt=r.a.memo((function(e){var t=e.id,a=e.onClick,c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],v=m[1];return Object(n.useEffect)((function(){function e(e){return{id:e.id,name:e.name,picUrl:e.coverImgUrl,playCount:e.playCount}}function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r,c,l,i,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(!0),a.next=3,h.get("simi/playlist?id=".concat(t));case 3:for(n=a.sent,r=n.data,c=r.playlists,l=[],i=0;i<c.length;i++)s=e(c[i]),l.push(s);o(l),v(!1);case 10:case"end":return a.stop()}}),a)})))).apply(this,arguments)}t&&function(){a.apply(this,arguments)}()}),[t]),r.a.createElement("div",{className:"simi-playlist"},d?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(dt.a,{indicator:r.a.createElement(be.a,null),tip:"\u52a0\u8f7d\u4e2d"})):s.map((function(e){return r.a.createElement(mt,Object.assign({},e,{key:e.id,onClick:a}))})))})),ft=Object(x.b)((function(e){var t=e.player,a=t.playQueue[t.current];return{playState:t.playState,lyricStr:t.playLyricMap.get(a)}}),(function(e){return{fetchPlayLyric:function(t){e(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/lyric?id=".concat(e),t.prev=1,t.next=4,h.get(n);case 4:r=t.sent,c=r.data,a(Je(c.lrc.lyric,e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Object(b.h)(r.a.memo((function(e){var t=e.show,a=e.fetchPlayLyric,c=e.songDetail,l=e.lyricStr,s=e.playState,o=e.hide,m=Object(n.useMemo)((function(){return u()("zsw-song-detail-content",{hidden:!t})}),[t]),d=Object(n.useRef)(null),p=Object(n.useRef)(null),f=Object(n.useState)([]),v=Object(i.a)(f,2),E=v[0],g=v[1],h=Object(n.useRef)(),y=Object(n.useState)(0),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useContext)(Yt),w=Object(b.g)();return Object(n.useEffect)((function(){l||a(c.id)}),[a,c.id,l]),Object(n.useEffect)((function(){N(0),g([])}),[c.id]),Object(n.useEffect)((function(){l&&g(function(e){for(var t,a=[];t=ie.exec(e);){var n=t.groups,r=parseFloat(n.minute),c=parseFloat(n.second)+60*r,l=n.content;l&&l.length>0?(l=l.trim(),a.push({second:c,content:l})):a.push({second:c,content:""})}return a}(l))}),[l]),Object(n.useEffect)((function(){function e(e){var t=e-240<=0?0:e-240;d&&d.current&&d.current.scrollTo({top:t})}function t(){if(p&&p.current&&0!==p.current.children.length){var t=p.current.children,a=E,n=window.audio;n.currentTime<a[j].second?function(t,a,n){for(var r=j;r>=0;r--){var c=r-1<=0?0:r-1;if(0===r&&t.currentTime<=a[r].second&&r!==j)return e(n[r].offsetTop),N(r);if(t.currentTime<=a[r].second&&t.currentTime>a[c].second&&r!==j)return e(n[c].offsetTop),N(c)}}(n,a,t):function(t,a,n){for(var r=j;r<a.length;r++){var c=r+1>=a.length?a.length-1:r+1;if(r===a.length-1&&t.currentTime>=a[r].second&&r!==j)return e(n[r].offsetTop),N(r);if(t.currentTime>=a[r].second&&t.currentTime<a[c].second&&r!==j)return e(n[r].offsetTop),N(r)}}(n,a,t)}}return 0!==E.length&&(h.current=setInterval((function(){if(!s)return clearInterval(h.current);t()}))),function(){clearInterval(h.current)}}),[s,j,E]),Object(n.useEffect)((function(){o(!1)}),[e.location.pathname,o]),r.a.createElement(fe.a,{in:!0===t,timeout:{enter:400},mountOnEnter:!0,classNames:{enter:"animate__animated enter",enterActive:"animate__fadeIn"}},r.a.createElement("div",{className:m},r.a.createElement("div",null,r.a.createElement("div",{className:"zsw-song-detail-content-top"},r.a.createElement("div",{className:"zsw-song-detail-content-top-overlay",style:{backgroundImage:"url(".concat(c.picUrl,")")}}),r.a.createElement("div",{className:"zsw-song-detail-content-top-content"},r.a.createElement("div",{className:"zsw-song-detail-content-top-left"},r.a.createElement("div",{className:"zsw-song-detail-content-top-left-round ".concat(s?"spin":"")},r.a.createElement("img",{src:c.picUrl,alt:""})),r.a.createElement("ul",{className:"zsw-song-detail-content-top-left-tags"},r.a.createElement("li",null,r.a.createElement(tt.a,null),"\u559c\u6b22"),r.a.createElement("li",null,r.a.createElement(at.a,null),"\u6dfb\u52a0"),r.a.createElement("li",null,r.a.createElement(nt.a,null),"\u6536\u85cf"),r.a.createElement("li",null,r.a.createElement(rt.a,null),"\u5206\u4eab"))),r.a.createElement("div",{className:"zsw-song-detail-content-top-right"},r.a.createElement("h3",null,c.name,r.a.createElement(ct.a,{className:"shrink",onClick:function(){return o(!1)}})),c.alia&&r.a.createElement("p",{className:"zsw-song-detail-content-top-right-alia"},c.alia),r.a.createElement("div",{className:"zsw-song-detail-content-top-right-detail"},"\u4e13\u8f91:"," ",r.a.createElement("span",{className:"album-name",onClick:function(){return e=c.albumId,o(!1),k.setHistoryStack("push","album"),void w.push("/album/"+e);var e}},c.album),"\u6b4c\u624b:",c.singers.map((function(e){return r.a.createElement("span",{className:"singer-name",key:e.id,onClick:function(){return t=e.id,o(!1),k.setHistoryStack("push","singerDetail"),void w.push("/singerDetail/"+t);var t}},e.name)}))),r.a.createElement("br",null),r.a.createElement("div",{className:"zsw-song-detail-content-top-right-scroll",ref:d},r.a.createElement("div",{ref:p},E.map((function(e,t){return r.a.createElement("p",{key:"".concat(e.second," ").concat(t),className:"".concat(t===j?"active":"")},e.content)}))))))),r.a.createElement("div",{className:"zsw-song-detail-content-bottom"},r.a.createElement("div",{className:"zsw-song-detail-content-bottom-left"},r.a.createElement("div",{className:"zsw-song-detail-content-bottom-title"},"\u542c\u53cb\u8bc4\u8bba"),t&&r.a.createElement(ut,{type:"music",id:c.id,beforeClickMoreComments:function(){return o(!1)}})),t&&r.a.createElement("div",{className:"zsw-song-detail-content-bottom-right"},r.a.createElement("div",{className:"zsw-song-detail-content-bottom-title"},"\u5305\u542b\u8fd9\u9996\u6b4c\u7684\u6b4c\u5355"),r.a.createElement(pt,{id:c.id,onClick:function(e){o(!1),k.setHistoryStack("push","playlist"),w.push("/playlist/"+e)}}))))))})))),vt=Object(x.b)((function(e){var t=e.player,a=t.playQueue[t.current],n=t.playDetailMap.get(a);return{current:t.current,songDetail:n}}))(r.a.memo((function(e){var t=e.songDetail,a=e.current,c=Object(n.useState)(!1),l=Object(i.a)(c,2),s=l[0],o=l[1];return r.a.createElement(fe.a,{in:-1!==a,timeout:200,mountOnEnter:!0,classNames:{enter:"animate__animated",enterActive:"animate__fadeIn",exit:"animate__animated",exitActive:"animate__fadeOut"},unmountOnExit:!0},r.a.createElement("div",{className:"zsw-song-detail"},r.a.createElement("div",{className:"zsw-song-detail-left"},r.a.createElement("img",{src:null===t||void 0===t?void 0:t.picUrl,alt:"",className:"zsw-song-detail-img"}),r.a.createElement("div",{className:"zsw-song-detail-enlarge",onClick:function(){return o(!0)}},r.a.createElement(et.a,null))),r.a.createElement("div",{className:"zsw-song-detail-info"},r.a.createElement("p",null,null===t||void 0===t?void 0:t.name),r.a.createElement("p",{className:"zsw-song-detail-info-singername"},null===t||void 0===t?void 0:t.singers.map((function(e){return r.a.createElement("span",{key:e.id},e.name)})))),t&&r.a.createElement(ft,{songDetail:t,show:s,hide:o})))}))),Et=r.a.memo((function(e){var t=e.match.params,a=t.id,c=t.type,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],u=s[1],m=Object(n.useState)({page:0,limit:20}),d=Object(i.a)(m,2),v=d[0],E=d[1],g=Object(n.useState)(!0),y=Object(i.a)(g,2),O=y[0],j=y[1],N=Object(n.useState)(!1),k=Object(i.a)(N,2),w=k[0],S=k[1],x=Object(n.useContext)(Yt),I=Object(b.g)();return Object(n.useEffect)((function(){var e=document.getElementsByClassName("zsw-more-comments")[0];function t(e){var t=e.target;t.scrollTop+t.offsetHeight+20>t.scrollHeight?S(!0):S(!1)}return e&&e.addEventListener("scroll",t),function(){e.removeEventListener("scroll",t)}}),[]),Object(n.useEffect)((function(){function e(){var e=v.page,t=v.limit,n=e*t;switch(c){case"playlist":return"comment/hot?id=".concat(a,"&type=2&offset=").concat(n,"&limit=").concat(t,"&timestamp=").concat(Date.now());case"music":return"comment/hot?id=".concat(a,"&type=0&offset=").concat(n,"&limit=").concat(t,"&timestamp=").concat(Date.now());case"mv":return"comment/hot?id=".concat(a,"&type=1&offset=").concat(n,"&limit=").concat(t,"&timestamp=").concat(Date.now());case"album":return"comment/hot?id=".concat(a,"&type=3&offset=").concat(n,"&limit=").concat(t,"&timestamp=").concat(Date.now())}}function t(){return(t=Object(f.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get(e());case 2:a=t.sent,n=a.data,j(n.hasMore),u((function(e){return e.concat(ot(n.hotComments))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[v,a,c]),Object(n.useEffect)((function(){w&&E((function(e){return{page:e.page+1,limit:e.limit}}))}),[w]),r.a.createElement("div",{className:"zsw-more-comments"},r.a.createElement("div",null,r.a.createElement("div",{className:"more-comments-nav"},r.a.createElement(C.a,{onClick:function(){x.setHistoryStack("prev",""),I.goBack()}}),"\u7cbe\u5f69\u8bc4\u8bba"),r.a.createElement("div",{className:"zsw-more-comments-content"},o.map((function(e){return r.a.createElement(it,Object.assign({},e,{key:e.commentId}))})),O&&r.a.createElement("div",{className:"loading"},r.a.createElement(be.a,null),r.a.createElement("span",{className:"text"},"\u52a0\u8f7d\u4e2d...")))))})),gt=a(544),ht=a(545),bt=a(543),yt=function(e){var t=e.trackIds,a=e.keywords,c=e.show,l=e.setPlayDetailMap,s=e.pushPlayQueue,o=e.fetchPlayUrl,u=e.changePlayIndex,m=e.current,d=e.playState,p=e.willPlaylistId,f=Object(n.useRef)(Object(De.a)(t)),v=Object(n.useState)(!1),E=Object(i.a)(v,2),g=E[0],y=E[1],O=Object(n.useState)([]),j=Object(i.a)(O,2),N=j[0],k=j[1],w=Object(n.useRef)(),C=Object(n.useContext)(Yt),S=Object(b.g)();return Object(n.useEffect)((function(){var e=!1,a=[];function n(e,t){var n=e.al,r=n.name,c=n.picUrl,l=e.ar,i=e.id,s=e.dt,o=e.noCopyrightRcmd,u=e.fee,m=se(o,u);return m&&a.push(i),{duration:re(s),singers:ce(l),id:i,index:t.toString().padStart(2,"0"),album:r,picUrl:c,name:e.name,hasCopyRight:m,albumId:e.al.id}}return function(){if(k([]),t&&t.length){!e&&y(!0);var r=t.join(",");h.get("/song/detail?ids="+r).then((function(t){for(var r=t.data.songs,c=[],i=new Map,s=0;s<r.length;s++){var o=n(r[s],s+1);if(o.hasCopyRight){var u=Object.assign({},o,{alia:r[s].alia.join(",")});i.set(o.id,u)}c.push(o)}f.current=a,!e&&k(c),w.current=c,!e&&y(!1),l(i)}))}}(),function(){e=!0}}),[t,l]),Object(n.useEffect)((function(){if(w.current&&w.current.length){for(var e=[],t=0;t<w.current.length;t++){var n=w.current[t],r=n.name,c=n.album,l=n.singers.map((function(e){return e.name}));(r.includes(a)||c.includes(a)||l.includes(a))&&e.push(w.current[t])}k(e)}}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{bordered:!0,dataSource:N,pagination:!1,rowKey:function(e){return e.id},className:"songsheet-table ".concat(c?"show":""),size:"small",showSorterTooltip:!1,loading:g,onRow:function(e){return{onDoubleClick:function(){return function(e,t){if(!t)return z.b.error({content:"\u56e0\u5408\u4f5c\u65b9\u8981\u6c42\uff0c\u8be5\u8d44\u6e90\u6682\u65f6\u4e0b\u67b6>_<"});-1===p.indexOf(e)&&s(f.current,e),o(e),u(e)}(e.id,e.hasCopyRight)}}}},r.a.createElement(Fe.a.Column,{title:"",width:40,align:"right",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,t.hasCopyRight?t.id===m?r.a.createElement(Re.a,{className:"".concat(d?"play":"")}):r.a.createElement("span",null,(a+1).toString().padStart(2,"0")):r.a.createElement("span",null,"\u65e0"))}}),r.a.createElement(Fe.a.Column,{title:"\u64cd\u4f5c",render:function(){return r.a.createElement("div",{className:"manipulation"},r.a.createElement(bt.a,null),r.a.createElement(nt.a,null))},width:80}),r.a.createElement(Fe.a.Column,{dataIndex:"name",title:"\u97f3\u4e50\u6807\u9898",width:300,ellipsis:!0,sorter:function(e,t){return e.name!==t.name?e.name>t.name?1:-1:0}}),r.a.createElement(Fe.a.Column,{dataIndex:"singers",title:"\u6b4c\u624b",ellipsis:!0,width:200,render:function(e){return r.a.createElement("div",null,e.map((function(e){return r.a.createElement("span",{key:e.id,className:"singer-name",onClick:function(){return t=e.id,C.setHistoryStack("push","singerDetail"),void S.push("/singerDetail/"+t);var t}},e.name)})))}}),r.a.createElement(Fe.a.Column,{dataIndex:"album",title:"\u4e13\u8f91",sorter:function(e,t){return e.album!==t.album?e.album>t.album?1:-1:0},ellipsis:!0,width:200,render:function(e,t){return r.a.createElement("span",{onClick:function(){return e=t.albumId,C.setHistoryStack("push","album"),void S.push("/album/"+e);var e},className:"album-name"},t.album)}}),r.a.createElement(Fe.a.Column,{dataIndex:"duration",title:"\u65f6\u957f",sorter:function(e,t){return e.duration!==t.duration?e.duration>t.duration?1:-1:0},width:100})))};yt.defaultProps={clickAndPushAll:!0};var Ot=Object(x.b)((function(e){var t=e.player,a=t.current;return{current:t.playQueue[a],playState:t.playState,willPlaylistId:t.willplaylistId}}),(function(e){return{setPlayDetailMap:function(t){e(Ke(t))},pushPlayQueue:function(t,a){e(Le(t,!0,a))},fetchPlayUrl:function(t){e(Be(t))},changePlayIndex:function(t){e(Ve(t))}}}))(r.a.memo(yt)),jt=r.a.memo((function(e){var t=Object(n.useState)("playlist"),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],m=o[1],d=e.trackIds,p=e.playlistId;function f(e){l(e)}return r.a.createElement("div",{className:"playlist-info"},r.a.createElement("ul",{className:"playlist-info-nav"},r.a.createElement("li",{onClick:function(){return f("playlist")},className:"playlist"===c?"sele":""},"\u6b4c\u66f2\u5217\u8868"),r.a.createElement("li",{onClick:function(){return f("comments")},className:"comments"===c?"sele":""},"\u8bc4\u8bba"),r.a.createElement("li",{onClick:function(){return f("subscribers")},className:"subscribers"===c?"sele":""},"\u6536\u85cf\u8005"),"playlist"===c&&r.a.createElement("li",{style:{float:"right"},className:"search"},r.a.createElement(w,{className:"playlist-info-search",placeholder:"\u641c\u7d22\u6b4c\u5355\u97f3\u4e50",onChange:function(e){m(e)}}))),r.a.createElement(Ot,{trackIds:d,keywords:u,show:"playlist"===c}),"comments"===c&&r.a.createElement(ut,{type:"playlist",id:p}))})),Nt=Object(x.b)(null,(function(e){return{pushPlayQueue:function(t){e(Le(t,!1))}}}))(r.a.memo((function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(),o=Object(i.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useRef)(!1),O=e.pushPlayQueue,j=e.match,N=Object(b.g)(),k=Object(n.useContext)(Yt);return Object(n.useEffect)((function(){function e(e){for(var t=[],a=0;a<e.length;a++){var n={avatarUrl:e[a].avatarUrl,userId:e[a].userId};t.push(n)}return t}function t(t){return{trackIds:t.trackIds.map((function(e){return e.id})),subscribers:e(t.subscribers),playlistId:t.id}}function a(e){return{coverImgUrl:e.coverImgUrl,name:e.name,tags:e.tags,avatarUrl:e.creator.avatarUrl,description:e.description,playCount:e.playCount,subscribedCount:e.subscribedCount,shareCount:e.shareCount,createTime:e.createTime,commentCount:e.commentCount,nickname:e.creator.nickname,trackCount:e.trackCount}}function n(){return(n=Object(f.a)(p.a.mark((function e(n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/playlist/detail?id="+n);case 2:r=e.sent,c=r.data,g(a(c.playlist)),m(t(c.playlist));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}j.params.id&&(m(void 0),function(e){n.apply(this,arguments)}(j.params.id))}),[j.params.id]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"playlist"},r.a.createElement("div",null,r.a.createElement("div",{className:"playlist-top"},r.a.createElement("div",{className:"cover-image "},E&&r.a.createElement("img",{src:E.coverImgUrl,alt:""})),E&&E.description&&r.a.createElement("div",{className:"collapse"},c?r.a.createElement(ve.a,{onClick:function(){return l(!1)}}):r.a.createElement(gt.a,{onClick:function(){return l(!0)}})),r.a.createElement("div",{className:"playlist-detail"},r.a.createElement("div",{className:"playlist-detail-panel-1"},r.a.createElement("div",{style:{float:"left"}},r.a.createElement("span",{className:"tag"},"\u6b4c\u5355"),r.a.createElement("span",{className:"content"},null===E||void 0===E?void 0:E.name))),r.a.createElement("div",{className:"playlist-detail-panel-2"},r.a.createElement("img",{src:null===E||void 0===E?void 0:E.avatarUrl,alt:""}),r.a.createElement("span",{className:"nickname"},null===E||void 0===E?void 0:E.nickname),r.a.createElement("span",{className:"createTime"},(null===E||void 0===E?void 0:E.createTime)&&ne("YYYY-mm-dd",E.createTime),"\u521b\u5efa")),r.a.createElement("div",{className:"playlist-detail-panel-3"},r.a.createElement("div",{className:"btn",onClick:function(){if(y.current)return z.b.warn({content:"\u8bf7\u52ff\u91cd\u590d\u6dfb\u52a0"});u&&(O(u.trackIds),y.current=!0)}},r.a.createElement(oe.a,null),"\u6dfb\u52a0\u5168\u90e8"),r.a.createElement("div",{className:"btn"},r.a.createElement(at.a,null),"\u6536\u85cf","(".concat(E?E.subscribedCount:0,")")),r.a.createElement("div",{className:"btn"},r.a.createElement(rt.a,null),"\u5206\u4eab","(".concat(E?E.shareCount:0,")")),r.a.createElement("div",{className:"btn"},r.a.createElement(nt.a,null),"\u4e0b\u8f7d\u5168\u90e8")),E&&E.tags&&r.a.createElement("div",{className:"playlist-detail-panel-4"},"\u6807\u7b7e:",E.tags.map((function(e){return r.a.createElement("span",{key:e,onClick:function(){return t=e,k.setHistoryStack("push","totalPlaylist"),void N.push("/totalPlaylist/"+t);var t}},e)}))),E&&E.description&&r.a.createElement("div",{className:"playlist-detail-panel-5 ".concat(c?"collapsed":"")},"\u7b80\u4ecb:",E.description.trim())),r.a.createElement("div",{className:"right"},r.a.createElement(ht.a,{style:{marginRight:10}}),null===E||void 0===E?void 0:E.trackCount,r.a.createElement(oe.a,{style:{margin:"0 10px"}}),(null===E||void 0===E?void 0:E.playCount)&&ae(E.playCount))),r.a.createElement("div",{className:"playlist-bottom"},u&&r.a.createElement(jt,u)))))}))),kt=r.a.memo((function(e){var t=e.selected,a=e.handleItemClick,n=e.name,c=e.alia,l=e.duration,i=e.index,s=e.hasCopyRight,o=e.playState,m=e.isPlayed,d=e.onDbClick,p=u()("zsw-singer-album-item",{selected:t});return r.a.createElement("div",{className:p,onClick:a,onDoubleClick:d},r.a.createElement("div",{className:"zsw-singer-album-item-index"},s?m?r.a.createElement(Re.a,{className:"".concat(o?"play":"pause")}):i:"\u65e0"),r.a.createElement(bt.a,null),r.a.createElement(nt.a,null),r.a.createElement("div",{className:"zsw-singer-album-item-text"},r.a.createElement("span",{className:"zsw-singer-album-item-name"},n),c&&r.a.createElement("span",{className:"zsw-singer-album-item-alia"},"(",c,")")),r.a.createElement("span",{className:"zsw-singer-album-item-duration"},l))})),wt=function(e){var t=e.id,a=e.playQueue,c=e.currIndex,l=e.playState,s=e.pushPlayQueue,o=e.setPlayDetailMap,m=e.changePlayIndex,d=e.fetchPlayUrl,v=e.title,E=e.needExpand,g=e.top50,b=e.picUrl,y=Object(n.useState)(-1),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)(!1),w=Object(i.a)(k,2),C=w[0],x=w[1],I=Object(n.useState)([]),U=Object(i.a)(I,2),P=U[0],R=U[1],T=Object(n.useState)(!1),M=Object(i.a)(T,2),Q=M[0],D=M[1],A=u()("zsw-singer-album-detail-content",{expand:Q,top50:g}),H=Object(n.useRef)(!1),L=Object(n.useRef)([]);return Object(n.useEffect)((function(){var e=!1;function a(e){for(var t=[],a=new Map,n=0;n<e.length;n++){var r=e[n],c=r.name,l=r.id,i=r.dt,s=r.alia,u=r.noCopyrightRcmd,m=r.ar,d=r.al,p=r.fee;L.current.push(r.id),a.set(r.id,{name:c,duration:re(i),singers:ce(m),picUrl:d.picUrl,album:d.name,alia:s.join(" "),id:l,hasCopyRight:!u&&!p,albumId:r.al.id}),t.push({name:c,id:l,duration:re(i),alia:s.join(" "),index:(n+1).toString().padStart(2,"0"),hasCopyRight:!u})}return o(a),t}function n(){return(n=Object(f.a)(p.a.mark((function n(){var r,c,l,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e&&x(!0),!g){n.next=9;break}return n.next=4,h.get("/artist/top/song?id="+t);case 4:r=n.sent,c=r.data,!e&&R(a(c.songs)),n.next=14;break;case 9:return n.next=11,h.get("/album?id="+t);case 11:l=n.sent,i=l.data,!e&&R(a(i.songs));case 14:!e&&x(!1);case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return L.current=[],t&&function(){n.apply(this,arguments)}(),function(){e=!0}}),[t,g,o]),r.a.createElement("div",{className:"zsw-singer-album-detail"},r.a.createElement("div",{className:"zsw-singer-album-detail-left"},r.a.createElement("img",{src:"".concat(b?b+"?param=150y150":"https://p2.music.126.net/HvB44MNINoLar8HFbRjIGQ==/109951165142435842.jpg?param=150y150"),alt:""})),r.a.createElement("div",{className:"zsw-singer-album-detail-right"},r.a.createElement("div",{className:"zsw-singer-album-detail-title"},v),r.a.createElement("div",{className:A},C?r.a.createElement("div",{className:"zsw-singer-album-loading"},r.a.createElement(be.a,null),"\u8f7d\u5165\u4e2d"):r.a.createElement(r.a.Fragment,null,P.map((function(e,t){return r.a.createElement(kt,Object.assign({},e,{key:e.id,handleItemClick:function(){return function(e){N(e)}(t)},selected:t===j||a[c]===e.id,isPlayed:a[c]===e.id,playState:l,onDbClick:function(){return function(e,t){if(!t)return z.b.error({content:"\u56e0\u5408\u4f5c\u65b9\u8981\u6c42\uff0c\u8be5\u8d44\u6e90\u6682\u65f6\u4e0b\u67b6>_<"});H.current&&-1!==c||(s(L.current),H.current=!0),d(e),m(e)}(e.id,e.hasCopyRight)}}))})))),E&&r.a.createElement("div",{className:"zsw-singer-album-detail-expand-btn",onClick:function(){return D(!Q)}},Q?"\u53ea\u663e\u793a10\u9996":"\u67e5\u770b\u5168\u90e850\u9996",r.a.createElement(S.a,null))))};wt.defaultProps={needExpand:!0};var Ct=Object(x.b)((function(e){var t=e.player,a=t.current;return{playQueue:t.playQueue,currIndex:a,playState:t.playState}}),(function(e){return{setPlayDetailMap:function(t){e(Ke(t))},pushPlayQueue:function(t){e(Le(t,!0))},fetchPlayUrl:function(t){e(Be(t))},changePlayIndex:function(t){e(Ve(t))}}}))(r.a.memo(wt)),St=r.a.memo((function(e){var t=e.id,a=e.show,c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],m=Object(n.useRef)(!0),d=Object(n.useState)(0),v=Object(i.a)(d,2),E=v[0],g=v[1],b=u()("zsw-singer-album",{show:a}),y=Object(n.useState)(!1),O=Object(i.a)(y,2),j=O[0],N=O[1];return Object(n.useEffect)((function(){a&&N(!0)}),[a]),Object(n.useEffect)((function(){m.current=!0,o([]),g(0)}),[t]),Object(n.useEffect)((function(){var e=!1;function t(a){var r=a.target;m.current||n.removeEventListener("scroll",t),r.scrollTop>=r.scrollHeight-r.offsetHeight&&r.scrollTop>0&&!e&&g((function(e){return e+15}))}var n=document.getElementsByClassName("zsw-singer-detail")[0];return a&&n&&n.addEventListener("scroll",t),function(){e=!0,n&&n.removeEventListener("scroll",t)}}),[a]),Object(n.useEffect)((function(){var e=!1;function a(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({title:n.name,picUrl:n.picUrl,id:n.id})}return t}function n(){return"/artist/album?id=".concat(t,"&offset=").concat(E,"&limit=",15)}function r(){return(r=Object(f.a)(p.a.mark((function t(){var r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get(n());case 2:r=t.sent,c=r.data,e||(m.current=c.more,o((function(e){return e.concat(a(c.hotAlbums))})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t&&m.current&&j&&function(){r.apply(this,arguments)}(),function(){e=!0}}),[t,E,j]),r.a.createElement("div",{className:b},r.a.createElement(Ct,{id:t,title:"\u70ed\u95e850\u9996",top50:!0}),s.map((function(e){return r.a.createElement(Ct,Object.assign({},e,{top50:!1,needExpand:!1,key:e.id+" "+t}))})))})),xt=r.a.memo((function(e){var t=e.show,a=e.id,c=u()("zsw-singer-info",{show:t}),l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1];return Object(n.useEffect)((function(){m([])}),[a]),Object(n.useEffect)((function(){function e(e){var t=[];t.push({title:"\u7b80\u4ecb",content:e.briefDesc});for(var a=e.introduction,n=0;n<a.length;n++){var r=a[n];t.push({title:r.ti,content:r.txt})}return t}function t(){return(t=Object(f.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/artist/desc?id="+a);case 2:n=t.sent,r=n.data,m(e(r));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){t.apply(this,arguments)}()}),[a]),r.a.createElement("div",{className:c},o.map((function(e){return r.a.createElement("div",{className:"zsw-singer-info-item",key:e.title},r.a.createElement("p",{className:"title"},e.title),e.content.split("\n").map((function(e,t){return r.a.createElement("p",{className:"content",key:e+t},e)})))})))})),It=a(546),Ut=r.a.memo((function(e){var t=e.playCount,a=e.name,n=e.duration,c=e.picUrl,l=e.onClick;return r.a.createElement("div",{className:"zsw-singer-mv-item",onClick:l},r.a.createElement("div",null,r.a.createElement("img",{src:"".concat(c+"?param=160y90"),alt:""}),r.a.createElement("span",{className:"play-count"},r.a.createElement(It.a,null),t),r.a.createElement("span",{className:"duration"},n)),r.a.createElement("p",null,a))})),zt=r.a.memo((function(e){var t=e.id,a=e.show,c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],m=u()("zsw-singer-mvs",{show:a}),d=Object(n.useState)(0),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useRef)(!0),O=Object(n.useState)(!1),j=Object(i.a)(O,2),N=j[0],k=j[1],w=Object(n.useContext)(Yt),C=Object(n.useState)(!1),S=Object(i.a)(C,2),x=S[0],I=S[1],U=Object(b.g)();return Object(n.useEffect)((function(){a&&k(!0)}),[a]),Object(n.useEffect)((function(){y.current=!0,o([]),g(0)}),[t]),Object(n.useEffect)((function(){var e=!1;function t(a){var r=a.target;y.current||n.removeEventListener("scroll",t),r.scrollTop>=r.scrollHeight-r.offsetHeight&&r.scrollTop>0&&!e&&g((function(e){return e+30}))}var n=document.getElementsByClassName("home-content")[0];return a&&n.addEventListener("scroll",t),function(){e=!0,n.removeEventListener("scroll",t)}}),[a]),Object(n.useEffect)((function(){function e(){return"/artist/mv?id=".concat(t,"&offset=").concat(E,"&limit=30")}function a(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({name:n.name,duration:re(n.duration),id:n.id,picUrl:n.imgurl16v9,playCount:n.playCount>=1e4?ae(n.playCount):n.playCount})}return t}function n(){return(n=Object(f.a)(p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(!0),t.next=3,h.get(e());case 3:n=t.sent,r=n.data,y.current=r.hasMore,o((function(e){return e.concat(a(r.mvs))})),I(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t&&y.current&&N&&function(){n.apply(this,arguments)}()}),[t,E,N]),r.a.createElement("div",{className:m},s.map((function(e){return r.a.createElement(Ut,Object.assign({},e,{key:e.id,onClick:function(){return function(e){w.setHistoryStack("push","mv"),U.push("/mv/"+e)}(e.id)}}))})),x&&r.a.createElement("div",{className:"zsw-singer-mvs-loading"},r.a.createElement(be.a,null),"\u8f7d\u5165\u4e2d"))})),Pt=r.a.memo((function(e){var t=e.id,a=e.show,c=Object(n.useState)([]),l=Object(i.a)(c,2),s=l[0],o=l[1],m=u()("zsw-simi-singers",{show:a}),d=Object(n.useContext)(Yt),v=Object(b.g)();return Object(n.useEffect)((function(){o([])}),[t]),Object(n.useEffect)((function(){function e(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push({id:n.id,name:n.name,picUrl:n.img1v1Url})}return t}function n(){return(n=Object(f.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.get("/simi/artist?id="+t);case 2:n=a.sent,r=n.data,console.log(e(r.artists)),o(e(r.artists));case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}t&&a&&function(){n.apply(this,arguments)}()}),[t,a]),r.a.createElement("div",{className:m},s.map((function(e){return r.a.createElement("div",{className:"zsw-simi-singer-item",key:e.id,onClick:function(){return function(e){d.setHistoryStack("push","singerDetail"),v.push("/singerDetail/"+e)}(e.id)}},r.a.createElement("div",null,r.a.createElement("img",{src:e.picUrl+"?param=120y120",alt:""})),r.a.createElement("p",null,e.name))})))})),Rt=r.a.memo((function(e){var t=e.match,a=Object(n.useState)(0),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(0),m=Object(i.a)(o,2),d=m[0],v=m[1],E=Object(n.useState)(""),g=Object(i.a)(E,2),b=g[0],y=g[1],O=Object(n.useState)(""),j=Object(i.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)("album"),C=Object(i.a)(w,2),S=C[0],x=C[1],I=u()("zsw-singer-detail");function U(e){x(e)}return Object(n.useEffect)((function(){x("album")}),[t.params.id]),Object(n.useEffect)((function(){var e=!1;function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.get("/artist/songs?id=".concat(t.params.id,"&limit=0"));case 2:n=a.sent,r=n.data,!e&&s(r.total);case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function n(){return(n=Object(f.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.get("/artist/album?id=".concat(t.params.id,"&limit=100"));case 2:n=a.sent,r=n.data,e||(v(r.artist.albumSize),y(r.artist.name),k(r.artist.picUrl));case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return t.params.id&&(function(){a.apply(this,arguments)}(),function(){n.apply(this,arguments)}()),function(){e=!0}}),[t.params.id]),r.a.createElement("div",{className:I},r.a.createElement("div",null,r.a.createElement("div",{className:"zsw-singer-detail-top"},r.a.createElement("div",{className:"zsw-singer-detail-top-img",style:{backgroundImage:"url(".concat(N,"?param=200y200)")}}),r.a.createElement("div",{className:"zsw-singer-detail-info"},r.a.createElement("p",{className:"zsw-singer-detail-info-panel-1"},r.a.createElement("span",{className:"zsw-singer-detail-info-panel-1-tag"},"\u6b4c\u624b"),r.a.createElement("span",{className:"zsw-singer-detail-info-panel-1-name"},b)),r.a.createElement("p",{className:"zsw-singer-detail-info-panel-2"},r.a.createElement("span",{className:"iconfont icon-music_note"},"\u5355\u66f2\u6570:"),r.a.createElement("span",{className:"zsw-singer-detail-info-panel-2-count"},l)),r.a.createElement("p",{className:"zsw-singer-detail-info-panel-3"},r.a.createElement("span",{className:"iconfont icon-changpian1"},"\u4e13\u8f91\u6570:"),r.a.createElement("span",{className:"zsw-singer-detail-info-panel-3-count"},d))),r.a.createElement("div",{className:"zsw-singer-detail-top-btn"},r.a.createElement(at.a,null),"\u6536\u85cf")),r.a.createElement("ul",{className:"playlist-info-nav"},r.a.createElement("li",{onClick:function(){return U("album")},className:"album"===S?"sele":""},"\u4e13\u8f91"),r.a.createElement("li",{onClick:function(){return U("mv")},className:"mv"===S?"sele":""},"MV"),r.a.createElement("li",{onClick:function(){return U("singerInfo")},className:"singerInfo"===S?"sele":""},"\u6b4c\u624b\u8be6\u60c5"),r.a.createElement("li",{onClick:function(){return U("simiSinger")},className:"simiSinger"===S?"sele":""},"\u76f8\u4f3c\u6b4c\u624b")),r.a.createElement("div",{className:"zsw-singer-detail-content"},r.a.createElement(St,{id:t.params.id,show:"album"===S}),r.a.createElement(xt,{id:t.params.id,show:"singerInfo"===S}),r.a.createElement(zt,{id:t.params.id,show:"mv"===S}),r.a.createElement(Pt,{id:t.params.id,show:"simiSinger"===S}))))})),Tt=r.a.memo((function(e){var t=e.match,a=u()("zsw-mv"),c=Object(n.useState)(""),l=Object(i.a)(c,2),s=l[0],o=l[1],m=Object(n.useState)(),d=Object(i.a)(m,2),v=d[0],E=d[1],g=Object(b.g)(),y=Object(n.useContext)(Yt);return Object(n.useEffect)((function(){function e(e){return{name:e.name,artists:e.artists,playCount:e.playCount>1e4?ae(e.playCount)+"\u6b21":e.playCount+"\u6b21",publishTime:ne("YYYY-mm-dd",e.publishTime),id:e.id}}function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.get("/mv/url?id="+t.params.id);case 2:return n=a.sent,r=n.data.data.url,o(r),a.next=7,h.get("/mv/detail?mvid="+t.params.id);case 7:c=a.sent,E(e(c.data.data));case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}t.params.id&&function(){a.apply(this,arguments)}()}),[t.params.id]),r.a.createElement("div",{className:a},r.a.createElement("div",null,r.a.createElement("div",{className:"zsw-mv-top"},r.a.createElement("div",{className:"zsw-mv-top-left"},r.a.createElement("p",null,r.a.createElement(C.a,{onClick:function(){y.setHistoryStack("prev",""),g.go(-1)}}),r.a.createElement("span",{className:"zsw-mv-name"},v?v.name:""),v&&v.artists.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement("span",{className:"zsw-mv-singer-name"},e.name),r.a.createElement("span",null,t===v.artists.length-1?"":"/"))}))),r.a.createElement("video",{src:s,controls:!0})),r.a.createElement("div",{className:"zsw-mv-introduction"},r.a.createElement("div",{className:"title"},"MV\u4ecb\u7ecd"),r.a.createElement("p",null,"\u53d1\u5e03\u65f6\u95f4: ",v?v.publishTime:""),r.a.createElement("p",null,"\u64ad\u653e\u6b21\u6570: ",v?v.playCount:""))),t.params.id&&r.a.createElement(ut,{type:"mv",id:t.params.id})))})),Mt=r.a.memo((function(e){var t=e.handlePageSizeChange,a=e.attrs,c=e.defaultPageSize,l=Object(n.useRef)({defaultCurrent:1,defaultPageSize:c,hideOnSinglePage:!0,size:"small",showSizeChanger:!1,onChange:t});return r.a.createElement("div",{className:"result-of-pagination"},r.a.createElement(ye.a,Object.assign({},l.current,a)))})),Qt=Object(x.b)((function(e){var t=e.player,a=t.current;return{current:t.playQueue[a],playState:t.playState,playQueue:t.playQueue,urlMap:t.playUrlMap}}),(function(e){return{setPlayDetailMap:function(t){e(Ke(t))},pushPlayQueue:function(t){e(Le(t,!1))},fetchPlayUrl:function(t){e(Be(t))},changePlayIndex:function(t){e(Ve(t))},changePlayState:function(t){e(We(t))}}}))(r.a.memo((function(e){var t=e.keywords,a=e.setLoading,c=e.setSearchCount,l=e.current,s=e.playState,o=e.setPlayDetailMap,m=e.pushPlayQueue,d=e.fetchPlayUrl,v=e.changePlayIndex,E=e.changePlayState,g=e.playQueue,y=e.urlMap,O=Object(n.useState)([]),j=Object(i.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)(!1),C=Object(i.a)(w,2),S=C[0],x=C[1],I=u()("result-of-songs",{hidden:!S}),U=Object(n.useState)({current:1}),P=Object(i.a)(U,2),R=P[0],T=P[1],M=Object(n.useRef)(new Map),Q=Object(n.useState)({page:0,limit:100}),D=Object(i.a)(Q,2),A=D[0],H=D[1],L=Object(n.useContext)(Yt),_=Object(b.g)(),J=Object(n.useCallback)((function(e){H((function(t){return{page:e-1,limit:t.limit}}))}),[]);return Object(n.useEffect)((function(){function e(){var e=A.page,a=A.limit,n=e*a;return"/cloudsearch?keywords=".concat(t,"&offset=").concat(n,"&limit=").concat(a)}function n(e){var t=[];if(!(e instanceof Array))return[];for(var a=0;a<e.length;a++){var n=e[a],r=n.al,c=r.name,l=r.picUrl,i=n.ar,s=n.id,o=n.dt,u=n.noCopyrightRcmd,m=n.alia,d=n.pop,p=n.fee,f=se(u,p),v={duration:re(o),singers:ce(i),id:s,index:(a+1).toString().padStart(2,"0"),album:c,picUrl:l,name:e[a].name,hasCopyRight:f,alia:m.join(","),albumId:e[a].al.id};f&&M.current.set(s,v),t.push(Object.assign({},v,{pop:d}))}return t}function r(){return(r=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M.current=new Map,k([]),x(!1),a(!0),h.get(e()).then((function(e){var t=e.data;T({total:t.result.songCount}),c(t.result.songCount),k(n(t.result.songs)),o(M.current),a(!1),x(!0)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t&&function(){r.apply(this,arguments)}()}),[t,A,o,a,c]),r.a.createElement("div",{className:I},r.a.createElement(Fe.a,{size:"small",bordered:!0,dataSource:N,rowKey:function(e){return e.id},pagination:!1,onRow:function(e){return{onDoubleClick:function(){return function(e){return e.hasCopyRight?l===e.id&&!1===s?E(!0):void(l!==e.id&&(-1!==g.indexOf(e.id)?(y.get(e.id)||d(e.id),v(e.id)):(m(e.id),d(e.id),v(e.id)))):z.b.error({content:"\u56e0\u5408\u4f5c\u65b9\u8981\u6c42\uff0c\u8be5\u8d44\u6e90\u6682\u65f6\u4e0b\u67b6>_<"})}(e)}}}},r.a.createElement(Fe.a.Column,{title:"",width:65,dataIndex:"index",render:function(e,t){return r.a.createElement("div",{className:"index"},t.hasCopyRight?t.id===l?r.a.createElement(Re.a,{className:"".concat(s?"play":"")}):r.a.createElement("span",null,e):"\u65e0")}}),r.a.createElement(Fe.a.Column,{title:"\u64cd\u4f5c",width:65,render:function(){return r.a.createElement("div",{className:"steer"},r.a.createElement(bt.a,null),r.a.createElement(nt.a,null))}}),r.a.createElement(Fe.a.Column,{title:"\u97f3\u4e50\u6807\u9898",ellipsis:!0,dataIndex:"name"}),r.a.createElement(Fe.a.Column,{title:"\u6b4c\u624b",ellipsis:!0,dataIndex:"singers",render:function(e){return e.map((function(e){return r.a.createElement("span",{key:e.id,className:"singer-name",onClick:function(){return t=e.id,L.setHistoryStack("push","singerDetail"),void _.push("/singerDetail/"+t);var t}},e.name)}))}}),r.a.createElement(Fe.a.Column,{title:"\u4e13\u8f91",ellipsis:!0,dataIndex:"album",render:function(e,t){return r.a.createElement("span",{onClick:function(){return e=t.albumId,L.setHistoryStack("push","album"),void _.push("/album/"+e);var e},className:"album-name"},t.album)}}),r.a.createElement(Fe.a.Column,{title:"\u65f6\u957f",width:100,dataIndex:"duration"}),r.a.createElement(Fe.a.Column,{title:"\u70ed\u5ea6",width:120,dataIndex:"pop",render:function(e){return r.a.createElement("div",{className:"pop"},r.a.createElement("div",{className:"pop-inner",style:{width:e+"%"}}))}})),r.a.createElement(Mt,{attrs:R,handlePageSizeChange:J,defaultPageSize:100}))}))),Dt=r.a.memo((function(e){var t=e.setLoading,a=e.setSearchCount,c=e.keywords,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)({page:0,limit:20}),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useState)(!1),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)({current:1}),w=Object(i.a)(k,2),C=w[0],S=w[1],x=u()("result-of-singers",{hidden:!j}),I=Object(n.useContext)(Yt),U=Object(b.g)();return Object(n.useEffect)((function(){var e=!1;function n(e){var t=[];if(!(e instanceof Array))return[];for(var a=0;a<e.length;a++){var n=e[a];t.push({id:n.id,name:n.name,picUrl:n.img1v1Url})}return t}function r(){var e=E.page,t=E.limit,a=e*t;return"/cloudsearch?keywords=".concat(c,"&offset=").concat(a,"&limit=").concat(t,"&type=100")}function l(){return(l=Object(f.a)(p.a.mark((function c(){var l,i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return N(!1),m([]),t(!0),c.next=5,h.get(r());case 5:l=c.sent,i=l.data,S({total:i.result.artistCount}),a(i.result.artistCount),!e&&m(n(i.result.artists)),t(!1),N(!0);case 12:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return c&&function(){l.apply(this,arguments)}(),function(){e=!0}}),[c,E,t,a]),r.a.createElement("div",{className:x},o.map((function(e){return r.a.createElement("div",{className:"result-of-singers-item",key:e.id,onClick:function(){return t=e.id,I.setHistoryStack("push","singerDetail"),void U.push("/singerDetail/"+t);var t}},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:e.picUrl+"?param=45y45",alt:""})),r.a.createElement("div",{className:"name"},e.name))})),r.a.createElement(Mt,{attrs:C,handlePageSizeChange:function(e){g((function(t){return{page:e-1,limit:t.limit}}))},defaultPageSize:20}))})),At=r.a.memo((function(e){var t=e.setLoading,a=e.setSearchCount,c=e.keywords,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)(!1),v=Object(i.a)(d,2),E=v[0],g=v[1],y=u()("result-of-albums",{hidden:!E}),O=Object(n.useState)({page:0,limit:15}),j=Object(i.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)({current:1}),C=Object(i.a)(w,2),S=C[0],x=C[1],I=Object(n.useContext)(Yt),U=Object(b.g)();return Object(n.useEffect)((function(){function e(e){var t=[];if(!(e instanceof Array))return[];for(var a=0;a<e.length;a++){var n=e[a];t.push({id:n.id,name:n.name,picUrl:n.picUrl,singerName:n.artist.name,singerId:n.artist.id})}return t}function n(){var e=N.page,t=N.limit,a=e*t;return"/cloudsearch?keywords=".concat(c,"&offset=").concat(a,"&limit=").concat(t,"&type=10")}function r(){return(r=Object(f.a)(p.a.mark((function r(){var c,l;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g(!1),m([]),t(!0),r.next=5,h.get(n());case 5:c=r.sent,l=c.data,m(e(l.result.albums)),a(l.result.albumCount),x({total:l.result.albumCount}),t(!1),g(!0);case 12:case"end":return r.stop()}}),r)})))).apply(this,arguments)}c&&function(){r.apply(this,arguments)}()}),[c,N,t,a]),r.a.createElement("div",{className:y},o.map((function(e){return r.a.createElement("div",{className:"result-of-albums-item",key:e.id,onClick:function(t){return function(e,t){e.target.classList.contains("singer-name")||(I.setHistoryStack("push","album"),U.push("/album/"+t))}(t,e.id)}},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:e.picUrl+"?param=45y45",alt:""})),r.a.createElement("div",{className:"name"},e.name),r.a.createElement("div",{className:"singer-name",onClick:function(){return t=e.singerId,I.setHistoryStack("push","singerDetail"),void U.push("/singerDetail/"+t);var t}},e.singerName))})),r.a.createElement(Mt,{attrs:S,handlePageSizeChange:function(e){k((function(t){return{page:e-1,limit:t.limit}}))},defaultPageSize:15}))})),Ht=r.a.memo((function(e){var t=e.keywords,a=e.setLoading,c=e.setSearchCount,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)({page:0,limit:20}),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useState)(!1),O=Object(i.a)(y,2),j=O[0],N=O[1],k=Object(n.useState)({current:1}),w=Object(i.a)(k,2),C=w[0],S=w[1],x=u()("result-of-mvs",{hidden:!j}),I=Object(n.useContext)(Yt),U=Object(b.g)();return Object(n.useEffect)((function(){var e=!1;function n(e){var t=[];if(!(e instanceof Array))return[];for(var a=0;a<e.length;a++){var n=e[a];t.push({id:n.id,name:n.name,duration:re(n.duration),playCount:ae(n.playCount),singers:ce(n.artists),picUrl:n.cover})}return t}function r(){var e=E.page,a=E.limit,n=e*a;return"/cloudsearch?keywords=".concat(t,"&offset=").concat(n,"&limit=").concat(a,"&type=1004")}function l(){return(l=Object(f.a)(p.a.mark((function t(){var l,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!1),a(!0),m([]),t.next=5,h.get(r());case 5:l=t.sent,i=l.data,!e&&m(n(i.result.mvs)),S({total:i.result.mvCount}),c(i.result.mvCount),a(!1),N(!0);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t&&function(){l.apply(this,arguments)}(),function(){e=!0}}),[t,E,a,c]),r.a.createElement("div",{className:x},r.a.createElement("div",{className:"result-of-mvs-content"},o.map((function(e){return r.a.createElement("div",{className:"result-of-mvs-item",key:e.id,onClick:function(){return t=e.id,I.setHistoryStack("push","mv"),void U.push("/mv/"+t);var t}},r.a.createElement("div",null,r.a.createElement("img",{src:e.picUrl+"?param=199y112",alt:""}),r.a.createElement("span",{className:"duration"},e.duration),r.a.createElement("div",{className:"playCount"},r.a.createElement(W.a,null),e.playCount)),r.a.createElement("p",{className:"name"},e.name),r.a.createElement("p",{className:"singer-name"},e.singers.map((function(e){return r.a.createElement("span",{key:e.id},e.name)}))))}))),r.a.createElement(Mt,{attrs:C,handlePageSizeChange:function(e){g((function(t){return{page:e-1,limit:t.limit}}))},defaultPageSize:20}))})),Lt=r.a.memo((function(e){var t=e.setLoading,a=e.setSearchCount,c=e.keywords,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],m=s[1],d=Object(n.useState)({page:0,limit:20}),v=Object(i.a)(d,2),E=v[0],g=v[1],y=Object(n.useState)(!1),O=Object(i.a)(y,2),j=O[0],N=O[1],k=u()("result-of-playlists",{hidden:!j}),w=Object(n.useState)({current:1}),C=Object(i.a)(w,2),S=C[0],x=C[1],I=Object(n.useContext)(Yt),U=Object(b.g)();return Object(n.useEffect)((function(){var e=!1;function n(e){var t=[];if(!(e instanceof Array))return[];for(var a=0;a<e.length;a++){var n=e[a];t.push({id:n.id,name:n.name,picUrl:n.coverImgUrl,total:n.trackCount+"\u9996",creatorName:"by "+n.creator.nickname})}return t}function r(){var e=E.page,t=E.limit,a=e*t;return"/cloudsearch?keywords=".concat(c,"&offset=").concat(a,"&limit=").concat(t,"&type=1000")}function l(){return(l=Object(f.a)(p.a.mark((function c(){var l,i;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return N(!1),m([]),t(!0),c.next=5,h.get(r());case 5:l=c.sent,i=l.data,!e&&m(n(i.result.playlists)),a(i.result.playlistCount),x({total:i.result.playlistCount}),t(!1),N(!0);case 12:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return c&&function(){l.apply(this,arguments)}(),function(){e=!0}}),[c,E,t,a]),r.a.createElement("div",{className:k},o.map((function(e){return r.a.createElement("div",{className:"result-of-playlists-item",key:e.id,onClick:function(){return t=e.id,I.setHistoryStack("push","playlist"),void U.push("/playlist/"+t);var t}},r.a.createElement("div",{className:"img"},r.a.createElement("img",{src:e.picUrl+"?param=50y50",alt:""})),r.a.createElement("div",{className:"name"},e.name),r.a.createElement("div",{className:"total"},e.total),r.a.createElement("div",{className:"creator-name"},e.creatorName))})),r.a.createElement(Mt,{attrs:S,handlePageSizeChange:function(e){g((function(t){return{page:e-1,limit:t.limit}}))},defaultPageSize:20}))})),_t=["\u5355\u66f2","\u6b4c\u624b","\u4e13\u8f91","MV","\u6b4c\u5355"],Jt=r.a.memo((function(e){var t=e.match,a=Object(n.useState)("\u5355\u66f2"),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(0),m=Object(i.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),E=v[0],g=v[1],h=u()("search-result"),b=Object(n.useCallback)((function(e){p(e)}),[]),y=Object(n.useCallback)((function(e){g(e)}),[]);return r.a.createElement("div",{className:h},r.a.createElement("div",null,r.a.createElement("div",{className:"search-result-header"},'\u641c\u7d22"',r.a.createElement("span",null,t.params.keywords),'",\u627e\u5230',d,"\u9996",l),r.a.createElement("div",{className:"search-result-tabs"},_t.map((function(e){var t=u()("search-result-tabs-item",{selected:e===l});return r.a.createElement("div",{className:t,key:e,onClick:function(){return s(e)}},e)}))),E&&r.a.createElement("div",{className:"search-result-loading"},r.a.createElement(be.a,null),r.a.createElement("span",null,"\u8f7d\u5165\u4e2d")),"\u5355\u66f2"===l&&r.a.createElement(Qt,{keywords:t.params.keywords,setSearchCount:b,setLoading:y}),"\u6b4c\u624b"===l&&r.a.createElement(Dt,{keywords:t.params.keywords,setSearchCount:b,setLoading:y}),"\u4e13\u8f91"===l&&r.a.createElement(At,{keywords:t.params.keywords,setSearchCount:b,setLoading:y}),"MV"===l&&r.a.createElement(Ht,{keywords:t.params.keywords,setSearchCount:b,setLoading:y}),"\u6b4c\u5355"===l&&r.a.createElement(Lt,{keywords:t.params.keywords,setSearchCount:b,setLoading:y})))})),Kt=Object(x.b)((function(e){var t=e.player,a=t.current;return{current:t.playQueue[a],playState:t.playState,willPlaylistId:t.willplaylistId}}),(function(e){return{pushPlayQueue:function(t,a){e(Le(t,!0,a))},fetchPlayUrl:function(t){e(Be(t))},changePlayIndex:function(t){e(Ve(t))}}}))(r.a.memo((function(e){var t=e.loading,a=e.songs,c=e.current,l=e.playState,i=e.pushPlayQueue,s=e.fetchPlayUrl,o=e.changePlayIndex,u=e.willPlaylistId,m=Object(n.useContext)(Yt),d=Object(b.g)();return r.a.createElement("div",{className:"album-songs"},r.a.createElement(Fe.a,{bordered:!0,pagination:!1,rowKey:function(e){return e.index},size:"small",showSorterTooltip:!1,loading:t,dataSource:a,onRow:function(e){return{onDoubleClick:function(){return function(e,t){if(!t)return z.b.error({content:"\u56e0\u5408\u4f5c\u65b9\u8981\u6c42\uff0c\u8be5\u8d44\u6e90\u6682\u65f6\u4e0b\u67b6>_<"});-1===u.indexOf(e)&&i(a.map((function(e){return e.id})),e),s(e),o(e)}(e.id,e.hasCopyRight)}}}},r.a.createElement(Fe.a.Column,{title:"",width:40,align:"right",dataIndex:"index",render:function(e,t){return r.a.createElement("div",{className:"index"},t.hasCopyRight?t.id===c?r.a.createElement(Re.a,{className:"".concat(l?"play":"")}):r.a.createElement("span",null,e):"\u65e0")}}),r.a.createElement(Fe.a.Column,{title:"\u64cd\u4f5c",width:60,render:function(){return r.a.createElement("div",{className:"steer"},r.a.createElement(bt.a,null),r.a.createElement(nt.a,null))}}),r.a.createElement(Fe.a.Column,{title:"\u97f3\u4e50\u6807\u9898",dataIndex:"name",ellipsis:!0}),r.a.createElement(Fe.a.Column,{title:"\u6b4c\u624b",dataIndex:"singers",ellipsis:!0,render:function(e){return e.map((function(e){return r.a.createElement("span",{key:e.id,className:"singer-name",onClick:function(){var t;(t=e.id)&&(m.setHistoryStack("push","singerDetail"),d.push("/singerDetail/"+t))}},e.name)}))}}),r.a.createElement(Fe.a.Column,{title:"\u4e13\u8f91",dataIndex:"album",ellipsis:!0,render:function(e,t){return r.a.createElement("span",{onClick:function(){var e;(e=t.albumId)&&(m.setHistoryStack("push","album"),d.push("/album/"+e))},className:"album-name"},t.album)}}),r.a.createElement(Fe.a.Column,{title:"\u65f6\u957f",width:150,dataIndex:"duration"}),r.a.createElement(Fe.a.Column,{title:"\u70ed\u5ea6",width:120,dataIndex:"pop",render:function(e){return r.a.createElement("div",{className:"pop"},r.a.createElement("div",{className:"pop-inner",style:{width:e+"%"}}))}})))}))),Vt=Object(x.b)(null,(function(e){return{setPlayDetailMap:function(t){e(Ke(t))}}}))(r.a.memo((function(e){var t=e.setPlayDetailMap,a=Object(n.useState)("songs"),c=Object(i.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(),m=Object(i.a)(o,2),d=m[0],v=m[1],E=Object(n.useState)([]),g=Object(i.a)(E,2),y=g[0],O=g[1],j=Object(n.useRef)(new Map),N=Object(n.useState)(!1),k=Object(i.a)(N,2),w=k[0],C=k[1],S=u()("album"),x=e.match,I=Object(n.useContext)(Yt),U=Object(b.g)();function z(e){s(e)}return Object(n.useEffect)((function(){var e=!1;function a(e){return{picUrl:e.picUrl,publishTime:e.publishTime,name:e.name,description:e.description,artistName:e.artist.name,shareCount:e.info.shareCount,id:e.artist.id}}function n(e){for(var t=[],a=0;a<e.length;a++){var n=e[a],r=n.al,c=r.name,l=r.picUrl,i=n.ar,s=n.id,o=n.dt,u=n.noCopyrightRcmd,m=n.alia,d=n.pop,p=n.fee,f=se(u,p),v={duration:re(o),singers:ce(i),id:s,index:(a+1).toString().padStart(2,"0"),album:c,picUrl:l,name:e[a].name,hasCopyRight:f,alia:m.join(","),albumId:e[a].ar.id};f&&j.current.set(s,v),t.push(Object.assign({},v,{pop:d}))}return t}function r(){return(r=Object(f.a)(p.a.mark((function r(){var c,l;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return!e&&O([]),!e&&C(!0),r.next=4,h.get("/album?id="+x.params.id);case 4:c=r.sent,l=c.data,!e&&v(a(l.album)),!e&&O(n(l.songs)),!e&&t(j.current),!e&&C(!1);case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return x.params.id&&"songs"===l&&function(){r.apply(this,arguments)}(),function(){e=!0}}),[x.params.id,l,t]),r.a.createElement("div",{className:S},r.a.createElement("div",null,r.a.createElement("div",{className:"album-top"},r.a.createElement("div",{className:"album-top-left"},r.a.createElement("img",{src:d?d.picUrl+"?param=200y200":"https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg",alt:""})),r.a.createElement("div",{className:"album-top-right"},r.a.createElement("div",{className:"album-panel-1"},r.a.createElement("i",null,"\u4e13\u8f91"),r.a.createElement("span",null,d?d.name:"")),r.a.createElement("div",{className:"album-panel-2"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(oe.a,null),"\u64ad\u653e\u5168\u90e8"),r.a.createElement("li",null,r.a.createElement(at.a,null),"\u6536\u85cf"),r.a.createElement("li",null,r.a.createElement(rt.a,null),"\u5206\u4eab(",d?d.shareCount:"",")"),r.a.createElement("li",null,r.a.createElement(nt.a,null),"\u4e0b\u8f7d\u5168\u90e8"))),r.a.createElement("div",{className:"album-panel-3"},r.a.createElement("p",null,"\u6b4c\u624b:",r.a.createElement("span",{className:"singer-name",onClick:function(){var e;(e=d.id)&&(I.setHistoryStack("push","singerDetail"),U.push("/singerDetail/"+e))}},d?d.artistName:"")),r.a.createElement("p",null,"\u65f6\u95f4:",r.a.createElement("span",null,d?ne("YYYY-mm-dd",d.publishTime):""))))),r.a.createElement("ul",{className:"album-nav"},r.a.createElement("li",{onClick:function(){return z("songs")},className:"songs"===l?"sele":""},"\u6b4c\u66f2\u5217\u8868"),r.a.createElement("li",{onClick:function(){return z("comments")},className:"comments"===l?"sele":""},"\u8bc4\u8bba"),r.a.createElement("li",{onClick:function(){return z("albumInfo")},className:"albumInfo"===l?"sele":""},"\u4e13\u8f91\u8be6\u60c5")),"songs"===l&&r.a.createElement(Kt,{songs:y,loading:w}),"comments"===l&&r.a.createElement(ut,{type:"album",id:x.params.id}),"albumInfo"===l&&r.a.createElement("div",{className:"album-info"},r.a.createElement("div",{className:"title"},"\u4e13\u8f91\u4ecb\u7ecd"),d?d.description.split(/(\n)+/).map((function(e,t){return r.a.createElement("p",{className:"content",key:t},e)})):"")))}))),Wt=a(37),Bt=r.a.memo((function(e){var t=e.userName,a=e.avatarUrl,c=e.match,l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){var e=!1;function t(e){for(var t=[],a=0;a<e.trackIds.length;a++){var n=e.trackIds[a];t.push(n.id)}return t}function a(){return(a=Object(f.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.get("/playlist/detail?id="+c.params.id);case 2:n=a.sent,r=n.data,!e&&u(t(r.playlist));case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return c.params.id&&function(){a.apply(this,arguments)}(),function(){e=!0}}),[c.params.id]),r.a.createElement("div",{className:"mylove"},r.a.createElement("div",null,r.a.createElement("div",{className:"mylove-top clearfix"},r.a.createElement("div",{className:"profile"},a&&r.a.createElement("img",{src:a+"?param=200y200",alt:""})),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"panel-1"},r.a.createElement("span",{className:"tag"},"\u6b4c\u5355"),r.a.createElement("span",{className:"title"},"\u6211\u559c\u6b22\u7684\u97f3\u4e50")),r.a.createElement("div",{className:"panel-2"},r.a.createElement("span",{className:"prefix"},"\u521b\u4f5c\u8005\u540d\u79f0: "),r.a.createElement("span",{className:"name"},t)))),r.a.createElement("div",{className:"mylove-playlist"},r.a.createElement(Ot,{trackIds:o,keywords:"",show:!0}))))})),Yt=Object(P.createContext)({setHistoryStack:function(){}}),Ft=Object(x.b)((function(e){var t=e.header;return{userState:t.userState,userId:t.user.userId,userName:t.user.nickname,avatarUrl:t.user.avatarUrl}}))(r.a.memo((function(e){var t=e.userId,a=e.userName,c=e.avatarUrl,l=Object(n.useState)("recommend"),s=Object(i.a)(l,2),o=s[0],u=s[1],m=Object(n.useState)({name:"recommend"}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)([]),E=Object(i.a)(v,2),g=E[0],y=E[1],O=Object(b.g)(),j={setHistoryStack:function(e,t){switch(e){case"push":var a={name:t,prev:p};p.next=a,f(a);break;case"next":f(p.next);break;case"prev":f(p.prev);break;case"remove":"prev"===t?p.prev&&(p.prev.next=void 0,f(p.prev)):p.next&&(p.next.next=void 0,f(p.next));break;case"clear":p.prev=void 0,p.next=void 0,p.name="recommend",f(p);break;default:return}}};return Object(n.useEffect)((function(){window.addEventListener("offline",(function(){console.log("offline"),z.b.error({content:"\u4eb2, \u8bf7\u8fde\u63a5\u7f51\u7edc !!",duration:0})})),window.addEventListener("online",(function(){console.log("online"),z.b.destroy(),z.b.success({content:"\u5df2\u8fde\u63a5\u5230\u7f51\u7edc !!",duration:1})}))}),[]),Object(n.useEffect)((function(){t?h.get("/user/playlist?uid="+t).then((function(e){for(var t=[],a=e.data.playlist,n=0;n<a.length;n++){var r=a[n];t.push({name:r.name,id:r.id})}y(t)})):(y([]),u("recommend"))}),[t]),r.a.createElement("div",{className:"home"},r.a.createElement(Yt.Provider,{value:j},r.a.createElement(T,{historyStack:p})),r.a.createElement(_,null),r.a.createElement(K.a,{style:{overflow:"hidden"}},r.a.createElement(K.a.Sider,{className:"home-sider"},r.a.createElement(J.a,{selectedKeys:[o],onClick:function(e){var t=e.key,a=t.split(" ");if(2===a.length)return O.push("/".concat(a[0],"/").concat(a[1])),j.setHistoryStack("push",a[0]),void u(t);O.push("/".concat("recommend"===t?"":t)),j.setHistoryStack("push",t),u(t)}},r.a.createElement(J.a.ItemGroup,{title:"\u63a8\u8350"},r.a.createElement(J.a.Item,{title:"\u53d1\u73b0\u97f3\u4e50",icon:r.a.createElement(W.a,null),key:"recommend"},r.a.createElement(Wt.b,{to:"/"},"\u53d1\u73b0\u97f3\u4e50"))),r.a.createElement(J.a.ItemGroup,{title:"\u6211\u7684\u97f3\u4e50(\u9700\u767b\u5f55)"},g.map((function(e){return r.a.createElement(J.a.Item,{title:e.name,icon:r.a.createElement(V.a,null),key:"mylove "+e.id},e.name)})))),r.a.createElement(Yt.Provider,{value:j},r.a.createElement(vt,null))),r.a.createElement(K.a.Content,{className:"home-content"},r.a.createElement(Yt.Provider,{value:j},r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/mylove/:id"},(function(e){return t?r.a.createElement(P.KeepAlive,{name:"mylove"},r.a.createElement(Bt,{match:e.match,avatarUrl:c,userName:a})):r.a.createElement(b.a,{to:"/"})})),r.a.createElement(b.b,{path:"/moreComments/:type/:id"},(function(e){return r.a.createElement(Et,{match:e.match})})),r.a.createElement(b.b,{path:"/singerDetail/:id"},(function(e){return r.a.createElement(P.KeepAlive,{name:"album"},r.a.createElement(Rt,{match:e.match}))})),r.a.createElement(b.b,{path:"/mv/:id"},(function(e){return r.a.createElement(fe.a,{in:e.location.pathname.includes("mv"),timeout:200,mountOnEnter:!0,classNames:{enter:"animate__animated",enterActive:"animate__fadeIn"},unmountOnExit:!0},r.a.createElement(Tt,{match:e.match}))})),r.a.createElement(b.b,{path:"/album/:id"},(function(e){return r.a.createElement(P.KeepAlive,{name:"album"},r.a.createElement(Vt,{match:e.match}))})),r.a.createElement(b.b,{path:"/playlist/:id"},(function(e){return r.a.createElement(P.KeepAlive,{name:"playlist"},r.a.createElement(Nt,{match:e.match}))})),r.a.createElement(b.b,{path:"/searchResult/:keywords"},(function(e){return r.a.createElement(P.KeepAlive,{name:"searchResult"},r.a.createElement(Jt,{match:e.match}))})),r.a.createElement(b.b,{path:"/"},r.a.createElement(xe,null)))))),r.a.createElement(K.a.Footer,{className:"home-footer"},r.a.createElement(Yt.Provider,{value:j},r.a.createElement($e,null))))})));var qt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Ft,null))};a(508),a(509),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zt=a(93),Gt=a(287),Xt={userState:!1,user:{avatarUrl:"",nickname:"",userId:""}};function $t(e){return e.userState=!1,e.user.avatarUrl="",e.user.nickname="",e.user.userId="",e}var ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_user_info":var a=JSON.parse(JSON.stringify(e));return a.user=t.user,a;case"update_user_state":var n=JSON.parse(JSON.stringify(e));return n.userState=t.state,n;case"user_log_out":var r=JSON.parse(JSON.stringify(e));return $t(r);default:return e}},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"change_signIn_show":var a=JSON.parse(JSON.stringify(e));return a.show=t.show,a;default:return e}},aa=Object(Zt.c)({header:ea,signIn:ta,player:Ye}),na=(a(263),("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Zt.d)(Object(Zt.a)(Gt.a))),ra=Object(Zt.e)(aa,na);a(510);l.a.render(r.a.createElement(x.a,{store:ra},r.a.createElement(Wt.a,null,r.a.createElement(P.AliveScope,null,r.a.createElement(qt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[296,1,2]]]);
//# sourceMappingURL=main.94d610e4.chunk.js.map