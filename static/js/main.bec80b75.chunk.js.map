{"version":3,"sources":["hooks/useDebounce.ts","network/index.ts","common/SearchContent/searchKeywords.tsx","common/SearchContent/hotSearchList.tsx","common/SearchContent/index.tsx","common/SearchContent/searchContent.tsx","common/SearchInput/searchInput.tsx","common/SearchInput/index.tsx","common/SignIn/store/reducer.ts","common/SignIn/store/actionCreator.ts","common/Header/index.tsx","common/Header/header.tsx","common/Header/store/actionCreator.ts","common/Header/store/actionType.ts","common/SignIn/signIn.tsx","common/SignIn/index.tsx","common/Swipe/dots.tsx","common/Swipe/swipe.tsx","common/Swipe/swipeItem.tsx","common/Swipe/index.tsx","pages/Recommend/components/title.tsx","utils/parsePlayCount.ts","utils/parseDate.ts","utils/parseTime.ts","utils/mergeSingers.ts","utils/parseLyrics.ts","utils/parseCopyright.ts","common/Lazyload/index.tsx","common/PlayListItem/index.tsx","common/PlayListItem/playListItem.tsx","pages/MainTabs/index.tsx","pages/MainTabs/mainTabs.tsx","pages/Recommend/index.tsx","pages/Recommend/recommend.tsx","pages/TotalPlaylists/categoryItem.tsx","pages/TotalPlaylists/allCategories.tsx","pages/TotalPlaylists/totalPlaylists.tsx","pages/TotalPlaylists/index.tsx","pages/Rank/officialRankItem.tsx","pages/Rank/index.tsx","pages/Rank/rank.tsx","pages/SingerRank/singerRankItem.tsx","pages/SingerRank/singerRank.tsx","pages/SingerRank/index.tsx","pages/SearchMusic/index.tsx","pages/SearchMusic/searchMusic.tsx","common/Player/progress.tsx","common/Player/store/reducer.ts","common/Player/store/actionCreator.ts","common/Player/store/actionType.ts","common/Player/store/index.ts","common/Player/willPlayTable.tsx","common/Player/willPlayList.tsx","common/Player/player.tsx","common/Player/index.tsx","common/Player/mapToProps.ts","common/comments/commentItem.tsx","common/comments/comments.tsx","common/comments/index.tsx","common/SimiPlaylist/simiPlaylistItem.tsx","common/SimiPlaylist/index.tsx","common/SimiPlaylist/simiPlaylist.tsx","common/SongDetail/songDetailContent.tsx","common/SongDetail/index.tsx","common/SongDetail/songDetail.tsx","common/comments/moreComments.tsx","common/PlaylistInfo/components/songsheet.tsx","common/PlaylistInfo/index.tsx","common/PlaylistInfo/playlistInfo.tsx","pages/PlayList/index.tsx","pages/PlayList/PlayList.tsx","pages/SingerDetail/singerAlbumItem.tsx","pages/SingerDetail/singerAlbumDetail.tsx","pages/SingerDetail/singerAlbum.tsx","pages/SingerDetail/singerInfo.tsx","pages/SingerDetail/singerMVItem.tsx","pages/SingerDetail/singerMV.tsx","pages/SingerDetail/simiSingers.tsx","pages/SingerDetail/index.tsx","pages/SingerDetail/singerDetail.tsx","pages/MV/index.tsx","pages/MV/mv.tsx","pages/SearchResult/resultOfPagination.tsx","pages/SearchResult/resultOfSongs.tsx","pages/SearchResult/resultOfSingers.tsx","pages/SearchResult/resultOfAlbums.tsx","pages/SearchResult/resultOfMVs.tsx","pages/SearchResult/resultOfPlaylists.tsx","pages/SearchResult/searchResult.tsx","pages/SearchResult/index.tsx","pages/Album/albumSongs.tsx","pages/Album/index.tsx","pages/Album/album.tsx","pages/Mylove/index.tsx","pages/Mylove/mylove.tsx","pages/Home/home.tsx","pages/Home/index.tsx","App.tsx","serviceWorker.ts","common/Header/store/reducer.ts","common/Header/store/index.ts","common/SignIn/store/index.ts","store/reducer.ts","store/index.ts","index.tsx"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","axios","defaults","baseURL","withCredentials","interceptors","response","use","error","Promise","resolve","React","memo","props","songs","albums","artists","playlists","data","setData","context","useContext","SetHistoryStackContext","history","useHistory","isUnmount","parseAlbums","Array","_arr","i","length","item","push","name","singerName","artist","id","parseArtists","parsePlaylists","a","get","result","fetchData","className","UserOutlined","map","key","onClick","setHistoryStack","SearchInputContext","arr","hots","first","str","changeValue","SearchContent","createContext","SearchInput","placeholder","onChange","style","debounce","suffixIcon","suffix","onSearch","classes","classnames","inputValue","setValue","isFocused","setFocused","ref","useOnclickOutside","passedSearchInputContext","useCallback","handleSearchClick","type","e","target","onFocus","onKeyUp","Provider","defaultProps","displayName","defaultState","show","getChangeSignInShowAction","Header","connect","state","header","user","userState","dispatch","changeSignInShow","flag","action","handleUserLogOut","historyStack","nickname","avatarUrl","visible","setVisible","dropScope","useAliveController","href","preventDefault","prev","goBack","LeftOutlined","next","goForward","RightOutlined","float","marginLeft","keywords","src","alt","title","cancelText","okText","onConfirm","replace","SignIn","Form","useForm","form","handleUserLogin","onBack","padding","Item","rules","required","message","initialValue","prefix","MobileOutlined","allowClear","Password","LockOutlined","validateFields","then","values","phone","password","signIn","params","loading","content","duration","querystring","res","destroy","profile","userId","getSetUserInfoAction","success","onClose","sessionStorage","setItem","catch","Dots","passedContext","currIndex","count","leave","isActive","onMouseEnter","index","hover","onMouseLeave","renderChildren","Swipe","children","useRef","timer","playState","changePlayState","changeIndex","passedContextValue","current","undefined","Children","child","_child","cloneElement","console","unshift","RenderChildren","SwipeItem","posClass","ExportComponent","moreClick","playCount","parseInt","fmt","time","ret","date","Date","opt","getFullYear","toString","getMonth","getDate","getHours","getMinutes","getSeconds","k","RegExp","exec","padStart","totalSeconds","minute","seconds","singers","singer","reg","noCopyRight","fee","log","imgRef","io","IntersectionObserver","entries","forEach","isIntersecting","unobserve","Image","_io","observe","disconnect","PlayListItem","picUrl","copywriter","CustomerServiceOutlined","parsePlayCount","PlayCircleOutlined","MainTabs","mode","selectedKeys","Recommend","banners","setBanners","recPlaylistItems","setRecPlaylistItems","_banners","banner","imageUrl","now","recommend","_data","margin","marginTop","icon","categoryName","currCategory","hot","iconclass","categories","changeCategory","changeShow","extendDropdown","handleClick","category","DownOutlined","toArray","obj","TotalPlaylists","match","setCurrCategory","setCategories","hotCategories","setHotCategories","setLoading","setPlaylists","page","limit","queryParams","setQueryParams","pagination","setPagination","defaultPagination","defaultCurrent","defaultPageSize","hideOnSinglePage","size","showSizeChanger","wrapperRef","wrapper","handleWrapperClick","classList","contains","addEventListener","removeEventListener","parseCategoryArray","arrItem","_categories","_categoriesArr","sub","neededArr","parsedArr","filter","tags","fetchAllCategoriesData","fetchHotCategoriesData","fetchUrl","offset","_playlists","coverImgUrl","total","fetchPlaylistData","LoadingOutlined","playlist","display","tracks","updateTime","handleItemClick","backgroundImage","track","second","parseDate","Rank","officialRankData","setOfficialRankData","globalRankData","setGlobalRankData","parseOfficialRank","parseToplist","coverUrl","parseGlobalRank","list","toplist","artistToplist","officialData","slice","globalData","concat","fetchRankData","lastRank","score","totalScore","width","typeMap","Map","set","SingerRank","currType","setCurrType","singerData","setSingerData","setUpdateTime","hanldeTabItemClick","parseArtist","SearchMusic","returnTransition","el","path","_path","location","CSSTransition","in","pathname","includes","timeout","mountOnEnter","unmountOnExit","classNames","enter","enterActive","exit","exitActive","render","max","onChanging","sliderRef","parseTime","onAfterChange","blur","defaultValue","tipFormatter","playLyricMap","playDetailMap","playUrlMap","playQueue","willPlayQueue","willplaylistId","clone","newState","JSON","parse","stringify","getPushPlayQueueAction","shouldCover","playlistId","getSetPlayUrlMapAction","url","getSetPlayLyricMapAction","lyric","getSetPlayDetailMapAction","items","getChangePlayIndexAction","getChangePlayStateAction","fetchPlayUrl","queryUrl","Reducer","window","audio","pause","splice","indexOf","player","changePlayIndex","pushPlayQueue","ids","DeleteOutlined","dataSource","showHeader","rowKey","record","showSorterTooltip","scroll","y","onRow","onDoubleClick","Column","SoundFilled","dataIndex","playModeArr","playMode","Player","changePlayId","getChangePlayIdAction","isplayed","setPlayed","volumn","setVolumn","setMax","timerRef","refresh","setRefresh","changePlayMode","willShow","setWillShow","handleOrderPlay","handleRandomPlay","handleRepeatPlay","currentTime","number","Math","floor","random","isNext","onChangePlayState","play","setInterval","clearInterval","document","getElementById","StepBackwardFilled","paused","PauseCircleFilled","PlayCircleFilled","StepForwardFilled","step","volume","onChangePlayMode","onCanPlay","onEnded","beReplied","likedCount","reply","beRepliedCommentId","LikeOutlined","parseReplied","_beReplied","element","replied","parseComments","comments","_comments","comment","commentId","Comments","ChangeSignInShow","restCount","setRestCount","popComments","setPopComments","newComments","setNewComments","moreHot","setMoreHot","popCommentsShow","setPopCommentsShow","beforeClickMoreComments","$textarea","top","$homeContent","getElementsByClassName","hotComments","fetchComments","rows","maxLength","_type","mapTypeToNum","commentItem","SimiPlaylist","itemArray","setItemArray","textAlign","indicator","tip","lyricStr","fetchPlayLyric","queryLyric","lrc","withRouter","songDetail","hide","useMemo","hidden","scrollRef","scrollInnerRef","lyrics","setLyrics","currLyricIndex","changeCurrLyricIndex","groups","parseFloat","trim","parseLyrics","scrollTo","dis","currlyric","prevIndex","offsetTop","scrollPrev","nextIndex","scrollNext","HeartFilled","FolderAddOutlined","DownloadOutlined","ShareAltOutlined","ShrinkOutlined","alia","albumId","album","SongDetail","contentShow","setContentShow","ArrowsAltOutlined","setComments","hasMore","setHasMore","isReachBottom","setReachBottom","handleScroll2Bottom","scrollTop","offsetHeight","scrollHeight","SongSheet","trackIds","setPlayDetailMap","willPlaylistId","trackIdsRef","tableData","setTableData","tableDataRef","trackids","parseSong","song","al","ar","dt","noCopyrightRcmd","copyright","parseCopyright","mergeSingers","hasCopyRight","idsStr","join","_tableData","dispatchedMap","parsedSong","Object","assign","fetchSongsInfo","bordered","handleDoubleClick","align","HeartOutlined","ellipsis","sorter","b","clickAndPushAll","PlaylistInfo","setCurrent","setKeywords","itemClick","curr","PlayList","collapse","setCollapse","info","setInfo","detail","setDetail","isAdded","parseSubscriber","subscribers","_subscribers","subscriber","parseInfo","parseDetail","creator","description","subscribedCount","shareCount","createTime","commentCount","trackCount","fetchPlaylistInfo","UpOutlined","warn","tag","FireFilled","marginRight","selected","isPlayed","onDbClick","SingerAlbumDetail","needExpand","top50","selectedIndex","changeSelectedIndex","albumData","setAlbumData","expand","setExpand","onlyPushOnce","parseSongs","_map","hanldeDoubleClick","setAlbums","more","setOffset","firstRequest","setFirstRequest","handleScroll","returnUrl","hotAlbums","desc","setDesc","parseDesc","briefDesc","introduction","ti","txt","split","VideoCameraOutlined","mvs","setMVs","parsemvs","imgurl16v9","simiSingers","setSimiSingers","parseData","img1v1Url","SingerDetail","songsCount","setSongsCount","albumsCount","setAlbumsCount","setSingerName","setPicUrl","albumSize","fetchSingerSongsCount","fetchSingerAlbums","MV","setUrl","parseMVInfo","publishTime","urlData","infoData","go","Fragment","controls","handlePageSizeChange","attrs","urlMap","setSearchCount","setSongs","setShow","pop","parsedItem","songCount","setSingers","artistCount","singerId","albumCount","parseMVs","cover","mvCount","creatorName","playlistCount","typeArr","SearchResult","setCurr","searchCount","setCount","num","changeLoading","Album","artistName","Mylove","userName","_match","setTrackIds","Home","myloves","setMyloves","passedSetHistoryStack","overflow","Sider","keyarr","ItemGroup","to","love","UnderlineOutlined","Content","Footer","App","Boolean","hostname","reset","SignInReducer","combineReducers","HeadeReducer","PlayerReducer","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","reducer","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bec80b75.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useDebounce = (value: any, delay = 400) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [delay, value]);\r\n  return debouncedValue;\r\n};\r\n\r\nexport default useDebounce;\r\n","import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"http://localhost:3001\";\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    return Promise.resolve(false);\r\n  }\r\n);\r\n\r\nexport default axios;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport * as types from \"./type\";\r\nimport { UserOutlined } from \"@ant-design/icons\";\r\nimport axios from \"../../network\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SearchKeywords: React.FC<SearchKeywordsProps> = (props) => {\r\n  const { value } = props;\r\n  const [data, setData] = useState<types.ISearchSuggestions>({\r\n    songs: [],\r\n    albums: [],\r\n    artists: [],\r\n    playlists: []\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleSingerClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"sinerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePlaylistClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function handleAlbumClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseSongs(songs: any[]) {\r\n      if (!(songs instanceof Array)) return [];\r\n      const _arr: types.IISongItem[] = [];\r\n\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const item = songs[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          singerName: (item.artists as any[])\r\n            .map((el) => {\r\n              return el.name;\r\n            })\r\n            .join(\" \"),\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parseAlbums(albums: any[]) {\r\n      if (!(albums instanceof Array)) return [];\r\n      const _arr: types.IIAlbumItem[] = [];\r\n\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          singerName: item.artist.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parseArtists(artists: any[]) {\r\n      if (!(artists instanceof Array)) return [];\r\n      const _arr: types.IIArtistItem[] = [];\r\n\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parsePlaylists(playlists: any[]) {\r\n      if (!(playlists instanceof Array)) return [];\r\n      const _arr: types.IIPlaylistItem[] = [];\r\n\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = playlists[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/search/suggest?keywords=\" + value);\r\n      // !isUnmount &&\r\n      //   setData({\r\n      //     playlists: parsePlaylists(data.result.playlists),\r\n      //     songs: parseSongs(data.result.songs),\r\n      //     albums: parseAlbums(data.result.albums),\r\n      //     artists: parseArtists(data.result.artists)\r\n      //   });\r\n      !isUnmount &&\r\n        setData({\r\n          playlists: parsePlaylists(data.result.playlists),\r\n          songs: [],\r\n          albums: parseAlbums(data.result.albums),\r\n          artists: parseArtists(data.result.artists)\r\n        });\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [value]);\r\n\r\n  return (\r\n    <div className=\"search-keywords\">\r\n      <div className=\"search-keywords-title\">\r\n        <span>{value}</span>\r\n      </div>\r\n      {data.artists.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <UserOutlined />\r\n            \r\n          </div>\r\n          {data.artists.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handleSingerClick(item.id)}\r\n              >\r\n                {item.name}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      {/* {data.songs.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-music_note\" />\r\n            \r\n          </div>\r\n          {data.songs.map((item) => {\r\n            return (\r\n              <div className=\"search-item\" key={item.id}>\r\n                {item.name + \"-\" + item.singerName}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )} */}\r\n      {data.albums.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-changpian1\" />\r\n            \r\n          </div>\r\n          {data.albums.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handleAlbumClick(item.id)}\r\n              >\r\n                {item.name + \"-\" + item.singerName}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      {data.playlists.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-gedan\" />\r\n            \r\n          </div>\r\n          {data.playlists.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handlePlaylistClick(item.id)}\r\n              >\r\n                {item.name}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchKeywords);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { SearchInputContext } from \"../SearchInput\";\r\n\r\nconst HotSearchContent: React.FC<HotSearchContentProps> = () => {\r\n  const [data, setData] = useState<string[]>([]);\r\n  const context = useContext(SearchInputContext);\r\n\r\n  function handleItemClick(str: string) {\r\n    context.changeValue(str);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/search/hot\");\r\n      const arr = data.result.hots as any[];\r\n\r\n      !isUnmount &&\r\n        setData(\r\n          arr.map((item) => {\r\n            return item.first;\r\n          })\r\n        );\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"hot-search-content\">\r\n      <div className=\"hot-search-content-title\"></div>\r\n      {data.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"search-item\"\r\n            key={item}\r\n            onClick={() => handleItemClick(item)}\r\n          >\r\n            {item}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(HotSearchContent);\r\n","import SearchContent from \"./searchContent\";\r\n\r\nexport default SearchContent;\r\n","import React from \"react\";\r\nimport SearchKeywords from \"./searchKeywords\";\r\nimport HotSearchContent from \"./hotSearchList\";\r\n\r\nconst SearchContent: React.FC<SearchContentProps> = (props) => {\r\n  const { value } = props;\r\n\r\n  return (\r\n    <div className=\"zsw-search-content\">\r\n      {value && <SearchKeywords value={value} />}\r\n      {!value && <HotSearchContent />}\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(SearchContent);\r\n","import React, {\r\n  useState,\r\n  ChangeEvent,\r\n  useEffect,\r\n  useCallback,\r\n  createContext\r\n} from \"react\";\r\nimport classnames from \"classnames\";\r\nimport useDebounce from \"../../hooks/useDebounce\";\r\nimport SearchContent from \"../SearchContent\";\r\nimport useOnclickOutside from 'react-cool-onclickoutside'\r\ninterface SearchInputProps {\r\n  style?: React.CSSProperties;\r\n  onChange?: (value: any) => void;\r\n  className?: string;\r\n  placeholder?: string;\r\n  debounce?: boolean;\r\n  value?: string;\r\n  suffix?: boolean;\r\n  suffixIcon?: string;\r\n  onSearch?: (keywords: string) => void;\r\n}\r\n\r\ninterface ISearchInputContext {\r\n  changeValue: (str: string) => void;\r\n}\r\n\r\nexport const SearchInputContext = createContext<ISearchInputContext>({\r\n  changeValue: () => {}\r\n});\r\n\r\nconst SearchInput: React.FC<SearchInputProps> = (props) => {\r\n  const {\r\n    placeholder,\r\n    className,\r\n    onChange,\r\n    style,\r\n    debounce,\r\n    value,\r\n    suffixIcon,\r\n    suffix,\r\n    onSearch\r\n  } = props;\r\n  const classes = classnames(\"zsw-input\", className);\r\n  const [inputValue, setValue] = useState(value);\r\n  const debouncedValue = useDebounce(inputValue);\r\n  const [isFocused, setFocused] = useState(false);\r\n  const ref = useOnclickOutside(() => setFocused(false));\r\n\r\n  const changeValue = useCallback((value: string) => {\r\n    setValue(value);\r\n  }, []);\r\n\r\n  const passedSearchInputContext: ISearchInputContext = {\r\n    changeValue\r\n  };\r\n\r\n  function handleInput(e: ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.value;\r\n    setValue(value);\r\n    if (!debounce && onChange) onChange(value);\r\n  }\r\n\r\n  function handleSearchClick() {\r\n    if (inputValue) {\r\n      onSearch && onSearch(inputValue);\r\n    }\r\n  }\r\n\r\n  function handleFocus() {\r\n    setFocused(true);\r\n  }\r\n\r\n  function handleKeyUp(e: React.KeyboardEvent) {\r\n    if (e.key === \"Enter\") {\r\n      handleSearchClick();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (onChange && debounce) onChange(debouncedValue);\r\n  }, [onChange, debouncedValue, debounce]);\r\n\r\n  return (\r\n    <div className={classes} style={style} ref={ref}>\r\n      <input\r\n        type=\"text\"\r\n        onChange={handleInput}\r\n        placeholder={placeholder}\r\n        value={inputValue || \"\"}\r\n        onFocus={handleFocus}\r\n        onKeyUp={handleKeyUp}\r\n      />\r\n      {suffix && (\r\n        <i\r\n          className={suffixIcon + \" suffix-icon\"}\r\n          onClick={handleSearchClick}\r\n        />\r\n      )}\r\n      <SearchInputContext.Provider value={passedSearchInputContext}>\r\n        {isFocused && <SearchContent value={inputValue ? inputValue : \"\"} />}\r\n      </SearchInputContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearchInput.defaultProps = {\r\n  debounce: true,\r\n  suffixIcon: \"iconfont icon-xianxingtubiaozhizuomoban-20\",\r\n  suffix: true\r\n};\r\n\r\nSearchInput.displayName = \"SearchInput\";\r\n\r\nexport default React.memo(SearchInput);\r\n","import SearchInput from \"./searchInput\";\r\n\r\nexport default SearchInput;\r\n\r\nexport * from \"./searchInput\";\r\n","const defaultState: SignInStoreStateProps = {\r\n  show: false\r\n};\r\n\r\nexport const CHANGE_SIGNIN_SHOW = \"change_signIn_show\";\r\ntype CHANGE_SIGNIN_SHOW_TYPE = typeof CHANGE_SIGNIN_SHOW;\r\n\r\nexport interface ChangeSignInShowType {\r\n  type: CHANGE_SIGNIN_SHOW_TYPE;\r\n  show: boolean;\r\n}\r\n\r\nexport default (state = defaultState, action: ChangeSignInShowType) => {\r\n  switch (action.type) {\r\n    case CHANGE_SIGNIN_SHOW: {\r\n      const newState: SignInStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.show = action.show;\r\n      return newState;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ChangeSignInShowType, CHANGE_SIGNIN_SHOW } from \"./reducer\";\r\n\r\nexport const getChangeSignInShowAction = (\r\n  show: boolean\r\n): ChangeSignInShowType => {\r\n  return {\r\n    type: CHANGE_SIGNIN_SHOW,\r\n    show\r\n  };\r\n};\r\n","import Header from \"./header\";\r\n\r\nexport default Header;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Popconfirm } from \"antd\";\r\nimport SearchInput from \"../SearchInput\";\r\nimport { UserOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { getChangeSignInShowAction } from \"../SignIn/store/actionCreator\";\r\nimport { HistoryStackProps } from \"../../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport { getUserLogOutAction } from \"./store/actionCreator\";\r\nimport { useAliveController } from \"react-activation\";\r\n\r\ninterface HeaderProps extends HeaderStoreStateProps {\r\n  changeSignInShow: (flag: boolean) => void;\r\n  historyStack: HistoryStackProps;\r\n  handleUserLogOut: () => void;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = (props) => {\r\n  const {\r\n    userState,\r\n    user,\r\n    changeSignInShow,\r\n    historyStack,\r\n    handleUserLogOut\r\n  } = props;\r\n  const { nickname, avatarUrl } = user;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const [visible, setVisible] = useState(false);\r\n  const { dropScope } = useAliveController();\r\n\r\n  function enterLogin() {\r\n    if (!userState) {\r\n      return changeSignInShow(true);\r\n    }\r\n    setVisible(!visible);\r\n  }\r\n\r\n  function handlePrevClick() {\r\n    if (!historyStack.prev) return;\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.goBack();\r\n  }\r\n\r\n  function handleNextClick() {\r\n    if (!historyStack.next) return;\r\n    context.setHistoryStack(\"next\", \"\");\r\n    history.goForward();\r\n  }\r\n\r\n  function handleOk() {\r\n    handleUserLogOut();\r\n    history.replace(\"/\");\r\n    context.setHistoryStack(\"clear\", \"\");\r\n    dropScope(/^((?!recommend).)*$/);\r\n  }\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-inner\">\r\n        <a href=\"/\" className=\"logo\" onClick={(e) => e.preventDefault()}>\r\n          <span className=\" iconfont icon-wangyiyunyinyueclick\"></span>\r\n          <span className=\"name\"></span>\r\n        </a>\r\n        <div className=\"navigators\">\r\n          <div\r\n            className={`navigator-prev ${historyStack.prev ? \"able\" : \"\"}`}\r\n            onClick={handlePrevClick}\r\n          >\r\n            <LeftOutlined />\r\n          </div>\r\n          <div\r\n            className={`navigator-next ${historyStack.next ? \"able\" : \"\"}`}\r\n            onClick={handleNextClick}\r\n          >\r\n            <RightOutlined />\r\n          </div>\r\n        </div>\r\n        <SearchInput\r\n          style={{ float: \"left\", marginLeft: \"4rem\" }}\r\n          placeholder=\",,,\"\r\n          onSearch={(keywords: string) => {\r\n            context.setHistoryStack(\"push\", \"searchResult\");\r\n            history.push(`/searchResult/${keywords}`);\r\n          }}\r\n        />\r\n        <div className=\"user\" onClick={enterLogin}>\r\n          <span className=\"user-img\">\r\n            {avatarUrl ? (\r\n              <img src={avatarUrl} alt=\"\" />\r\n            ) : (\r\n              <UserOutlined className=\"user-icon\" />\r\n            )}\r\n          </span>\r\n          {userState ? (\r\n            <span className=\"user-state user-online\">{nickname}</span>\r\n          ) : (\r\n            <span className=\"user-state user-offline\"></span>\r\n          )}\r\n          <Popconfirm\r\n            visible={visible}\r\n            title=\"\"\r\n            cancelText=\"\"\r\n            okText=\"\"\r\n            onConfirm={handleOk}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = function (state: UnionStateTypes) {\r\n  const header = state.header;\r\n  return {\r\n    user: header.user,\r\n    userState: header.userState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = function (dispatch: any) {\r\n  return {\r\n    changeSignInShow(flag: boolean) {\r\n      const action = getChangeSignInShowAction(flag);\r\n      dispatch(action);\r\n    },\r\n    handleUserLogOut() {\r\n      const action = getUserLogOutAction();\r\n      dispatch(action);\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Header));\r\n","import {\r\n  HeaderActionType,\r\n  SET_USER_INFO,\r\n  UPDATE_USER_STATE,\r\n  USER_LOG_OUT\r\n} from \"./actionType\";\r\nimport axios from \"../../../network\";\r\nimport { Dispatch } from \"redux\";\r\nimport { message } from \"antd\";\r\nimport { getChangeSignInShowAction } from \"../../SignIn/store/actionCreator\";\r\n\r\nexport const getSetUserInfoAction = (user: UserProps): HeaderActionType => {\r\n  return {\r\n    type: SET_USER_INFO,\r\n    user\r\n  };\r\n};\r\n\r\nexport const getUpdateUserStateAction = (state: boolean): HeaderActionType => {\r\n  return {\r\n    type: UPDATE_USER_STATE,\r\n    state\r\n  };\r\n};\r\n\r\nexport const getUserLogOutAction = (): HeaderActionType => {\r\n  return {\r\n    type: USER_LOG_OUT\r\n  };\r\n};\r\n\r\nexport const userLogIn = (\r\n  params: LoginRequestConfig\r\n): ((dispatch: Dispatch) => void) => {\r\n  return (dispatch) => {\r\n    message.loading({\r\n      content: \"\",\r\n      duration: 0,\r\n      key: \"loading\"\r\n    });\r\n    const { phone, password } = params;\r\n    const querystring = `/login/cellphone?phone=${phone}&password=${password}`;\r\n    axios\r\n      .get(querystring, {\r\n        withCredentials: true\r\n      })\r\n      .then((res) => {\r\n        message.destroy();\r\n        let { data } = res;\r\n        const user = {} as UserProps;\r\n        const { avatarUrl, nickname, userId } = data.profile;\r\n        user.avatarUrl = avatarUrl;\r\n        user.nickname = nickname;\r\n        user.userId = userId;\r\n        dispatch(getUpdateUserStateAction(true));\r\n        dispatch(getSetUserInfoAction(user));\r\n        message.success({\r\n          content: \"\",\r\n          duration: 1,\r\n          onClose: () => dispatch(getChangeSignInShowAction(false))\r\n        });\r\n        sessionStorage.setItem(\"islogin\", \"true\");\r\n      })\r\n      .catch(() => {\r\n        message.destroy();\r\n        message.error(\"\");\r\n      });\r\n  };\r\n};\r\n","export const SET_USER_INFO = \"set_user_info\";\r\ntype SET_USER_INFO_TYPE = typeof SET_USER_INFO;\r\n\r\nexport const USER_LOG_OUT = \"user_log_out\";\r\ntype USER_LOG_OUT_TYPE = typeof USER_LOG_OUT;\r\n\r\nexport const UPDATE_USER_STATE = \"update_user_state\";\r\ntype UPDATE_USER_STATE_TYPE = typeof UPDATE_USER_STATE;\r\n\r\nexport interface SetUserInfoType {\r\n  type: SET_USER_INFO_TYPE;\r\n  user: UserProps;\r\n}\r\n\r\nexport interface UserLogOutType {\r\n  type: USER_LOG_OUT_TYPE;\r\n}\r\n\r\nexport interface UpdateUserStateType {\r\n  type: UPDATE_USER_STATE_TYPE;\r\n  state: boolean;\r\n}\r\n\r\nexport type HeaderActionType =\r\n  | SetUserInfoType\r\n  | UpdateUserStateType\r\n  | UserLogOutType;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { PageHeader } from \"antd\";\r\nimport { Input, Form } from \"antd\";\r\nimport { LockOutlined, MobileOutlined } from \"@ant-design/icons\";\r\nimport classnames from \"classnames\";\r\nimport { userLogIn } from \"../Header/store/actionCreator\";\r\nimport { getChangeSignInShowAction } from \"./store/actionCreator\";\r\n\r\ninterface SignInProps {\r\n  show: boolean;\r\n  handleUserLogin: (user: LoginRequestConfig) => void;\r\n  changeSignInShow: (flag: boolean) => void;\r\n}\r\n\r\nconst SignIn: React.FC<SignInProps> = (props) => {\r\n  const [form] = Form.useForm();\r\n  const { show, handleUserLogin, changeSignInShow } = props;\r\n  const classes = classnames(\"signin\", {\r\n    show\r\n  });\r\n\r\n  function handleSubmit() {\r\n    form.validateFields().then((values) => {\r\n      const { phone, password } = values;\r\n      handleUserLogin({ phone, password });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"content\">\r\n        <PageHeader\r\n          title=\"\"\r\n          onBack={() => changeSignInShow(false)}\r\n          className=\"nav\"\r\n        />\r\n        <h2 className=\"title\">  </h2>\r\n        <Form form={form} style={{ padding: \"2rem 1rem\" }}>\r\n          <Form.Item\r\n            name=\"phone\"\r\n            rules={[{ required: true, message: \"\" }]}\r\n            initialValue=\"18257712408\"\r\n          >\r\n            <Input prefix={<MobileOutlined />} allowClear />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[{ required: true, message: \"\" }]}\r\n            initialValue=\"a986176132\"\r\n          >\r\n            <Input.Password prefix={<LockOutlined />} allowClear />\r\n          </Form.Item>\r\n          <div className=\"btn\" onClick={handleSubmit}>\r\n             \r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  return {\r\n    show: state.signIn.show\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    handleUserLogin(user: LoginRequestConfig) {\r\n      const action = userLogIn(user);\r\n      dispatch(action);\r\n    },\r\n    changeSignInShow(flag: boolean) {\r\n      const action = getChangeSignInShowAction(flag);\r\n      dispatch(action);\r\n    }\r\n  };\r\n};\r\n\r\nSignIn.displayName = \"SignIn\";\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(SignIn));\r\n","import SignIn from \"./signIn\";\r\n\r\nexport default SignIn;\r\n","import React, { ReactElement, useContext } from \"react\";\r\nimport { passedContext } from \"./swipe\";\r\n\r\ninterface DotsProps {}\r\n\r\nconst Dots: React.FC<DotsProps> = React.memo(() => {\r\n  const context = useContext(passedContext);\r\n  const { currIndex, count } = context;\r\n\r\n  function hover(index: number) {\r\n    context.hover && context.hover(index);\r\n  }\r\n\r\n  function leave() {\r\n    context.leave && context.leave();\r\n  }\r\n\r\n  const renderChildren = () => {\r\n    if (!count) return;\r\n    const arr = [] as ReactElement[];\r\n    for (let i = 0; i < count; i++) {\r\n      let isActive = false;\r\n      if (currIndex === i + 1) {\r\n        isActive = true;\r\n      } else if (currIndex === 0 && i === count - 1) {\r\n        isActive = true;\r\n      } else if (currIndex === count + 1 && i === 0) {\r\n        isActive = true;\r\n      }\r\n\r\n      arr.push(\r\n        <li\r\n          key={i}\r\n          className={`dot ${isActive ? \"active\" : \"\"}`}\r\n          onMouseEnter={() => hover(i + 1)}\r\n          onMouseLeave={leave}\r\n        ></li>\r\n      );\r\n    }\r\n    return arr;\r\n  };\r\n\r\n  return <ul className=\"dots clearfix\">{renderChildren()}</ul>;\r\n});\r\n\r\nDots.displayName = \"Dots\";\r\n\r\nexport default Dots;\r\n","import React, { useRef, useState, createContext, useEffect } from \"react\";\r\nimport { SwipeItemProps } from \"./swipeItem\";\r\nimport Dots from \"./dots\";\r\n\r\nexport interface SwipeProps {\r\n  style?: React.CSSProperties;\r\n  duration?: number;\r\n}\r\n\r\ninterface SwipeContext {\r\n  currIndex?: number;\r\n  count?: number;\r\n  hover?: (index: number) => void;\r\n  leave?: () => void;\r\n}\r\n\r\ntype fcEl = React.FunctionComponentElement<SwipeItemProps>;\r\n\r\nexport const passedContext = createContext<SwipeContext>({});\r\n\r\nconst Swipe: React.FC<SwipeProps> = ({ style, children, duration }) => {\r\n  const count = useRef(0);\r\n  const timer = useRef<any>();\r\n  const [playState, changePlayState] = useState(true);\r\n  const [currIndex, changeIndex] = useState(1);\r\n\r\n  const passedContextValue: SwipeContext = {\r\n    currIndex,\r\n    count: count.current,\r\n    hover: handleHover,\r\n    leave: handleLeave\r\n  };\r\n\r\n  const RenderChildren = () => {\r\n    const length = React.Children.count(children);\r\n    const res = React.Children.map(children, (child, index) => {\r\n      const _child = child as fcEl;\r\n      if (_child.type.displayName === \"SwipeItem\") {\r\n        return React.cloneElement(_child, {\r\n          index: index + 1\r\n        });\r\n      } else {\r\n        console.error(\"Warning: Swipe's children must be SwipeItem\");\r\n      }\r\n    }) as fcEl[];\r\n    if (res.length !== 0 && res[0] && res[length - 1]) {\r\n      res.unshift(\r\n        React.cloneElement(res[length - 1], {\r\n          key: \"copy_last\",\r\n          index: 0\r\n        })\r\n      );\r\n      res.push(\r\n        React.cloneElement(res[1], {\r\n          key: \"copy_first\",\r\n          index: length + 1\r\n        })\r\n      );\r\n    }\r\n    passedContextValue.count = length;\r\n    count.current = length;\r\n    return res;\r\n  };\r\n\r\n  function handleHover(index: number) {\r\n    changePlayState(false);\r\n    clearTimeout(timer.current);\r\n    changeIndex(index);\r\n  }\r\n\r\n  function handleLeave() {\r\n    changePlayState(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function next() {\r\n      if (!count || count.current === undefined) return;\r\n      if (currIndex === count.current) {\r\n        return changeIndex(0);\r\n      }\r\n      timer.current = setTimeout(() => {\r\n        changeIndex(currIndex + 1);\r\n      }, duration);\r\n    }\r\n    if (playState) next();\r\n  }, [currIndex, duration, playState]);\r\n\r\n  return (\r\n    <div className=\"zsw-swipe\" style={style}>\r\n      <passedContext.Provider value={passedContextValue}>\r\n        <div>{RenderChildren()}</div>\r\n        <Dots />\r\n      </passedContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nSwipe.defaultProps = {\r\n  duration: 5000\r\n};\r\n\r\nexport default Swipe;\r\n","import React, { useContext } from \"react\";\r\nimport { passedContext } from \"./swipe\";\r\n\r\ntype position = \"left\" | \"center\" | \"right\" | \"active\";\r\n\r\nexport interface SwipeItemProps {\r\n  index?: number;\r\n  style?: React.CSSProperties;\r\n  pos?: position;\r\n}\r\n\r\nconst SwipeItem: React.FC<SwipeItemProps> = React.memo(\r\n  ({ index, children, style }) => {\r\n    const context = useContext(passedContext);\r\n    const { currIndex, count } = context;\r\n    const resInitPos = (): position => {\r\n      if (currIndex === undefined || count === undefined) return \"center\";\r\n      if (currIndex + 1 === index) {\r\n        return \"right\";\r\n      } else if (\r\n        currIndex - 1 === index ||\r\n        (!currIndex && index === count - 1)\r\n      ) {\r\n        return \"left\";\r\n      } else if (currIndex === index) {\r\n        return \"active\";\r\n      }\r\n      return \"center\";\r\n    };\r\n    const posClass = resInitPos();\r\n\r\n    return (\r\n      <div style={style} className={`swipe-item ${posClass}`}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nSwipeItem.displayName = \"SwipeItem\";\r\n\r\nexport default SwipeItem;\r\n","import Swipe, { SwipeProps } from \"./swipe\";\r\nimport SwipeItem, { SwipeItemProps } from \"./swipeItem\";\r\n\r\ntype ExportType = React.FC<SwipeProps> & {\r\n  Item: React.FC<SwipeItemProps>;\r\n};\r\n\r\nconst ExportComponent = Swipe as ExportType;\r\n\r\nExportComponent.Item = SwipeItem;\r\n\r\nexport default ExportComponent;\r\n","import React from \"react\";\r\n\r\ninterface TitleProps {\r\n  title: string;\r\n  moreClick: () => void;\r\n}\r\n\r\nconst Title: React.FC<TitleProps> = (props) => {\r\n  const { title, moreClick } = props;\r\n\r\n  return (\r\n    <div className=\"recommend-panel-title\">\r\n      <span className=\"fl\">{title}</span>\r\n      <span className=\"fr\" onClick={moreClick}>\r\n        \r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Title);\r\n","export default function (playCount: number) {\r\n  return parseInt(`${playCount / 10000}`) + \"\";\r\n}\r\n","// dateFormat(\"YYYY-mm-dd HH:MM\", date)\r\n// >>> 2019-06-06 19:45`\r\n\r\nexport default function (fmt: string, time: string | number) {\r\n  let ret;\r\n  const date = new Date(time);\r\n  const opt = {\r\n    \"Y+\": date.getFullYear().toString(), // \r\n    \"m+\": (date.getMonth() + 1).toString(), // \r\n    \"d+\": date.getDate().toString(), // \r\n    \"H+\": date.getHours().toString(), // \r\n    \"M+\": date.getMinutes().toString(), // \r\n    \"S+\": date.getSeconds().toString() // \r\n    // \r\n  };\r\n  for (let k in opt) {\r\n    ret = new RegExp(\"(\" + k + \")\").exec(fmt);\r\n    if (ret) {\r\n      //@ts-ignore\r\n      fmt = fmt.replace(\r\n        ret[1],\r\n        //@ts-ignore\r\n        ret[1].length === 1 ? opt[k] : opt[k].padStart(ret[1].length, \"0\")\r\n      );\r\n    }\r\n  }\r\n  return fmt;\r\n}\r\n","export default function (time: number) {\r\n  const totalSeconds = parseInt(\"\" + time / 1000);\r\n  const minute = parseInt(`${totalSeconds / 60}`);\r\n  const seconds = parseInt(`${totalSeconds - minute * 60}`);\r\n  return (\r\n    minute.toString().padStart(2, \"0\") +\r\n    \":\" +\r\n    seconds.toString().padStart(2, \"0\")\r\n  );\r\n}\r\n","export default function (singers: Array<any>) {\r\n  const arr: Array<ISingerInfo> = [];\r\n  for (let i = 0; i < singers.length; i++) {\r\n    const singer = singers[i];\r\n    arr.push({\r\n      name: singer.name,\r\n      id: singer.id\r\n    });\r\n  }\r\n  return arr;\r\n}\r\n","const reg = /^\\[(?<minute>\\d+):(?<second>\\d+\\.\\d+)\\](?<content>.*)?$/gm;\r\n\r\nexport default function (str: string) {\r\n  let res: RegExpExecArray | null;\r\n  let arr: Array<LyricRegItem> = [];\r\n  while ((res = reg.exec(str))) {\r\n    let data: any = res.groups;\r\n    let minute = parseFloat(data.minute);\r\n    let second = parseFloat(data.second) + minute * 60;\r\n    let content = data.content;\r\n    if (content && content.length > 0) {\r\n      content = content.trim();\r\n      arr.push({\r\n        second,\r\n        content\r\n      });\r\n    } else {\r\n      arr.push({\r\n        second,\r\n        content: \"\"\r\n      });\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n","export default (noCopyRight: any, fee: number) => {\r\n  if (noCopyRight) return false;\r\n  switch (fee) {\r\n    case 0:\r\n    case 8:\r\n      return true;\r\n    case 1:\r\n      return false;\r\n    default: {\r\n      console.log(fee);\r\n      return false;\r\n    }\r\n  }\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\ninterface LazyloadProps {\r\n  src: string;\r\n  className?: string;\r\n}\r\n\r\nconst Lazyload: React.FC<LazyloadProps> = (props) => {\r\n  const { src, className } = props;\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const handleIntersection: IntersectionObserverCallback = (entries) => {\r\n    entries.forEach((item) => {\r\n      // entries\r\n      if (item.isIntersecting) {\r\n        // \r\n        const target = item.target as HTMLImageElement;\r\n        target.src = src;\r\n        io.current.unobserve(item.target); //  callback\r\n      }\r\n    });\r\n  };\r\n  const io = useRef(new IntersectionObserver(handleIntersection));\r\n\r\n  useEffect(() => {\r\n    const image = new Image();\r\n    image.src = src;\r\n  }, [src]);\r\n\r\n  useEffect(() => {\r\n    const _io = io.current;\r\n    if (imgRef && imgRef.current && io && io.current) {\r\n      io.current.observe(imgRef.current);\r\n    }\r\n    return () => {\r\n      _io.disconnect();\r\n    };\r\n  }, [imgRef]);\r\n\r\n  return (\r\n    <img\r\n      src=\"data:image/png;base64,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\"\r\n      alt=\"\"\r\n      className={\"lazyload \" + className}\r\n      ref={imgRef}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(Lazyload);\r\n","import PlayListItem from \"./playListItem\";\r\n\r\nexport default PlayListItem;\r\n","import React from \"react\";\r\nimport { parsePlayCount } from \"../../utils\";\r\nimport { CustomerServiceOutlined, PlayCircleOutlined } from \"@ant-design/icons\";\r\nimport Lazyload from \"../Lazyload\";\r\n\r\nconst PlayListItem: React.FC<PlayListItemProps> = (props) => {\r\n  const { playCount, picUrl, onClick, name, copywriter } = props;\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"playlist-item\">\r\n      <Lazyload src={picUrl} className={copywriter ? \"tran\" : \"\"} />\r\n      {playCount && (\r\n        <div className=\"play-count\">\r\n          <CustomerServiceOutlined />\r\n          {parsePlayCount(playCount)}\r\n        </div>\r\n      )}\r\n      {name && <div className=\"description\">{name}</div>}\r\n      <div className=\"play-icon\">\r\n        <PlayCircleOutlined />\r\n      </div>\r\n      {copywriter && <div className=\"copywriter\">{copywriter}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(PlayListItem);\r\n","import MainTabs from \"./mainTabs\";\r\n\r\nexport default MainTabs;\r\n","import React, { useContext } from \"react\";\r\nimport { Menu } from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface MainTabsProps {\r\n  name: string;\r\n}\r\n\r\ntype currentType = \"recommend\" | \"totalPlaylist\" | \"rank\";\r\n\r\nconst MainTabs: React.FC<MainTabsProps> = (props) => {\r\n  const { name } = props;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function handleItemClick(e: any) {\r\n    const key = e.key as currentType;\r\n    history.push(`/${key === \"recommend\" ? \"\" : key}`);\r\n    context.setHistoryStack(\"push\", key);\r\n  }\r\n\r\n  return (\r\n    <div className=\"main-tabs-nav\">\r\n      <Menu mode=\"horizontal\" selectedKeys={[name]} onClick={handleItemClick}>\r\n        <Menu.Item title=\"\" key=\"recommend\">\r\n          \r\n        </Menu.Item>\r\n        <Menu.Item title=\"\" key=\"totalPlaylist\">\r\n          \r\n        </Menu.Item>\r\n        <Menu.Item title=\"\" key=\"rank\">\r\n          \r\n        </Menu.Item>\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(MainTabs);\r\n","import Recommend from \"./recommend\";\r\n\r\nexport default Recommend;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport Swipe from \"../../common/Swipe\";\r\nimport classnames from \"classnames\";\r\nimport Title from \"./components/title\";\r\nimport PlayListItem from \"../../common/PlayListItem\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\n\r\ninterface RecommendProps {\r\n  moreClick: () => void;\r\n  userId: string;\r\n}\r\n\r\ninterface IBanner {\r\n  imageUrl: string;\r\n}\r\n\r\nconst Recommend: React.FC<RecommendProps> = (props) => {\r\n  const { moreClick, userId } = props;\r\n  const [banners, setBanners] = useState<Array<string>>([]);\r\n  const [recPlaylistItems, setRecPlaylistItems] = useState<\r\n    Array<IPlaylistItem>\r\n  >([]);\r\n  const classes = classnames(\"recommend\");\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function handleItemClick(id: string) {\r\n    history.push(`/playlist/${id}`);\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    function fetchBanners() {\r\n      axios.get(\"/banner?type=0\").then(({ data }) => {\r\n        const banners = data.banners as Array<IBanner>;\r\n        const _banners = [];\r\n        for (let i = 0; i < banners.length; i++) {\r\n          const banner = banners[i];\r\n          _banners.push(banner.imageUrl);\r\n        }\r\n        setBanners(_banners);\r\n      });\r\n    }\r\n    function getRecommendPlaylists() {\r\n      axios\r\n        .get(\"/personalized?limit=10&timestamp=\" + Date.now())\r\n        .then(({ data }) => {\r\n          //  console.log(data);\r\n          const recommend = data.result as Array<IPlaylistItem>;\r\n          const _data = [] as Array<IPlaylistItem>;\r\n          for (let i = 0; i < recommend.length; i++) {\r\n            const { id, name, picUrl, playCount, copywriter } = recommend[i];\r\n            _data.push({ id, name, picUrl, playCount, copywriter });\r\n          }\r\n          setRecPlaylistItems(_data);\r\n        });\r\n    }\r\n    fetchBanners();\r\n    getRecommendPlaylists();\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <MainTabs name=\"recommend\" />\r\n        <Swipe style={{ margin: \"0 auto\", marginTop: 30 }}>\r\n          {banners.map((banner) => {\r\n            return (\r\n              <Swipe.Item key={banner}>\r\n                <img src={banner} alt=\"\" />\r\n              </Swipe.Item>\r\n            );\r\n          })}\r\n        </Swipe>\r\n        <div className=\"recommend-playlists\">\r\n          <Title title=\"\" moreClick={moreClick} />\r\n          <div className=\"playlist-item-container\">\r\n            {recPlaylistItems.map((item) => {\r\n              return (\r\n                <PlayListItem\r\n                  {...item}\r\n                  key={item.id}\r\n                  onClick={() => handleItemClick(item.id)}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  return {\r\n    userId: state.header.user.userId\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(Recommend));\r\n","import React from \"react\";\r\n\r\nconst CategoryItem: React.FC<CategoryItemProps> = (props) => {\r\n  const { icon, categoryName, arr, onClick, currCategory } = props;\r\n\r\n  return (\r\n    <div className=\"all-categories-dropdown-content-item\">\r\n      <div className=\"all-categories-dropdown-content-item-left\">\r\n        <div>\r\n          <i className={\"iconfont \" + icon}></i>\r\n          <span>{categoryName}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"all-categories-dropdown-content-item-right\">\r\n        <div>\r\n          {arr.map((item) => {\r\n            return (\r\n              <div\r\n                className={\r\n                  \"all-categories-dropdown-content-item-right-item \" +\r\n                  (currCategory === item.name ? \"selected\" : \"\")\r\n                }\r\n                key={item.name}\r\n                onClick={() => onClick(item.name)}\r\n              >\r\n                {item.name}\r\n                {item.hot && (\r\n                  <span className=\"all-categories-dropdown-content-item-right-item-hot\">\r\n                    HOT\r\n                  </span>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(CategoryItem);\r\n","import React from \"react\";\r\nimport { DownOutlined } from \"@ant-design/icons\";\r\nimport CategoryItem from \"./categoryItem\";\r\n\r\nconst iconclass = [\r\n  \"icon-diqiu\",\r\n  \"icon-fengge\",\r\n  \"icon-kafei\",\r\n  \"icon-xiaolian\",\r\n  \"icon-zhuti_\"\r\n];\r\n\r\nconst AllCategories: React.FC<AllCategoriesProps> = (props) => {\r\n  const { categories, currCategory, changeCategory, show, changeShow } = props;\r\n\r\n  function extendDropdown() {\r\n    changeShow(!show);\r\n  }\r\n\r\n  function handleClick(category: string) {\r\n    extendDropdown();\r\n    changeCategory(category);\r\n  }\r\n\r\n  return (\r\n    <div className=\"all-categories\">\r\n      <div className=\"all-categories-btn\" onClick={extendDropdown}>\r\n        {currCategory}\r\n        <DownOutlined />\r\n      </div>\r\n      <div className={\"all-categories-dropdown \" + (show ? \"show\" : \"\")}>\r\n        <div className=\"all-categories-dropdown-title\"></div>\r\n        <div className=\"all-categories-dropdown-content\">\r\n          <div>\r\n            <div\r\n              className={\r\n                \"all-categories-dropdown-content-top \" +\r\n                (currCategory === \"\" ? \"selected\" : \"\")\r\n              }\r\n              onClick={() => handleClick(\"\")}\r\n            >\r\n              \r\n            </div>\r\n            {categories.map((item, index) => {\r\n              return (\r\n                <CategoryItem\r\n                  {...item}\r\n                  icon={iconclass[index]}\r\n                  key={item.categoryName}\r\n                  onClick={handleClick}\r\n                  currCategory={currCategory}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AllCategories);\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport AllCategories from \"./allCategories\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport PlaylistItem from \"../../common/PlayListItem\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { Pagination } from \"antd\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory, match } from \"react-router-dom\";\r\nimport MainTabs from \"../MainTabs\";\r\n\r\ninterface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nfunction toArray(obj: any) {\r\n  const arr = [];\r\n  for (let index in obj) {\r\n    arr.push(obj[index]);\r\n  }\r\n  return arr;\r\n}\r\n\r\ninterface TotalPlaylistsProps {\r\n  match: match;\r\n}\r\n\r\nconst TotalPlaylists: React.FC<TotalPlaylistsProps> = (props) => {\r\n  const classes = classnames(\"total-playlists\");\r\n  const match = props.match as match<{ type: string }>;\r\n  const type = match && match.params.type ? match.params.type : \"\";\r\n  const [currCategory, setCurrCategory] = useState(type);\r\n  const [categories, setCategories] = useState<CategoryType>([]);\r\n  const [hotCategories, setHotCategories] = useState<Array<IHotCategoryItem>>(\r\n    []\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n  const [playlists, setPlaylists] = useState<Array<IPlaylistItem>>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 50\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: 50,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const [show, changeShow] = useState(false);\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const wrapper = wrapperRef;\r\n    function handleWrapperClick(e: MouseEvent) {\r\n      const target = e.target as HTMLElement;\r\n      if (!target.classList.contains(\"all-categories-btn\")) {\r\n        changeShow(false);\r\n      }\r\n    }\r\n    if (wrapper.current) {\r\n      wrapper.current.addEventListener(\"click\", handleWrapperClick);\r\n    }\r\n\r\n    return () => {\r\n      if (wrapper.current) {\r\n        wrapper.current.removeEventListener(\"click\", handleWrapperClick);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrCategory(type === \"\" ? \"/\" : type);\r\n  }, [type]);\r\n\r\n  useEffect(() => {\r\n    function parseCategoryArray(arr: Array<any>) {\r\n      const _arr = [];\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const arrItem = arr[i];\r\n        const item: ICategoryItem = {\r\n          name: arrItem.name,\r\n          category: arrItem.category,\r\n          hot: arrItem.hot\r\n        };\r\n        _arr.push(item);\r\n      }\r\n      return _arr;\r\n    }\r\n\r\n    async function fetchAllCategoriesData() {\r\n      const { data } = await axios.get(\"/playlist/catlist\");\r\n      const _categories = data.categories;\r\n      const _categoriesArr = toArray(_categories);\r\n      const sub = data.sub as Array<any>;\r\n      const neededArr = [];\r\n      console.log(_categoriesArr);\r\n      for (let i = 0; i < _categoriesArr.length; i++) {\r\n        const arr = sub.filter((item) => item.category === i);\r\n        const parsedArr = parseCategoryArray(arr);\r\n        const item = {\r\n          categoryName: _categoriesArr[i],\r\n          arr: parsedArr\r\n        };\r\n        neededArr.push(item);\r\n      }\r\n      setCategories(neededArr);\r\n    }\r\n\r\n    async function fetchHotCategoriesData() {\r\n      const { data } = await axios.get(\"/playlist/hot\");\r\n      const tags = data.tags as Array<any>;\r\n      const arr = [];\r\n      for (let i = 0; i < tags.length; i++) {\r\n        arr.push({\r\n          name: tags[i].name,\r\n          id: tags[i].id\r\n        });\r\n      }\r\n      setHotCategories(arr);\r\n    }\r\n\r\n    fetchAllCategoriesData();\r\n    fetchHotCategoriesData();\r\n    return () => {\r\n      console.log(\"unmount\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      if (currCategory === \"\") {\r\n        return `/top/playlist?limit=${limit}&offset=${offset}`;\r\n      }\r\n      return `/top/playlist?cat=${currCategory}&limit=${limit}&offset=${offset}`;\r\n    }\r\n\r\n    async function fetchPlaylistData() {\r\n      setLoading(true);\r\n      if (playlists.length === 0) {\r\n        await new Promise((resolve) => {\r\n          setTimeout(resolve, 500);\r\n        });\r\n      }\r\n      const { data } = await axios.get(fetchUrl());\r\n      const _playlists = data.playlists as Array<any>;\r\n      const arr: Array<IPlaylistItem> = [];\r\n      for (let i = 0; i < _playlists.length; i++) {\r\n        const item = _playlists[i];\r\n        arr.push({\r\n          name: item.name,\r\n          id: item.id,\r\n          playCount: item.playCount,\r\n          picUrl: item.coverImgUrl\r\n        });\r\n      }\r\n      setPagination({\r\n        total: 500\r\n      });\r\n      setPlaylists(arr);\r\n      setLoading(false);\r\n    }\r\n\r\n    fetchPlaylistData();\r\n    // eslint-disable-next-line\r\n  }, [currCategory, queryParams]);\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes} ref={wrapperRef}>\r\n      <div className=\"total-playlists-inner\">\r\n        <MainTabs name=\"totalPlaylist\" />\r\n        <AllCategories\r\n          categories={categories}\r\n          currCategory={currCategory}\r\n          changeCategory={setCurrCategory}\r\n          show={show}\r\n          changeShow={changeShow}\r\n        />\r\n        <div className=\"hot-categories\">\r\n          <span className=\"hot-categories-title\">: </span>\r\n          {hotCategories.map((item) => {\r\n            return (\r\n              <span\r\n                key={item.name}\r\n                className=\"hot-categories-item\"\r\n                onClick={() => setCurrCategory(item.name)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"all-playlists-inner-content\">\r\n          {loading ? (\r\n            <div className=\"all-playlists-inner-content-loading\">\r\n              <LoadingOutlined />\r\n              \r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {playlists.map((playlist) => {\r\n                return (\r\n                  <PlaylistItem\r\n                    {...playlist}\r\n                    onClick={() => handleItemClick(playlist.id)}\r\n                    key={playlist.id}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n          <div className=\"all-playlists-inner-pagination\">\r\n            <Pagination\r\n              {...defaultPagination.current}\r\n              {...pagination}\r\n              style={{ display: loading ? \"none\" : \"block\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(TotalPlaylists);\r\n","import TotalPlaylists from \"./totalPlaylists\";\r\n\r\nexport default TotalPlaylists;\r\n","import React from \"react\";\r\nimport { PlayCircleOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { parseDate } from \"../../utils\";\r\n\r\nconst OfficialRankItem: React.FC<OfficialRankItemProps> = (props) => {\r\n  const { picUrl, tracks, updateTime, onClick } = props;\r\n\r\n  function handleItemClick() {\r\n    onClick && onClick();\r\n  }\r\n\r\n  return (\r\n    <div className=\"official-rank-item\">\r\n      <div\r\n        className=\"official-rank-item-top\"\r\n        style={{\r\n          backgroundImage: `url(${picUrl}?param=300y100)`\r\n        }}\r\n      >\r\n        <div\r\n          className=\"official-rank-item-left-overlay\"\r\n          onClick={handleItemClick}\r\n        >\r\n          <PlayCircleOutlined />\r\n        </div>\r\n      </div>\r\n      <div className=\"official-rank-item-bottom\">\r\n        {tracks.map((track, index) => {\r\n          return (\r\n            <div className=\"official-rank-item-bottom-item\" key={index}>\r\n              <div className=\"official-rank-item-bottom-item-index\">\r\n                {index + 1}\r\n              </div>\r\n              <div className=\"official-rank-item-bottom-item-song-name\">\r\n                {track.first}\r\n              </div>\r\n              <div className=\"official-rank-item-bottom-item-singer-name\">\r\n                {track.second}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"official-rank-item-bottom-btn\">\r\n          <span style={{ float: \"left\" }}>\r\n            {parseDate(\"mmdd\", updateTime)}\r\n          </span>\r\n          <span style={{ float: \"right\" }} onClick={handleItemClick}>\r\n            \r\n            <RightOutlined />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(OfficialRankItem);\r\n","import Rank from \"./rank\";\r\n\r\nexport default Rank;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport OfficialRankItem from \"./officialRankItem\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport PlaylistItem from \"../../common/PlayListItem\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\nconst Rank: React.FC<RankProps> = () => {\r\n  const classes = classnames(\"total-ranks\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [officialRankData, setOfficialRankData] = useState<\r\n    Array<OfficialRankItemProps>\r\n  >([]);\r\n  const [globalRankData, setGlobalRankData] = useState<Array<IPlaylistItem>>(\r\n    []\r\n  );\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    function parseOfficialRank(data: any[]) {\r\n      const arr: OfficialRankItemProps[] = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          picUrl: item.coverImgUrl,\r\n          updateTime: item.updateTime,\r\n          id: item.id,\r\n          tracks: item.tracks\r\n        });\r\n      }\r\n      console.log(arr);\r\n      return arr;\r\n    }\r\n    function parseToplist(obj: any): OfficialRankItemProps {\r\n      return {\r\n        updateTime: Date.now(),\r\n        picUrl: obj.coverUrl,\r\n        tracks: obj.artists,\r\n        id: \"\",\r\n        type: \"singer\"\r\n      };\r\n    }\r\n    function parseGlobalRank(data: any[]) {\r\n      const arr: IPlaylistItem[] = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          picUrl: item.coverImgUrl,\r\n          id: item.id,\r\n          name: item.name,\r\n          playCount: item.playCount\r\n        });\r\n      }\r\n      return arr;\r\n    }\r\n    async function fetchRankData() {\r\n      setLoading(true);\r\n      if (officialRankData.length === 0) {\r\n        await new Promise((resolve) => {\r\n          setTimeout(resolve, 500);\r\n        });\r\n      }\r\n      const { data } = await axios.get(\"/toplist/detail\");\r\n      const list = data.list as Array<any>;\r\n      const toplist = data.artistToplist;\r\n      const officialData = list.slice(0, 4);\r\n      const globalData = list.slice(4);\r\n      setOfficialRankData(\r\n        parseOfficialRank(officialData).concat([parseToplist(toplist)])\r\n      );\r\n      setGlobalRankData(parseGlobalRank(globalData));\r\n      setLoading(false);\r\n    }\r\n    fetchRankData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  function handleItemClick(id: string, type?: string) {\r\n    if (!type) {\r\n      context.setHistoryStack(\"push\", \"playlist\");\r\n      history.push(\"/playlist/\" + id);\r\n      return;\r\n    }\r\n    return history.push(\"/singerRank\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <MainTabs name=\"rank\" />\r\n        {loading ? (\r\n          <div className=\"total-rank-loading\">\r\n            <LoadingOutlined />\r\n            ...\r\n          </div>\r\n        ) : (\r\n          <div className=\"total-ranks-inner\">\r\n            <div className=\"official-rank\">\r\n              <div className=\"total-ranks-title\"></div>\r\n              <div className=\"official-rank-content\">\r\n                {officialRankData.map((item) => {\r\n                  return (\r\n                    <OfficialRankItem\r\n                      {...item}\r\n                      key={item.id}\r\n                      onClick={() => handleItemClick(item.id, item.type)}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            <div className=\"global-rank\">\r\n              <div className=\"total-ranks-title\"></div>\r\n              <div className=\"global-rank-content\">\r\n                {globalRankData.map((data) => {\r\n                  return (\r\n                    <PlaylistItem\r\n                      {...data}\r\n                      key={data.id}\r\n                      onClick={() => handleItemClick(data.id)}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Rank);\r\n","import React from \"react\";\r\nimport Lazyload from \"../../common/Lazyload\";\r\n\r\nconst SingerRankItem: React.FC<SingerRankItemProps> = (props) => {\r\n  const { picUrl, name, lastRank, index, score, totalScore, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"total-singer-rank-item\" onClick={onClick}>\r\n      <div className=\"total-singer-rank-item-index\">\r\n        <div\r\n          className={`total-singer-rank-item-index-curr ${\r\n            index < 3 ? \"three\" : \"\"\r\n          }`}\r\n        >\r\n          {index + 1}\r\n        </div>\r\n        {lastRank === undefined ? (\r\n          <div className=\"total-singer-rank-item-index-dis new\">new</div>\r\n        ) : index - lastRank === 0 ? (\r\n          <div className=\"total-singer-rank-item-index-dis\">-0</div>\r\n        ) : index - lastRank > 0 ? (\r\n          <div className=\"total-singer-rank-item-index-dis positive\">\r\n            <span className=\"iconfont icon-down-jiantou-right\"></span>\r\n            {index - lastRank}\r\n          </div>\r\n        ) : (\r\n          <div className=\"total-singer-rank-item-index-dis negative\">\r\n            <span className=\"iconfont icon-down-jiantou-right\"></span>\r\n            {index - lastRank}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"total-singer-rank-item-img\">\r\n        <Lazyload src={picUrl + \"?param=44y44\"} />\r\n      </div>\r\n      <div className=\"total-singer-rank-item-name\">{name}</div>\r\n      <div className=\"total-singer-rank-item-score\">\r\n        <div\r\n          className=\"total-singer-rank-item-score-inner\"\r\n          style={{ width: (score / totalScore) * 100 + \"%\" }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerRankItem);\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { parseDate } from \"../../utils\";\r\nimport SingerRankItem from \"./singerRankItem\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\ntype currType = \"\" | \"\" | \"\" | \"\";\r\n\r\nconst typeMap: Map<currType, number> = new Map();\r\ntypeMap.set(\"\", 1);\r\ntypeMap.set(\"\", 2);\r\ntypeMap.set(\"\", 3);\r\ntypeMap.set(\"\", 4);\r\n\r\ninterface SingerRankProps extends SingerRank {}\r\n\r\nconst SingerRank: React.FC<SingerRankProps> = () => {\r\n  const classes = classnames(\"total-singer-rank\");\r\n  const [currType, setCurrType] = useState<currType>(\"\");\r\n  const [singerData, setSingerData] = useState<ISingerItemInfo[]>([]);\r\n  const totalScore = useRef(0);\r\n  const [updateTime, setUpdateTime] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function hanldeTabItemClick(name: currType) {\r\n    setCurrType(name);\r\n  }\r\n\r\n  function handleRankItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseArtist(artists: any[]) {\r\n      const arr: ISingerItemInfo[] = [];\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n        if (i === 0) {\r\n          totalScore.current = item.score;\r\n        }\r\n        arr.push({\r\n          name: item.name,\r\n          score: item.score,\r\n          id: item.id,\r\n          picUrl: item.picUrl,\r\n          lastRank: item.lastRank\r\n        });\r\n      }\r\n      return arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(\r\n        `/toplist/artist?type=${typeMap.get(currType)}`\r\n      );\r\n      const list = data.list;\r\n      !isUnmount && setUpdateTime(list.updateTime);\r\n      const artists = list.artists as any[];\r\n      !isUnmount && setSingerData(parseArtist(artists));\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [currType]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"total-singer-rank-title\"></div>\r\n        <div className=\"total-singer-rank-tab\">\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"\")}\r\n          >\r\n            \r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"\")}\r\n          >\r\n            \r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"\")}\r\n          >\r\n            \r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"\")}\r\n          >\r\n            \r\n          </div>\r\n          {updateTime ? (\r\n            <div className=\"total-singer-rank-tab-updateTime\">\r\n              <span>:</span>\r\n              {parseDate(\"mmdd\", updateTime)}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n        <div className=\"total-singer-rank-content\">\r\n          {loading ? (\r\n            <div className=\"total-singer-rank-content-loading\">\r\n              <LoadingOutlined />\r\n              \r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {singerData.map((item, index) => {\r\n                return (\r\n                  <SingerRankItem\r\n                    key={item.id}\r\n                    {...item}\r\n                    index={index}\r\n                    totalScore={totalScore.current}\r\n                    onClick={() => handleRankItemClick(item.id)}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerRank);\r\n","import SingerRank from \"./singerRank\";\r\n\r\nexport default SingerRank;\r\n","import SearchMusic from \"./searchMusic\";\r\n\r\nexport default SearchMusic;\r\n","import React, { useContext } from \"react\";\r\nimport Recommend from \"../Recommend\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport TotalPlaylists from \"../TotalPlaylists\";\r\nimport Rank from \"../Rank\";\r\nimport SingerRank from \"../SingerRank\";\r\nimport classnames from \"classnames\";\r\nimport KeepAlive from \"react-activation\";\r\nimport { Route, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ntype currentType =\r\n  | \"recommend\"\r\n  | \"totalPlaylist\"\r\n  | \"rank\"\r\n  | \"singer\"\r\n  | \"singerRank\";\r\n\r\ninterface SearchMusicProps {}\r\n\r\nconst SearchMusic: React.FC<SearchMusicProps> = () => {\r\n  const history = useHistory();\r\n  const classes = classnames(\"search-music\");\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function moreClick() {\r\n    context.setHistoryStack(\"push\", \"totalPlaylist\");\r\n    history.push(\"/totalPlaylist\");\r\n  }\r\n\r\n  function returnTransition(\r\n    type: currentType,\r\n    el: React.ReactElement,\r\n    path?: string\r\n  ) {\r\n    const _path = path ? path : \"/\" + type;\r\n    return (\r\n      <Route path={_path}>\r\n        {({ location }) => {\r\n          return (\r\n            <CSSTransition\r\n              in={\r\n                location.pathname.includes(type) ||\r\n                (type === \"recommend\" && location.pathname === \"/\")\r\n              }\r\n              timeout={200}\r\n              mountOnEnter={true}\r\n              unmountOnExit\r\n              classNames={{\r\n                enter: \"animate__animated\",\r\n                enterActive: \"animate__fadeIn\",\r\n                exit: \"animate__animated\",\r\n                exitActive: \"animate__fadeOut\"\r\n              }}\r\n            >\r\n              <KeepAlive name={type}>{el}</KeepAlive>\r\n            </CSSTransition>\r\n          );\r\n        }}\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"search-music-content\">\r\n        {returnTransition(\r\n          \"recommend\",\r\n          <Recommend moreClick={moreClick} />,\r\n          \"/\"\r\n        )}\r\n        <Route path=\"/totalPlaylist/:type?\">\r\n          {(render) => {\r\n            return (\r\n              <CSSTransition\r\n                in={render.location.pathname.includes(\"totalPlaylist\")}\r\n                timeout={200}\r\n                mountOnEnter={true}\r\n                unmountOnExit\r\n                classNames={{\r\n                  enter: \"animate__animated\",\r\n                  enterActive: \"animate__fadeIn\",\r\n                  exit: \"animate__animated\",\r\n                  exitActive: \"animate__fadeOut\"\r\n                }}\r\n              >\r\n                <KeepAlive>\r\n                  <TotalPlaylists match={render.match!} />\r\n                </KeepAlive>\r\n              </CSSTransition>\r\n            );\r\n          }}\r\n        </Route>\r\n        {returnTransition(\"rank\", <Rank />)}\r\n        {returnTransition(\"singerRank\", <SingerRank />)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchMusic);\r\n","import React, { useRef } from \"react\";\r\nimport { Slider } from \"antd\";\r\nimport { parseTime } from \"../../utils\";\r\n\r\nexport interface ProgressProps {\r\n  max: number;\r\n  onChange: (value: number) => void;\r\n  value: number;\r\n  onChanging: (value: number) => void;\r\n  className: string;\r\n}\r\n\r\nconst Progress: React.FC<ProgressProps> = (props) => {\r\n  const { max, onChange, value, onChanging, className } = props;\r\n  const sliderRef = useRef<any>();\r\n\r\n  function handleAfterChange(value: number) {\r\n    if (sliderRef && sliderRef.current) {\r\n      sliderRef.current.blur();\r\n    }\r\n    onChange(value);\r\n  }\r\n\r\n  function tipFormatter(value: number | undefined) {\r\n    return parseTime(value ? value * 1000 : 0).toString();\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      <span className=\"current-time\">{parseTime(value * 1000)}</span>\r\n      <Slider\r\n        max={max}\r\n        onAfterChange={handleAfterChange}\r\n        value={value}\r\n        defaultValue={0}\r\n        onChange={onChanging}\r\n        ref={sliderRef}\r\n        tipFormatter={tipFormatter}\r\n      />\r\n      <span className=\"duration\">{parseTime(max * 1000)}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Progress);\r\n","import { PlayerActionType, CHNAGE_PLAY_STATE } from \"./actionType\";\r\nimport {\r\n  SET_PLAY_URL_MAP,\r\n  PUSH_PLAY_QUEUE,\r\n  SET_PLAY_LYRIC_MAP,\r\n  SET_PLAY_DETAIL_MAP,\r\n  CHANGE_PLAY_INDEX,\r\n  CHANGE_PLAY_ID\r\n} from \"./actionType\";\r\n\r\nconst defaultState: PlayerStoreStateProps = {\r\n  playLyricMap: new Map<string, string>(),\r\n  playDetailMap: new Map<string, PlayDetailItem>(),\r\n  playUrlMap: new Map<string, string>(),\r\n  playQueue: [],\r\n  current: -1,\r\n  playState: false,\r\n  willPlayQueue: [],\r\n  willplaylistId: []\r\n};\r\n\r\nfunction clone(state: PlayerStoreStateProps) {\r\n  let playDetailMap = new Map(state.playDetailMap);\r\n  let playUrlMap = new Map(state.playUrlMap);\r\n  let playLyricMap = new Map(state.playLyricMap);\r\n  const newState = JSON.parse(JSON.stringify(state)) as PlayerStoreStateProps;\r\n  newState.playLyricMap = playLyricMap;\r\n  newState.playUrlMap = playUrlMap;\r\n  newState.playDetailMap = playDetailMap;\r\n  return newState;\r\n}\r\n\r\nexport default (state = defaultState, action: PlayerActionType) => {\r\n  switch (action.type) {\r\n    case PUSH_PLAY_QUEUE: {\r\n      const { id, shouldCover, playlistId } = action;\r\n      const newState = clone(state);\r\n      if (shouldCover) {\r\n        newState.playQueue = [];\r\n        newState.willPlayQueue = [];\r\n        if (playlistId) {\r\n          newState.willplaylistId = [playlistId];\r\n        }\r\n        newState.willplaylistId = [];\r\n      }\r\n      if (id instanceof Array) {\r\n        if (id.length === 0) {\r\n          window.audio.pause();\r\n          window.audio.src = \"\";\r\n          newState.current = -1;\r\n          newState.playState = false;\r\n        }\r\n        newState.playQueue.push(...id);\r\n        for (let i = 0; i < id.length; i++) {\r\n          const item = newState.playDetailMap.get(id[i]);\r\n          if (item) {\r\n            const { name, singers, duration, id } = item;\r\n            newState.willPlayQueue.push({\r\n              name,\r\n              singers,\r\n              duration,\r\n              id\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        newState.playQueue.splice(newState.current + 1, 0, id);\r\n        const item = newState.playDetailMap.get(id);\r\n        if (item) {\r\n          const { name, singers, duration, id } = item;\r\n          newState.willPlayQueue.splice(newState.current + 1, 0, {\r\n            name,\r\n            singers,\r\n            duration,\r\n            id\r\n          });\r\n        }\r\n      }\r\n      // console.log(newState);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_URL_MAP: {\r\n      const { url, id } = action;\r\n      const newState = clone(state);\r\n      newState.playUrlMap.set(id, url);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_LYRIC_MAP: {\r\n      const { lyric, id } = action;\r\n      const newState = clone(state);\r\n      newState.playLyricMap.set(id, lyric);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_DETAIL_MAP: {\r\n      const { items } = action;\r\n      const newState = clone(state);\r\n      newState.playDetailMap = new Map([...newState.playDetailMap, ...items]);\r\n      return newState;\r\n    }\r\n    case CHANGE_PLAY_INDEX: {\r\n      const { id } = action;\r\n      const newState = clone(state);\r\n      newState.current = newState.playQueue.indexOf(id);\r\n      return newState;\r\n    }\r\n    case CHANGE_PLAY_ID: {\r\n      const { index } = action;\r\n      const newState = clone(state);\r\n      console.log(index);\r\n      newState.current = index;\r\n      return newState;\r\n    }\r\n    case CHNAGE_PLAY_STATE: {\r\n      const { flag } = action;\r\n      const newState = clone(state);\r\n      newState.playState = flag;\r\n      return newState;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  PlayerActionType,\r\n  PUSH_PLAY_QUEUE,\r\n  SET_PLAY_DETAIL_MAP,\r\n  SET_PLAY_LYRIC_MAP,\r\n  SET_PLAY_URL_MAP,\r\n  CHANGE_PLAY_INDEX,\r\n  CHANGE_PLAY_ID,\r\n  CHNAGE_PLAY_STATE\r\n} from \"./actionType\";\r\nimport axios from \"../../../network\";\r\n// import { parseTime, mergeSingerNames } from \"../../../utils\";\r\n\r\nexport const getPushPlayQueueAction = (\r\n  id: string | Array<string>,\r\n  shouldCover = false,\r\n  playlistId = \"\"\r\n): PlayerActionType => {\r\n  return {\r\n    type: PUSH_PLAY_QUEUE,\r\n    id,\r\n    shouldCover,\r\n    playlistId\r\n  };\r\n};\r\n\r\nexport const getSetPlayUrlMapAction = (\r\n  url: string,\r\n  id: string\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_URL_MAP,\r\n    url,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getSetPlayLyricMapAction = (\r\n  lyric: string,\r\n  id: string\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_LYRIC_MAP,\r\n    lyric,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getSetPlayDetailMapAction = (\r\n  items: Map<string, PlayDetailItem>\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_DETAIL_MAP,\r\n    items\r\n  };\r\n};\r\n\r\nexport const getChangePlayIndexAction = (id: string): PlayerActionType => {\r\n  return {\r\n    type: CHANGE_PLAY_INDEX,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getChangePlayStateAction = (flag: boolean): PlayerActionType => {\r\n  return {\r\n    type: CHNAGE_PLAY_STATE,\r\n    flag\r\n  };\r\n};\r\n\r\nexport const getChangePlayIdAction = (index: number): PlayerActionType => {\r\n  return {\r\n    type: CHANGE_PLAY_ID,\r\n    index\r\n  };\r\n};\r\n\r\nexport const fetchPlayUrl = (id: string) => {\r\n  return async (dispatch: any) => {\r\n    const queryUrl = `/song/url?id=${id}`;\r\n    try {\r\n      let { data } = await axios.get(queryUrl);\r\n      const _data = data.data as Array<any>;\r\n      _data.length !== 0 && dispatch(getSetPlayUrlMapAction(_data[0].url, id));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchPlayLyric = (id: string) => {\r\n  return async (dispatch: any) => {\r\n    const queryLyric = `/lyric?id=${id}`;\r\n    try {\r\n      let { data } = await axios.get(queryLyric);\r\n      dispatch(getSetPlayLyricMapAction(data.lrc.lyric, id));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n","export const PUSH_PLAY_QUEUE = \"push_play_queue\";\r\ntype PUSH_PLAY_QUEUE_TYPE = typeof PUSH_PLAY_QUEUE;\r\n\r\nexport const SET_PLAY_URL_MAP = \"set_play_url_map\";\r\ntype SET_PLAY_URL_MAP_TYPE = typeof SET_PLAY_URL_MAP;\r\n\r\nexport const SET_PLAY_LYRIC_MAP = \"set_play_lyric_map\";\r\ntype SET_PLAY_LYRIC_MAP_TYPE = typeof SET_PLAY_LYRIC_MAP;\r\n\r\nexport const SET_PLAY_DETAIL_MAP = \"set_play_detail_map\";\r\ntype SET_PLAY_DETAIL_MAP_TYPE = typeof SET_PLAY_DETAIL_MAP;\r\n\r\nexport const CHANGE_PLAY_INDEX = \"change_play_index\";\r\ntype CHANGE_PLAY_INDEX_TYPE = typeof CHANGE_PLAY_INDEX;\r\n\r\nexport const CHANGE_PLAY_ID = \"change_play_id\";\r\ntype CHANGE_PLAY_ID_TYPE = typeof CHANGE_PLAY_ID;\r\n\r\nexport const CHNAGE_PLAY_STATE = \"change_play_state\";\r\ntype CHNAGE_PLAY_STATE_TYPE = typeof CHNAGE_PLAY_STATE;\r\n\r\nexport interface PushPlayQueueType {\r\n  type: PUSH_PLAY_QUEUE_TYPE;\r\n  id: string | Array<string>;\r\n  shouldCover: boolean;\r\n  playlistId: string;\r\n}\r\n\r\nexport interface SetPlayUrlMapType {\r\n  type: SET_PLAY_URL_MAP_TYPE;\r\n  url: string;\r\n  id: string;\r\n}\r\n\r\nexport interface SetPlayLyricMapType {\r\n  type: SET_PLAY_LYRIC_MAP_TYPE;\r\n  lyric: string;\r\n  id: string;\r\n}\r\n\r\nexport interface SetPlayDetailMapType {\r\n  type: SET_PLAY_DETAIL_MAP_TYPE;\r\n  items: Map<string, PlayDetailItem>;\r\n}\r\n\r\nexport interface ChangePlayIndexType {\r\n  type: CHANGE_PLAY_INDEX_TYPE;\r\n  id: string;\r\n}\r\n\r\nexport interface ChangePlayStateType {\r\n  type: CHNAGE_PLAY_STATE_TYPE;\r\n  flag: boolean;\r\n}\r\n\r\nexport interface ChangePlayIdType {\r\n  type: CHANGE_PLAY_ID_TYPE;\r\n  index: number;\r\n}\r\n\r\nexport type PlayerActionType =\r\n  | PushPlayQueueType\r\n  | SetPlayUrlMapType\r\n  | SetPlayLyricMapType\r\n  | SetPlayDetailMapType\r\n  | ChangePlayIndexType\r\n  | ChangePlayIdType\r\n  | ChangePlayStateType;\r\n","import Reducer from \"./reducer\";\r\n\r\nexport default Reducer;\r\nexport * from \"./actionCreator\";\r\n","import React, { useContext } from \"react\";\r\nimport { Table } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport {\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction,\r\n  getPushPlayQueueAction\r\n} from \"./store\";\r\nimport { SoundFilled, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nconst WillPLayTable: React.FC<WillPlayTableProps> = (props) => {\r\n  const {\r\n    willPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    current,\r\n    playState,\r\n    pushPlayQueue\r\n  } = props;\r\n\r\n  function hanldeDoubleClick(id: string) {\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  function clearAll() {\r\n    pushPlayQueue([]);\r\n  }\r\n\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"will-play-list-tips\">\r\n        <div className=\"will-play-list-total\">{willPlayQueue.length}</div>\r\n        <div className=\"will-play-list-clear-all\" onClick={clearAll}>\r\n          <DeleteOutlined />\r\n          \r\n        </div>\r\n      </div>\r\n      <Table\r\n        dataSource={willPlayQueue}\r\n        className=\"will-play-list-content\"\r\n        showHeader={false}\r\n        rowKey={(record) => record.id}\r\n        pagination={false}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        scroll={{ y: 485 }}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () => hanldeDoubleClick(record.id)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          width={50}\r\n          className=\"will-play-list-play-state\"\r\n          render={(value: any, record: WillPlayItem, index) => {\r\n            return current === record.id ? (\r\n              <SoundFilled\r\n                className={`will-play-list-${playState ? \"play\" : \"pause\"}`}\r\n              />\r\n            ) : (\r\n              <span></span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"name\"\r\n          width={300}\r\n          className=\"will-play-list-name\"\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"singers\"\r\n          className=\"will-play-list-singername\"\r\n          render={(value: ISingerInfo[]) =>\r\n            value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                onClick={() => toSingerDetail(item.id)}\r\n                className=\"singer-name\"\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ))\r\n          }\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"duration\"\r\n          className=\"will-play-list-duration\"\r\n        />\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (\r\n  state: UnionStateTypes\r\n): {\r\n  willPlayQueue: Array<WillPlayItem>;\r\n  current: string;\r\n  playState: boolean;\r\n} => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    willPlayQueue: player.willPlayQueue,\r\n    current: player.playQueue[current],\r\n    playState: player.playState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, true));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(WillPLayTable));\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport WillPlayTable from \"./willPlayTable\";\r\n\r\nconst WillPlayList: React.FC<WillPlayListProps> = (props) => {\r\n  const { show } = props;\r\n  const classes = classnames(\"will-play-list\", {\r\n    show\r\n  });\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"will-play-list-title\">\r\n        <div className=\"will-play-list-title-center\">\r\n          <div className=\"will-play-list-title-playlist sele\"></div>\r\n          <div className=\"will-play-list-title-history\"></div>\r\n        </div>\r\n      </div>\r\n      <WillPlayTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(WillPlayList);\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  PlayCircleFilled,\r\n  StepBackwardFilled,\r\n  StepForwardFilled,\r\n  PauseCircleFilled,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport Progress from \"./progress\";\r\nimport { connect } from \"react-redux\";\r\nimport { Slider, Tooltip } from \"antd\";\r\nimport { mapDispatchToProps, mapStateToProps } from \"./mapToProps\";\r\nimport WillPlayList from \"./willPlayList\";\r\nimport useOnclickOutside from \"react-cool-onclickoutside\";\r\n\r\nconst playModeArr: Array<IPlayMode> = [\r\n  {\r\n    playMode: \"order\",\r\n    title: \"\",\r\n    icon: \"icon-shouye-bofangmoshi-shunxubofang\",\r\n    index: 0\r\n  },\r\n  {\r\n    playMode: \"random\",\r\n    title: \"\",\r\n    icon: \"icon-shouye-bofangmoshi-suijibofang\",\r\n    index: 1\r\n  },\r\n  {\r\n    playMode: \"repeat\",\r\n    title: \"\",\r\n    icon: \"icon-shouye-bofangmoshi-danquxunhuan\",\r\n    index: 2\r\n  }\r\n];\r\n\r\nconst Player: React.FC<PlayerProps> = (props) => {\r\n  const {\r\n    src,\r\n    currIndex,\r\n    playQueue,\r\n    changePlayId,\r\n    playUrlMap,\r\n    fetchPlayUrl,\r\n    changePlayState\r\n  } = props;\r\n  const [isplayed, setPlayed] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [volumn, setVolumn] = useState(1);\r\n  const [max, setMax] = useState(0);\r\n  const timerRef = useRef<any>();\r\n  const [refresh, setRefresh] = useState(false);\r\n  const [playMode, changePlayMode] = useState(0);\r\n  // \r\n  const [willShow, setWillShow] = useState(false);\r\n  const ref = useOnclickOutside(() => setWillShow(false));\r\n\r\n  function prev() {\r\n    if (playQueue.length === 0) {\r\n      return;\r\n    }\r\n    switch (playMode) {\r\n      case 0:\r\n        return handleOrderPlay(false);\r\n      case 1:\r\n        return handleRandomPlay();\r\n      case 2:\r\n        return handleRepeatPlay();\r\n    }\r\n  }\r\n\r\n  function next() {\r\n    if (playQueue.length === 0) {\r\n      return;\r\n    }\r\n    switch (playMode) {\r\n      case 0:\r\n        return handleOrderPlay();\r\n      case 1:\r\n        return handleRandomPlay();\r\n      case 2:\r\n        return handleRepeatPlay();\r\n    }\r\n  }\r\n\r\n  function handleRepeatPlay() {\r\n    window.audio.currentTime = 0;\r\n  }\r\n\r\n  function handleRandomPlay() {\r\n    const number = Math.floor(Math.random() * playQueue.length);\r\n    if (!playUrlMap.get(playQueue[number])) {\r\n      fetchPlayUrl(playQueue[number]);\r\n    }\r\n    changePlayId(number);\r\n  }\r\n\r\n  function handleOrderPlay(isNext = true) {\r\n    if (isNext) {\r\n      let index = currIndex + 1;\r\n      if (index >= playQueue.length) {\r\n        index = 0;\r\n      }\r\n      if (!playUrlMap.get(playQueue[index])) {\r\n        fetchPlayUrl(playQueue[index]);\r\n      }\r\n      console.log(index);\r\n      changePlayId(index);\r\n    } else {\r\n      let index = currIndex - 1;\r\n      if (index < 0) {\r\n        index = playQueue.length - 1;\r\n      }\r\n      if (!playUrlMap.get(playQueue[index])) {\r\n        fetchPlayUrl(playQueue[index]);\r\n      }\r\n      changePlayId(index);\r\n    }\r\n  }\r\n\r\n  function onChangePlayMode(index: number) {\r\n    if (index + 1 > 2) {\r\n      return changePlayMode(0);\r\n    }\r\n    changePlayMode(index + 1);\r\n  }\r\n\r\n  function onProgressChange(value: number) {\r\n    window.audio.currentTime = value;\r\n    setRefresh(!refresh);\r\n    setPlayed(true);\r\n  }\r\n\r\n  function onChanging(value: number) {\r\n    setValue(value);\r\n    clearInterval(timerRef.current);\r\n  }\r\n\r\n  function onVolumnChanging(value: number) {\r\n    window.audio.volume = value;\r\n    setVolumn(value);\r\n  }\r\n\r\n  function handleCanPlay() {\r\n    window.audio.play();\r\n    setMax(window.audio.duration);\r\n    setPlayed(true);\r\n    changePlayState(true);\r\n  }\r\n\r\n  function changeWillListShow(flag: boolean) {\r\n    setWillShow(flag);\r\n  }\r\n\r\n  function onPlayEnd() {\r\n    next();\r\n  }\r\n\r\n  useEffect(() => {\r\n    function handlePlaying() {\r\n      setValue(window.audio.currentTime);\r\n    }\r\n\r\n    timerRef.current = setInterval(() => {\r\n      handlePlaying();\r\n      if (!isplayed) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      clearInterval(timerRef.current);\r\n    };\r\n  }, [isplayed, refresh]);\r\n\r\n  function onChangePlayState(flag: number) {\r\n    if (!window.audio.src) return;\r\n    if (flag) {\r\n      window.audio.play();\r\n      setPlayed(true);\r\n      changePlayState(true);\r\n    } else {\r\n      window.audio.pause();\r\n      setPlayed(false);\r\n      changePlayState(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.audio = document.getElementById(\"play-audio\") as HTMLAudioElement;\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"zsw-player\" ref={ref}>\r\n      <ul className=\"btn\">\r\n        <li>\r\n          <StepBackwardFilled onClick={prev} />\r\n        </li>\r\n        <li>\r\n          {window.audio && !window.audio.paused ? (\r\n            <PauseCircleFilled onClick={() => onChangePlayState(0)} />\r\n          ) : (\r\n            <PlayCircleFilled onClick={() => onChangePlayState(1)} />\r\n          )}\r\n        </li>\r\n        <li>\r\n          <StepForwardFilled onClick={next} />\r\n        </li>\r\n      </ul>\r\n      <Progress\r\n        onChange={onProgressChange}\r\n        max={max}\r\n        value={value}\r\n        onChanging={onChanging}\r\n        className=\"player-progress\"\r\n      />\r\n      <div className=\"volumn\">\r\n        <SoundFilled />\r\n        <Slider\r\n          max={1}\r\n          step={0.1}\r\n          className=\"volumn-slider\"\r\n          defaultValue={0}\r\n          value={volumn}\r\n          onChange={onVolumnChanging}\r\n        />\r\n      </div>\r\n      <div className=\"play-mode\">\r\n        <Tooltip title={playModeArr[playMode].title}>\r\n          <span\r\n            className={`iconfont ${playModeArr[playMode].icon}`}\r\n            onClick={() => onChangePlayMode(playModeArr[playMode].index)}\r\n          ></span>\r\n        </Tooltip>\r\n      </div>\r\n      <div className=\"will-play\">\r\n        <span\r\n          className=\"iconfont icon-bofangliebiao\"\r\n          title=\"\"\r\n          onClick={() => changeWillListShow(!willShow)}\r\n        ></span>\r\n      </div>\r\n      <audio\r\n        src={src}\r\n        id=\"play-audio\"\r\n        onCanPlay={handleCanPlay}\r\n        onEnded={onPlayEnd}\r\n      />\r\n      <WillPlayList show={willShow} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Player));\r\n","import Player from \"./player\";\r\n\r\nexport * from \"./player\";\r\nexport default Player;\r\n","import {\r\n  getChangePlayIdAction,\r\n  fetchPlayUrl,\r\n  getChangePlayStateAction\r\n} from \"./store\";\r\nimport { UnionStateTypes } from \"../../store\";\r\n\r\nexport const mapStateToProps = (\r\n  state: UnionStateTypes\r\n): {\r\n  src: string | undefined;\r\n  currIndex: number;\r\n  playQueue: Array<string>;\r\n  playUrlMap: Map<string, string>;\r\n} => {\r\n  const player = state.player;\r\n  const currIndex = player.current;\r\n  const playQueue = player.playQueue;\r\n  const current = playQueue[currIndex];\r\n\r\n  return {\r\n    src: player.playUrlMap.get(current),\r\n    currIndex: currIndex,\r\n    playQueue,\r\n    playUrlMap: player.playUrlMap\r\n  };\r\n};\r\n\r\nexport const mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    changePlayId(index: number) {\r\n      console.log(index);\r\n      dispatch(getChangePlayIdAction(index));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayState(flag: boolean) {\r\n      dispatch(getChangePlayStateAction(flag));\r\n    }\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { parseDate } from \"../../utils\";\r\nimport { LikeOutlined } from \"@ant-design/icons\";\r\n\r\nexport interface IBeReplied {\r\n  nickname: string;\r\n  userId: string;\r\n  content: string;\r\n  beRepliedCommentId: string;\r\n}\r\n\r\nexport interface CommentItemProps {\r\n  userId: string;\r\n  nickname: string;\r\n  avatarUrl: string;\r\n  content: string;\r\n  time: string;\r\n  commentId: string;\r\n  beReplied?: Array<IBeReplied>;\r\n  likedCount: number;\r\n}\r\n\r\nconst CommentItem: React.FC<CommentItemProps> = (props) => {\r\n  const { nickname, avatarUrl, content, time, beReplied, likedCount } = props;\r\n\r\n  return (\r\n    <div className=\"comment-item\">\r\n      <div className=\"img\">\r\n        <img src={avatarUrl} alt=\"\" className=\"avatar\" width={36} />\r\n      </div>\r\n      <div className=\"info\">\r\n        <p className=\"content\">\r\n          <span className=\"avatar-name\">{nickname}:</span> {content}\r\n        </p>\r\n        {beReplied &&\r\n          beReplied.length !== 0 &&\r\n          beReplied.map((reply) => {\r\n            return (\r\n              <div className=\"reply\" key={reply.beRepliedCommentId}>\r\n                <span className=\"avatar-name\">{reply.nickname}</span>\r\n                {reply.content}\r\n              </div>\r\n            );\r\n          })}\r\n        <p className=\"time\">{parseDate(\"YYYYmd HH:MM\", time)}</p>\r\n      </div>\r\n      <div className=\"interaction\">\r\n        <span>\r\n          <LikeOutlined />({likedCount})\r\n        </span>\r\n        <span className=\"split\">|</span>\r\n        <span></span>\r\n        <span className=\"split\">|</span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(CommentItem);\r\n","import React, {\r\n  useState,\r\n  ChangeEvent,\r\n  useEffect,\r\n  useRef,\r\n  useContext\r\n} from \"react\";\r\nimport CommentItem, { CommentItemProps, IBeReplied } from \"./commentItem\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { Pagination, message } from \"antd\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { getChangeSignInShowAction } from \"../SignIn/store/actionCreator\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nexport function parseReplied(beReplied: Array<any>): Array<IBeReplied> | [] {\r\n  if (beReplied.length === 0) return [];\r\n\r\n  const _beReplied = [];\r\n\r\n  for (let i = 0; i < beReplied.length; i++) {\r\n    const element = beReplied[i];\r\n    const replied: IBeReplied = {\r\n      content: element.content,\r\n      userId: element.user.userId,\r\n      nickname: element.user.nickname,\r\n      beRepliedCommentId: element.beRepliedCommentId\r\n    };\r\n    _beReplied.push(replied);\r\n  }\r\n\r\n  return _beReplied;\r\n}\r\n\r\nexport function parseComments(\r\n  comments: Array<any>\r\n): Array<CommentItemProps> | [] {\r\n  if (comments.length === 0) return [];\r\n  const _comments = [];\r\n  for (let i = 0; i < comments.length; i++) {\r\n    const element = comments[i];\r\n    const comment: CommentItemProps = {\r\n      userId: element.user.userId,\r\n      nickname: element.user.nickname,\r\n      avatarUrl: element.user.avatarUrl,\r\n      content: element.content,\r\n      time: element.time,\r\n      likedCount: element.likedCount,\r\n      commentId: element.commentId,\r\n      beReplied: parseReplied(element.beReplied)\r\n    };\r\n    _comments.push(comment);\r\n  }\r\n  return _comments;\r\n}\r\n\r\ninterface CommentsProps {\r\n  id: string;\r\n  type: commentType;\r\n  userState: boolean;\r\n  ChangeSignInShow: () => void;\r\n  beforeClickMoreComments?: () => void;\r\n}\r\n\r\nconst Comments: React.FC<CommentsProps> = (props) => {\r\n  const [restCount, setRestCount] = useState(280);\r\n  const [popComments, setPopComments] = useState<Array<CommentItemProps>>([]);\r\n  const [newComments, setNewComments] = useState<Array<CommentItemProps>>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  // \r\n  const [moreHot, setMoreHot] = useState(false);\r\n  const [popCommentsShow, setPopCommentsShow] = useState(false);\r\n  const {\r\n    userState,\r\n    ChangeSignInShow,\r\n    id,\r\n    type,\r\n    beforeClickMoreComments\r\n  } = props;\r\n\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const $textarea = useRef<HTMLTextAreaElement>(null);\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: 50,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n  const $homeContent = useRef<HTMLDivElement>();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 50\r\n  });\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    if (page >= 2) {\r\n      setPopCommentsShow(false);\r\n    } else if (page === 1) {\r\n      setPopCommentsShow(true);\r\n    }\r\n    scrollY(200);\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  function handleMoreClick() {\r\n    beforeClickMoreComments && beforeClickMoreComments();\r\n    context.setHistoryStack(\"push\", \"moreComments\");\r\n    history.push(`/moreComments/${type}/${id}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    $homeContent.current = document.getElementsByClassName(\r\n      \"home-content\"\r\n    )[0] as HTMLDivElement;\r\n  }, []);\r\n\r\n  function scrollY(top: number) {\r\n    if ($homeContent && $homeContent.current) {\r\n      $homeContent.current.scroll({ top });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function fetchUrl(id: string, type: commentType) {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      switch (type) {\r\n        case \"playlist\":\r\n          return `comment/playlist?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"music\":\r\n          return `comment/music?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"mv\":\r\n          return `comment/mv?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"album\":\r\n          return `comment/album?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n      }\r\n    }\r\n\r\n    async function fetchComments() {\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(fetchUrl(id, type));\r\n      if (queryParams.page === 0) {\r\n        !isUnmount && setMoreHot(data.moreHot);\r\n        !isUnmount && setPopComments(parseComments(data.hotComments));\r\n        !isUnmount && setPopCommentsShow(true);\r\n      }\r\n      !isUnmount && setNewComments(parseComments(data.comments));\r\n      !isUnmount &&\r\n        setPagination({\r\n          total: data.total\r\n        });\r\n      !isUnmount && setLoading(false);\r\n    }\r\n\r\n    fetchComments();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, type, queryParams]);\r\n\r\n  function onChange(e: ChangeEvent<HTMLTextAreaElement>) {\r\n    setRestCount(280 - e.target.value.length);\r\n  }\r\n\r\n  function mapTypeToNum(type: commentType) {\r\n    switch (type) {\r\n      case \"music\":\r\n        return 0;\r\n      case \"mv\":\r\n        return 1;\r\n      case \"playlist\":\r\n        return 2;\r\n    }\r\n  }\r\n\r\n  function sendComment() {\r\n    if (!userState) {\r\n      return ChangeSignInShow();\r\n    }\r\n    if ($textarea && $textarea.current) {\r\n      const _type = mapTypeToNum(type);\r\n      axios\r\n        .get(\r\n          `/comment?t=1&type=${_type}&id=${id}&content=${$textarea.current.value}`,\r\n          { withCredentials: true }\r\n        )\r\n        .then((res) => {\r\n          const comment = res.data.comment;\r\n          const commentItem: CommentItemProps = {\r\n            commentId: comment.commentId,\r\n            content: comment.content,\r\n            time: comment.time,\r\n            userId: comment.user.userId,\r\n            nickname: comment.user.nickname,\r\n            avatarUrl: comment.user.avatarUrl,\r\n            likedCount: 0\r\n          };\r\n          message.success({\r\n            content: \"\",\r\n            duration: 0.5,\r\n            onClose: () => {\r\n              setNewComments((value) => {\r\n                return [commentItem].concat(value);\r\n              });\r\n              if ($textarea && $textarea.current) {\r\n                $textarea.current.value = \"\";\r\n              }\r\n            }\r\n          });\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"zsw-comments\">\r\n      <div className=\"textarea\">\r\n        <div className=\"textarea-inner\">\r\n          <textarea\r\n            name=\"\"\r\n            id=\"\"\r\n            rows={3}\r\n            maxLength={280}\r\n            onChange={onChange}\r\n            ref={$textarea}\r\n          />\r\n          <div className=\"rest-words-count\">{restCount}</div>\r\n        </div>\r\n        <button className=\"btn-comment\" onClick={sendComment}>\r\n          \r\n        </button>\r\n      </div>\r\n      {popComments.length !== 0 && (\r\n        <div className={`pop-comments ${popCommentsShow ? \"show\" : \"\"}`}>\r\n          <div className=\"zsw-comments-title\"></div>\r\n          {popComments.map((comment) => {\r\n            return <CommentItem {...comment} key={comment.commentId} />;\r\n          })}\r\n          {moreHot && (\r\n            <div className=\"more\">\r\n              <span onClick={handleMoreClick}>\r\n                \r\n                <RightOutlined />\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div className=\"new-comments\">\r\n        <div className=\"zsw-comments-title\">({pagination.total})</div>\r\n        {loading && (\r\n          <div className=\"loading\">\r\n            <LoadingOutlined />\r\n            <span className=\"text\">...</span>\r\n          </div>\r\n        )}\r\n        {newComments.map((comment) => {\r\n          return <CommentItem {...comment} key={comment.commentId} />;\r\n        })}\r\n        <div className=\"comments-pagination\">\r\n          <Pagination {...defaultPagination.current} {...pagination} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const header = state.header;\r\n  return {\r\n    userState: header.userState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    ChangeSignInShow() {\r\n      dispatch(getChangeSignInShowAction(true));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(Comments));\r\n","import Comments from \"./comments\";\r\n\r\nexport default Comments;\r\nexport * from \"./comments\";\r\nexport * from \"./commentItem\";\r\n","import React from \"react\";\r\nimport { parsePlayCount } from \"../../utils\";\r\n\r\nconst SimiPlaylistItem: React.FC<ISimiPlaylistItem> = (props) => {\r\n  const { picUrl, name, playCount, onClick, id } = props;\r\n\r\n  function handleClick() {\r\n    onClick && onClick(id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"simi-playlist-item\" onClick={handleClick}>\r\n      <div className=\"simi-playlist-item-left\">\r\n        <img src={picUrl} alt=\"\" />\r\n      </div>\r\n      <div className=\"simi-playlist-item-right\">\r\n        <p className=\"simi-playlist-item-right-name\">{name}</p>\r\n        <p className=\"simi-playlist-item-right-playcount\">\r\n          {parsePlayCount(playCount)}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiPlaylistItem);\r\n","import SimiPlaylist from \"./simiPlaylist\";\r\n\r\nexport default SimiPlaylist;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport SimiPlaylistItem from \"./simiPlaylistItem\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { Spin } from \"antd\";\r\n\r\nconst SimiPlaylist: React.FC<SimiPlaylistProps> = (props) => {\r\n  const { id, onClick } = props;\r\n  const [itemArray, setItemArray] = useState<Array<ISimiPlaylistItem>>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function parse(playlist: any): ISimiPlaylistItem {\r\n      return {\r\n        id: playlist.id,\r\n        name: playlist.name,\r\n        picUrl: playlist.coverImgUrl,\r\n        playCount: playlist.playCount\r\n      };\r\n    }\r\n    async function fetchData() {\r\n      setLoading(true);\r\n      const { data } = await axios.get(`simi/playlist?id=${id}`);\r\n      const playlists = data.playlists as Array<any>;\r\n      const arr: Array<ISimiPlaylistItem> = [];\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = parse(playlists[i]);\r\n        arr.push(item);\r\n      }\r\n      setItemArray(arr);\r\n      setLoading(false);\r\n    }\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className=\"simi-playlist\">\r\n      {loading ? (\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Spin indicator={<LoadingOutlined />} tip={\"\"} />\r\n        </div>\r\n      ) : (\r\n        itemArray.map((item) => {\r\n          return <SimiPlaylistItem {...item} key={item.id} onClick={onClick} />;\r\n        })\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiPlaylist);\r\n","import React, { useRef, useEffect, useState, useContext, useMemo } from \"react\";\r\nimport {\r\n  HeartFilled,\r\n  FolderAddOutlined,\r\n  DownloadOutlined,\r\n  ShareAltOutlined,\r\n  ShrinkOutlined\r\n} from \"@ant-design/icons\";\r\nimport { parseLyrics } from \"../../utils\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { fetchPlayLyric } from \"../Player/store\";\r\nimport Comments from \"../comments\";\r\nimport SimiPlaylist from \"../SimiPlaylist\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport classnames from \"classnames\";\r\nimport { useHistory, withRouter, RouteComponentProps } from \"react-router-dom\";\r\n\r\nexport interface SongDetailContentProps extends SongDetailContent {\r\n  hide: (flag: boolean) => void;\r\n}\r\n\r\nconst SongDetailContent: React.FC<\r\n  SongDetailContentProps & RouteComponentProps\r\n> = (props) => {\r\n  const { show, fetchPlayLyric, songDetail, lyricStr, playState, hide } = props;\r\n  const classes = useMemo(() => {\r\n    return classnames(\"zsw-song-detail-content\", {\r\n      hidden: !show\r\n    });\r\n  }, [show]);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const scrollInnerRef = useRef<HTMLDivElement>(null);\r\n  const [lyrics, setLyrics] = useState<Array<LyricRegItem>>([]);\r\n  const timerRef = useRef<any>();\r\n  const [currLyricIndex, changeCurrLyricIndex] = useState(0);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!lyricStr) {\r\n      fetchPlayLyric(songDetail.id);\r\n    }\r\n  }, [fetchPlayLyric, songDetail.id, lyricStr]);\r\n\r\n  useEffect(() => {\r\n    changeCurrLyricIndex(0);\r\n    setLyrics([]);\r\n  }, [songDetail.id]);\r\n\r\n  useEffect(() => {\r\n    if (lyricStr) {\r\n      setLyrics(parseLyrics(lyricStr));\r\n    }\r\n  }, [lyricStr]);\r\n\r\n  useEffect(() => {\r\n    function scrollTo(top: number) {\r\n      let dis = top - 240 <= 0 ? 0 : top - 240;\r\n      if (scrollRef && scrollRef.current) {\r\n        scrollRef.current.scrollTo({ top: dis });\r\n      }\r\n    }\r\n    function scrollNext(\r\n      audio: HTMLAudioElement,\r\n      currlyric: Array<LyricRegItem>,\r\n      children: HTMLCollection\r\n    ) {\r\n      for (let i = currLyricIndex; i < currlyric.length; i++) {\r\n        const nextIndex =\r\n          i + 1 >= currlyric.length ? currlyric.length - 1 : i + 1;\r\n        if (\r\n          i === currlyric.length - 1 &&\r\n          audio.currentTime >= currlyric[i].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n        if (\r\n          audio.currentTime >= currlyric[i].second &&\r\n          audio.currentTime < currlyric[nextIndex].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n      }\r\n    }\r\n    function scrollPrev(\r\n      audio: HTMLAudioElement,\r\n      currlyric: Array<LyricRegItem>,\r\n      children: HTMLCollection\r\n    ) {\r\n      for (let i = currLyricIndex; i >= 0; i--) {\r\n        const prevIndex = i - 1 <= 0 ? 0 : i - 1;\r\n        if (\r\n          i === 0 &&\r\n          audio.currentTime <= currlyric[i].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n        if (\r\n          audio.currentTime <= currlyric[i].second &&\r\n          audio.currentTime > currlyric[prevIndex].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[prevIndex] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(prevIndex);\r\n        }\r\n      }\r\n    }\r\n    function scroll() {\r\n      if (\r\n        scrollInnerRef &&\r\n        scrollInnerRef.current &&\r\n        scrollInnerRef.current.children.length !== 0\r\n      ) {\r\n        const children = scrollInnerRef.current.children;\r\n        const currlyric = lyrics;\r\n        const audio = window.audio;\r\n        if (audio.currentTime < currlyric[currLyricIndex].second) {\r\n          scrollPrev(audio, currlyric, children);\r\n        } else {\r\n          scrollNext(audio, currlyric, children);\r\n        }\r\n      }\r\n    }\r\n    if (lyrics.length !== 0) {\r\n      timerRef.current = setInterval(() => {\r\n        if (!playState) {\r\n          return clearInterval(timerRef.current);\r\n        }\r\n        scroll();\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(timerRef.current);\r\n    };\r\n  }, [playState, currLyricIndex, lyrics]);\r\n\r\n  useEffect(() => {\r\n    hide(false);\r\n  }, [props.location.pathname, hide]);\r\n\r\n  function handleSimiPlaylistClick(id: string) {\r\n    hide(false);\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    hide(false);\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    hide(false);\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={show === true}\r\n      timeout={{\r\n        enter: 400\r\n      }}\r\n      mountOnEnter\r\n      classNames={{\r\n        enter: \"animate__animated enter\",\r\n        enterActive: \"animate__fadeIn\"\r\n      }}\r\n    >\r\n      <div className={classes}>\r\n        <div>\r\n          <div className=\"zsw-song-detail-content-top\">\r\n            <div\r\n              className=\"zsw-song-detail-content-top-overlay\"\r\n              style={{\r\n                backgroundImage: `url(${songDetail.picUrl})`\r\n              }}\r\n            ></div>\r\n            <div className=\"zsw-song-detail-content-top-content\">\r\n              <div className=\"zsw-song-detail-content-top-left\">\r\n                <div\r\n                  className={`zsw-song-detail-content-top-left-round ${\r\n                    playState ? \"spin\" : \"\"\r\n                  }`}\r\n                >\r\n                  <img src={songDetail.picUrl} alt=\"\" />\r\n                </div>\r\n                <ul className=\"zsw-song-detail-content-top-left-tags\">\r\n                  <li>\r\n                    <HeartFilled />\r\n                    \r\n                  </li>\r\n                  <li>\r\n                    <FolderAddOutlined />\r\n                    \r\n                  </li>\r\n                  <li>\r\n                    <DownloadOutlined />\r\n                    \r\n                  </li>\r\n                  <li>\r\n                    <ShareAltOutlined />\r\n                    \r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"zsw-song-detail-content-top-right\">\r\n                <h3>\r\n                  {songDetail.name}\r\n                  <ShrinkOutlined\r\n                    className=\"shrink\"\r\n                    onClick={() => hide(false)}\r\n                  />\r\n                </h3>\r\n                {songDetail.alia && (\r\n                  <p className=\"zsw-song-detail-content-top-right-alia\">\r\n                    {songDetail.alia}\r\n                  </p>\r\n                )}\r\n                <div className=\"zsw-song-detail-content-top-right-detail\">\r\n                  :{\" \"}\r\n                  <span\r\n                    className=\"album-name\"\r\n                    onClick={() => toAlbum(songDetail.albumId)}\r\n                  >\r\n                    {songDetail.album}\r\n                  </span>\r\n                  :\r\n                  {songDetail.singers.map((singer) => (\r\n                    <span\r\n                      className=\"singer-name\"\r\n                      key={singer.id}\r\n                      onClick={() => toSingerDetail(singer.id)}\r\n                    >\r\n                      {singer.name}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                <br />\r\n                <div\r\n                  className=\"zsw-song-detail-content-top-right-scroll\"\r\n                  ref={scrollRef}\r\n                >\r\n                  <div ref={scrollInnerRef}>\r\n                    {lyrics.map((lyric, index) => {\r\n                      return (\r\n                        <p\r\n                          key={`${lyric.second} ${index}`}\r\n                          className={`${\r\n                            index === currLyricIndex ? \"active\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {lyric.content}\r\n                        </p>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"zsw-song-detail-content-bottom\">\r\n            <div className=\"zsw-song-detail-content-bottom-left\">\r\n              <div className=\"zsw-song-detail-content-bottom-title\">\r\n                \r\n              </div>\r\n              {show && (\r\n                <Comments\r\n                  type=\"music\"\r\n                  id={songDetail.id}\r\n                  beforeClickMoreComments={() => hide(false)}\r\n                />\r\n              )}\r\n            </div>\r\n            {show && (\r\n              <div className=\"zsw-song-detail-content-bottom-right\">\r\n                <div className=\"zsw-song-detail-content-bottom-title\">\r\n                  \r\n                </div>\r\n                <SimiPlaylist\r\n                  id={songDetail.id}\r\n                  onClick={handleSimiPlaylistClick}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const id = player.playQueue[player.current];\r\n\r\n  return {\r\n    playState: player.playState,\r\n    lyricStr: player.playLyricMap.get(id)\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    fetchPlayLyric(id: string) {\r\n      dispatch(fetchPlayLyric(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(React.memo(SongDetailContent)));\r\n","import SongDetail from \"./songDetail\";\r\n\r\nexport default SongDetail;\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { ArrowsAltOutlined } from \"@ant-design/icons\";\r\nimport SongDetailContent from \"./songDetailContent\";\r\n\r\nconst SongDetail: React.FC<SongDetailProps> = (props) => {\r\n  const { songDetail, current } = props;\r\n  const [contentShow, setContentShow] = useState(false);\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={current !== -1}\r\n      timeout={200}\r\n      mountOnEnter\r\n      classNames={{\r\n        enter: \"animate__animated\",\r\n        enterActive: \"animate__fadeIn\",\r\n        exit: \"animate__animated\",\r\n        exitActive: \"animate__fadeOut\"\r\n      }}\r\n      unmountOnExit\r\n    >\r\n      <div className=\"zsw-song-detail\">\r\n        <div className=\"zsw-song-detail-left\">\r\n          <img\r\n            src={songDetail?.picUrl}\r\n            alt=\"\"\r\n            className=\"zsw-song-detail-img\"\r\n          />\r\n          <div\r\n            className=\"zsw-song-detail-enlarge\"\r\n            onClick={() => setContentShow(true)}\r\n          >\r\n            <ArrowsAltOutlined />\r\n          </div>\r\n        </div>\r\n        <div className=\"zsw-song-detail-info\">\r\n          <p>{songDetail?.name}</p>\r\n          <p className=\"zsw-song-detail-info-singername\">\r\n            {songDetail?.singers.map((singer) => {\r\n              return <span key={singer.id}>{singer.name}</span>;\r\n            })}\r\n          </p>\r\n        </div>\r\n        {songDetail && (\r\n          <SongDetailContent\r\n            songDetail={songDetail}\r\n            show={contentShow}\r\n            hide={setContentShow}\r\n          />\r\n        )}\r\n      </div>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (\r\n  state: UnionStateTypes\r\n): { current: number; songDetail?: PlayDetailItem } => {\r\n  const player = state.player;\r\n  const id = player.playQueue[player.current];\r\n  const item = player.playDetailMap.get(id);\r\n\r\n  return {\r\n    current: player.current,\r\n    songDetail: item\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(SongDetail));\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { LeftOutlined, LoadingOutlined } from \"@ant-design/icons\";\r\nimport CommentItem, { CommentItemProps } from \"./commentItem\";\r\nimport axios from \"../../network\";\r\nimport { parseComments } from \"./comments\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\ninterface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\ninterface MoreCommentsProps {\r\n  match: match;\r\n}\r\n\r\nconst MoreComments: React.FC<MoreCommentsProps> = (props) => {\r\n  const { id, type } = (props.match as match<{\r\n    id: string;\r\n    type: commentType;\r\n  }>).params;\r\n  const [comments, setComments] = useState<Array<CommentItemProps>>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isReachBottom, setReachBottom] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const $homeContent = document.getElementsByClassName(\r\n      \"zsw-more-comments\"\r\n    )[0] as HTMLDivElement;\r\n    function handleScroll2Bottom(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (target.scrollTop + target.offsetHeight + 20 > target.scrollHeight) {\r\n        setReachBottom(true);\r\n      } else {\r\n        setReachBottom(false);\r\n      }\r\n    }\r\n    if ($homeContent) {\r\n      $homeContent.addEventListener(\"scroll\", handleScroll2Bottom);\r\n    }\r\n    return () => {\r\n      $homeContent.removeEventListener(\"scroll\", handleScroll2Bottom);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      switch (type) {\r\n        case \"playlist\":\r\n          return `comment/hot?id=${id}&type=2&offset=${offset}&limit=${limit}&timestamp=${Date.now()}`;\r\n        case \"music\":\r\n          return `comment/hot?id=${id}&type=0&offset=${offset}&limit=${limit}&timestamp=${Date.now()}`;\r\n        case \"mv\":\r\n          return `comment/hot?id=${id}&type=1&offset=${offset}&limit=${limit}&timestamp=${Date.now()}`;\r\n        case \"album\":\r\n          return `comment/hot?id=${id}&type=3&offset=${offset}&limit=${limit}&timestamp=${Date.now()}`;\r\n      }\r\n    }\r\n\r\n    async function fetchComments() {\r\n      const { data } = await axios.get(fetchUrl());\r\n      setHasMore(data.hasMore);\r\n      setComments((_data) => {\r\n        return _data.concat(parseComments(data.hotComments));\r\n      });\r\n    }\r\n\r\n    fetchComments();\r\n  }, [queryParams, id, type]);\r\n\r\n  useEffect(() => {\r\n    if (isReachBottom) {\r\n      setQueryParams((data) => {\r\n        return {\r\n          page: data.page + 1,\r\n          limit: data.limit\r\n        };\r\n      });\r\n    }\r\n  }, [isReachBottom]);\r\n\r\n  function onBack() {\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <div className=\"zsw-more-comments\">\r\n      <div>\r\n        <div className=\"more-comments-nav\">\r\n          <LeftOutlined onClick={onBack} />\r\n          \r\n        </div>\r\n        <div className=\"zsw-more-comments-content\">\r\n          {comments.map((comment) => {\r\n            return <CommentItem {...comment} key={comment.commentId} />;\r\n          })}\r\n          {hasMore && (\r\n            <div className=\"loading\">\r\n              <LoadingOutlined />\r\n              <span className=\"text\">...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MoreComments);\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport axios from \"../../../network\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { parseTime, mergeSingers, parseCopyright } from \"../../../utils\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../Player/store\";\r\nimport { UnionStateTypes } from \"../../../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../../pages/Home\";\r\n\r\nconst SongSheet: React.FC<SongSheetProps> = (props) => {\r\n  const {\r\n    trackIds,\r\n    keywords,\r\n    show,\r\n    setPlayDetailMap,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    current,\r\n    playState,\r\n    willPlaylistId\r\n  } = props;\r\n  const trackIdsRef = useRef([...trackIds]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tableData, setTableData] = useState<Array<ISongSheetItem>>([]);\r\n  const tableDataRef = useRef<Array<ISongSheetItem>>();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    const trackids: Array<string> = [];\r\n    function parseSong(song: any, index: number) {\r\n      const {\r\n        al: { name, picUrl },\r\n        ar,\r\n        id,\r\n        dt,\r\n        noCopyrightRcmd,\r\n        fee\r\n      } = song;\r\n      // const {\r\n      //   data: { success }\r\n      // } = await axios.get(`/check/music?id=${id}`);\r\n      const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n      if (copyright) {\r\n        trackids.push(id);\r\n      }\r\n      return {\r\n        duration: parseTime(dt),\r\n        singers: mergeSingers(ar),\r\n        id,\r\n        index: index.toString().padStart(2, \"0\"),\r\n        album: name,\r\n        picUrl,\r\n        name: song.name,\r\n        hasCopyRight: copyright,\r\n        albumId: song.al.id\r\n      };\r\n    }\r\n    function fetchSongsInfo() {\r\n      setTableData([]);\r\n      if (trackIds && trackIds.length) {\r\n        !isUnmount && setLoading(true);\r\n        const idsStr = trackIds.join(\",\");\r\n        axios.get(\"/song/detail?ids=\" + idsStr).then(({ data }) => {\r\n          const songs = data.songs as Array<any>;\r\n          const _tableData = [];\r\n          const dispatchedMap = new Map<string, PlayDetailItem>();\r\n          for (let i = 0; i < songs.length; i++) {\r\n            const parsedSong = parseSong(songs[i], i + 1);\r\n            if (parsedSong.hasCopyRight) {\r\n              const song: PlayDetailItem = Object.assign({}, parsedSong, {\r\n                alia: songs[i].alia.join(\",\")\r\n              });\r\n              dispatchedMap.set(parsedSong.id, song);\r\n            }\r\n            _tableData.push(parsedSong);\r\n          }\r\n          trackIdsRef.current = trackids;\r\n          !isUnmount && setTableData(_tableData);\r\n          tableDataRef.current = _tableData;\r\n          !isUnmount && setLoading(false);\r\n          setPlayDetailMap(dispatchedMap);\r\n        });\r\n      }\r\n    }\r\n\r\n    fetchSongsInfo();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [trackIds, setPlayDetailMap]);\r\n\r\n  useEffect(() => {\r\n    if (tableDataRef.current && tableDataRef.current.length) {\r\n      const _tableData: ISongSheetItem[] = [];\r\n      for (let i = 0; i < tableDataRef.current.length; i++) {\r\n        const { name, album, singers } = tableDataRef.current[i];\r\n        const singerName = singers.map((singer) => singer.name);\r\n        if (\r\n          name.includes(keywords) ||\r\n          album.includes(keywords) ||\r\n          singerName.includes(keywords)\r\n        ) {\r\n          _tableData.push(tableDataRef.current[i]);\r\n        }\r\n      }\r\n      setTableData(_tableData);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [keywords]);\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"manipulation\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \">_<\"\r\n      });\r\n    if (willPlaylistId.indexOf(id) === -1) {\r\n      pushPlayQueue(trackIdsRef.current, id);\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        bordered\r\n        dataSource={tableData}\r\n        pagination={false}\r\n        rowKey={(record) => record.id}\r\n        className={`songsheet-table ${show ? \"show\" : \"\"}`}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        loading={loading}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () =>\r\n              handleDoubleClick(record.id, record.hasCopyRight)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={40}\r\n          align=\"right\"\r\n          render={(value: any, record: ISongSheetItem, index) => (\r\n            <>\r\n              {!record.hasCopyRight ? (\r\n                <span></span>\r\n              ) : record.id === current ? (\r\n                <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n              ) : (\r\n                <span>{(index + 1).toString().padStart(2, \"0\")}</span>\r\n              )}\r\n            </>\r\n          )}\r\n        />\r\n        <Table.Column title=\"\" render={renderManipulation} width={80} />\r\n        <Table.Column\r\n          dataIndex=\"name\"\r\n          title=\"\"\r\n          width={300}\r\n          ellipsis\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.name !== b.name ? (a.name > b.name ? 1 : -1) : 0;\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"singers\"\r\n          title=\"\"\r\n          ellipsis\r\n          width={200}\r\n          render={(value: ISingerInfo[]) => {\r\n            return (\r\n              <div>\r\n                {value.map((item) => (\r\n                  <span\r\n                    key={item.id}\r\n                    className=\"singer-name\"\r\n                    onClick={() => toSingerDetail(item.id)}\r\n                  >\r\n                    {item.name}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"album\"\r\n          title=\"\"\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.album !== b.album ? (a.album > b.album ? 1 : -1) : 0;\r\n          }}\r\n          ellipsis\r\n          width={200}\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"duration\"\r\n          title=\"\"\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.duration !== b.duration\r\n              ? a.duration > b.duration\r\n                ? 1\r\n                : -1\r\n              : 0;\r\n          }}\r\n          width={100}\r\n        />\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nSongSheet.defaultProps = {\r\n  clickAndPushAll: true\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    willPlaylistId: player.willplaylistId\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>, playlistId: string) {\r\n      dispatch(getPushPlayQueueAction(ids, true, playlistId));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(SongSheet));\r\n","import PlaylistInfo from \"./playlistInfo\";\r\n\r\nexport default PlaylistInfo;\r\n\r\nexport * from \"./playlistInfo\";\r\n","import React, { useState } from \"react\";\r\nimport SearchInput from \"../SearchInput\";\r\nimport SongSheet from \"./components/songsheet\";\r\nimport Comments from \"../comments\";\r\n\r\ntype currentType = \"playlist\" | \"comments\" | \"subscribers\";\r\n\r\nconst PlaylistInfo: React.FC<PlaylistInfoProps> = (props) => {\r\n  const [current, setCurrent] = useState<currentType>(\"playlist\");\r\n  const [keywords, setKeywords] = useState(\"\");\r\n  const { trackIds, playlistId } = props;\r\n\r\n  function itemClick(curr: currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  function handleInputChange(keywords: string) {\r\n    setKeywords(keywords);\r\n  }\r\n\r\n  return (\r\n    <div className=\"playlist-info\">\r\n      <ul className=\"playlist-info-nav\">\r\n        <li\r\n          onClick={() => itemClick(\"playlist\")}\r\n          className={current === \"playlist\" ? \"sele\" : \"\"}\r\n        >\r\n          \r\n        </li>\r\n        <li\r\n          onClick={() => itemClick(\"comments\")}\r\n          className={current === \"comments\" ? \"sele\" : \"\"}\r\n        >\r\n          \r\n        </li>\r\n        <li\r\n          onClick={() => itemClick(\"subscribers\")}\r\n          className={current === \"subscribers\" ? \"sele\" : \"\"}\r\n        >\r\n          \r\n        </li>\r\n        {current === \"playlist\" && (\r\n          <li style={{ float: \"right\" }} className=\"search\">\r\n            <SearchInput\r\n              className=\"playlist-info-search\"\r\n              placeholder=\"\"\r\n              onChange={handleInputChange}\r\n            />\r\n          </li>\r\n        )}\r\n      </ul>\r\n      <SongSheet\r\n        trackIds={trackIds}\r\n        keywords={keywords}\r\n        show={current === \"playlist\"}\r\n      />\r\n      {current === \"comments\" && <Comments type=\"playlist\" id={playlistId} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(PlaylistInfo);\r\n","import PlayList from \"./PlayList\";\r\n\r\nexport default PlayList;\r\nexport * from \"./PlayList\";\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport {\r\n  FireFilled,\r\n  PlayCircleOutlined,\r\n  FolderAddOutlined,\r\n  ShareAltOutlined,\r\n  DownloadOutlined,\r\n  UpOutlined,\r\n  DownOutlined\r\n} from \"@ant-design/icons\";\r\nimport { parseDate, parsePlayCount } from \"../../utils\";\r\nimport PlaylistInfo from \"../../common/PlaylistInfo\";\r\nimport axios from \"../../network\";\r\nimport { connect } from \"react-redux\";\r\nimport { getPushPlayQueueAction } from \"../../common/Player/store\";\r\nimport { message } from \"antd\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface PlaylistProps {\r\n  pushPlayQueue: (ids: string | Array<string>) => void;\r\n  match: match;\r\n}\r\n\r\ninterface IDetail {\r\n  coverImgUrl: string;\r\n  // \r\n  name: string;\r\n  tags?: Array<string>;\r\n  avatarUrl: string;\r\n  description?: string;\r\n  playCount: number;\r\n  subscribedCount: number;\r\n  shareCount: number;\r\n  createTime: number;\r\n  commentCount: number;\r\n  // \r\n  nickname: string;\r\n  // \r\n  trackCount: number;\r\n}\r\n\r\nconst PlayList: React.FC<PlaylistProps> = (props) => {\r\n  const [collapse, setCollapse] = useState(true);\r\n  // id\r\n  const [info, setInfo] = useState<PlaylistInfoProps>();\r\n  // \r\n  const [detail, setDetail] = useState<IDetail>();\r\n  const isAdded = useRef(false);\r\n  const { pushPlayQueue } = props;\r\n  const match = props.match as match<{ id: string }>;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  useEffect(() => {\r\n    function parseSubscriber(subscribers: Array<any>): Array<ISubscriber> {\r\n      const _subscribers = [];\r\n      for (let i = 0; i < subscribers.length; i++) {\r\n        const subscriber: ISubscriber = {\r\n          avatarUrl: subscribers[i].avatarUrl,\r\n          userId: subscribers[i].userId\r\n        };\r\n        _subscribers.push(subscriber);\r\n      }\r\n      return _subscribers;\r\n    }\r\n\r\n    function parseInfo(playlist: any): PlaylistInfoProps {\r\n      return {\r\n        trackIds: playlist.trackIds.map((track: any) => track.id),\r\n        subscribers: parseSubscriber(playlist.subscribers),\r\n        playlistId: playlist.id\r\n      };\r\n    }\r\n\r\n    function parseDetail(playlist: any): IDetail {\r\n      return {\r\n        coverImgUrl: playlist.coverImgUrl,\r\n        name: playlist.name,\r\n        tags: playlist.tags,\r\n        avatarUrl: playlist.creator.avatarUrl,\r\n        description: playlist.description,\r\n        playCount: playlist.playCount,\r\n        subscribedCount: playlist.subscribedCount,\r\n        shareCount: playlist.shareCount,\r\n        createTime: playlist.createTime,\r\n        commentCount: playlist.commentCount,\r\n        nickname: playlist.creator.nickname,\r\n        trackCount: playlist.trackCount\r\n      };\r\n    }\r\n\r\n    async function fetchPlaylistInfo(id: string) {\r\n      const { data } = await axios.get(\"/playlist/detail?id=\" + id);\r\n      setDetail(parseDetail(data.playlist));\r\n      setInfo(parseInfo(data.playlist));\r\n    }\r\n\r\n    if (match.params.id) {\r\n      setInfo(undefined);\r\n      fetchPlaylistInfo(match.params.id);\r\n    }\r\n  }, [match.params.id]);\r\n\r\n  function pushPlayQueueAll() {\r\n    if (isAdded.current) {\r\n      return message.warn({\r\n        content: \"\"\r\n      });\r\n    }\r\n    if (info) {\r\n      pushPlayQueue(info.trackIds);\r\n      isAdded.current = true;\r\n    }\r\n  }\r\n\r\n  function toTotalPlaylist(type: string) {\r\n    context.setHistoryStack(\"push\", \"totalPlaylist\");\r\n    history.push(\"/totalPlaylist/\" + type);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"playlist\">\r\n        <div>\r\n          <div className=\"playlist-top\">\r\n            <div className=\"cover-image \">\r\n              {detail && <img src={detail.coverImgUrl} alt=\"\" />}\r\n            </div>\r\n            {detail && detail.description && (\r\n              <div className=\"collapse\">\r\n                {collapse ? (\r\n                  <DownOutlined onClick={() => setCollapse(false)} />\r\n                ) : (\r\n                  <UpOutlined onClick={() => setCollapse(true)} />\r\n                )}\r\n              </div>\r\n            )}\r\n            <div className=\"playlist-detail\">\r\n              <div className=\"playlist-detail-panel-1\">\r\n                <div style={{ float: \"left\" }}>\r\n                  <span className=\"tag\"></span>\r\n                  <span className=\"content\">{detail?.name}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"playlist-detail-panel-2\">\r\n                <img src={detail?.avatarUrl} alt=\"\" />\r\n                <span className=\"nickname\">{detail?.nickname}</span>\r\n                <span className=\"createTime\">\r\n                  {detail?.createTime &&\r\n                    parseDate(\"YYYY-mm-dd\", detail.createTime)}\r\n                  \r\n                </span>\r\n              </div>\r\n              <div className=\"playlist-detail-panel-3\">\r\n                <div className=\"btn\" onClick={pushPlayQueueAll}>\r\n                  <PlayCircleOutlined />\r\n                  \r\n                </div>\r\n                <div className=\"btn\">\r\n                  <FolderAddOutlined />\r\n                  {`(${detail ? detail.subscribedCount : 0})`}\r\n                </div>\r\n                <div className=\"btn\">\r\n                  <ShareAltOutlined />\r\n                  {`(${detail ? detail.shareCount : 0})`}\r\n                </div>\r\n                <div className=\"btn\">\r\n                  <DownloadOutlined />\r\n                  \r\n                </div>\r\n              </div>\r\n              {detail && detail.tags && (\r\n                <div className=\"playlist-detail-panel-4\">\r\n                  :\r\n                  {detail.tags.map((tag) => {\r\n                    return (\r\n                      <span key={tag} onClick={() => toTotalPlaylist(tag)}>\r\n                        {tag}\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n              {detail && detail.description && (\r\n                <div\r\n                  className={`playlist-detail-panel-5 ${\r\n                    collapse ? \"collapsed\" : \"\"\r\n                  }`}\r\n                >\r\n                  :\r\n                  {detail.description.trim()}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"right\">\r\n              <FireFilled style={{ marginRight: 10 }} />\r\n              {detail?.trackCount}\r\n              <PlayCircleOutlined style={{ margin: \"0 10px\" }} />\r\n              {detail?.playCount && parsePlayCount(detail.playCount)}\r\n            </div>\r\n          </div>\r\n          <div className=\"playlist-bottom\">\r\n            {info && <PlaylistInfo {...info} />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, false));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(React.memo(PlayList));\r\n","import React from \"react\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerAlbumItem: React.FC<SingerAlbumItemProps> = (props) => {\r\n  const {\r\n    selected,\r\n    handleItemClick,\r\n    name,\r\n    alia,\r\n    duration,\r\n    index,\r\n    hasCopyRight,\r\n    playState,\r\n    isPlayed,\r\n    onDbClick\r\n  } = props;\r\n\r\n  const classes = classnames(\"zsw-singer-album-item\", {\r\n    selected\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={classes}\r\n      onClick={handleItemClick}\r\n      onDoubleClick={onDbClick}\r\n    >\r\n      <div className=\"zsw-singer-album-item-index\">\r\n        {hasCopyRight ? (\r\n          isPlayed ? (\r\n            <SoundFilled className={`${playState ? \"play\" : \"pause\"}`} />\r\n          ) : (\r\n            index\r\n          )\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <HeartOutlined />\r\n      <DownloadOutlined />\r\n      <div className=\"zsw-singer-album-item-text\">\r\n        <span className=\"zsw-singer-album-item-name\">{name}</span>\r\n        {alia && <span className=\"zsw-singer-album-item-alia\">({alia})</span>}\r\n      </div>\r\n      <span className=\"zsw-singer-album-item-duration\">{duration}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerAlbumItem);\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport SingerAlbumItem from \"./singerAlbumItem\";\r\nimport { LoadingOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport axios from \"../../network\";\r\nimport { parseTime, mergeSingers } from \"../../utils\";\r\nimport classnames from \"classnames\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { message } from \"antd\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../common/Player/store\";\r\n\r\nconst SingerAlbumDetail: React.FC<SingerAlbumDetailProps> = (props) => {\r\n  const {\r\n    id,\r\n    playQueue,\r\n    currIndex,\r\n    playState,\r\n    pushPlayQueue,\r\n    setPlayDetailMap,\r\n    changePlayIndex,\r\n    fetchPlayUrl,\r\n    title,\r\n    needExpand,\r\n    top50,\r\n    picUrl\r\n  } = props;\r\n  const [selectedIndex, changeSelectedIndex] = useState(-1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [albumData, setAlbumData] = useState<ISingerAlbumItem[]>([]);\r\n  const [expand, setExpand] = useState(false);\r\n  const classes = classnames(\"zsw-singer-album-detail-content\", {\r\n    expand,\r\n    top50\r\n  });\r\n  const onlyPushOnce = useRef(false);\r\n  const trackIdsRef = useRef<string[]>([]);\r\n\r\n  function handleItemClick(index: number) {\r\n    changeSelectedIndex(index);\r\n  }\r\n\r\n  function hanldeDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \">_<\"\r\n      });\r\n    if (!onlyPushOnce.current || currIndex === -1) {\r\n      pushPlayQueue(trackIdsRef.current);\r\n      onlyPushOnce.current = true;\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    trackIdsRef.current = [];\r\n    function parseSongs(arr: any[]) {\r\n      const _arr: ISingerAlbumItem[] = [];\r\n      const _map = new Map<string, PlayDetailItem>();\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const item = arr[i];\r\n        const { name, id, dt, alia, noCopyrightRcmd, ar, al, fee } = item;\r\n        trackIdsRef.current.push(item.id);\r\n        _map.set(item.id, {\r\n          name,\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          picUrl: al.picUrl,\r\n          album: al.name,\r\n          alia: alia.join(\" \"),\r\n          id,\r\n          hasCopyRight: noCopyrightRcmd || fee ? false : true,\r\n          albumId: item.al.id\r\n        });\r\n        _arr.push({\r\n          name,\r\n          id,\r\n          duration: parseTime(dt),\r\n          alia: alia.join(\" \"),\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          hasCopyRight: noCopyrightRcmd ? false : true\r\n        });\r\n      }\r\n      setPlayDetailMap(_map);\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setLoading(true);\r\n      if (top50) {\r\n        const { data } = await axios.get(\"/artist/top/song?id=\" + id);\r\n        !isUnmount && setAlbumData(parseSongs(data.songs));\r\n      } else {\r\n        const { data } = await axios.get(\"/album?id=\" + id);\r\n        !isUnmount && setAlbumData(parseSongs(data.songs));\r\n      }\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, top50, setPlayDetailMap]);\r\n\r\n  return (\r\n    <div className=\"zsw-singer-album-detail\">\r\n      <div className=\"zsw-singer-album-detail-left\">\r\n        <img\r\n          src={`${\r\n            picUrl\r\n              ? picUrl + \"?param=150y150\"\r\n              : \"https://p2.music.126.net/HvB44MNINoLar8HFbRjIGQ==/109951165142435842.jpg?param=150y150\"\r\n          }`}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      <div className=\"zsw-singer-album-detail-right\">\r\n        <div className=\"zsw-singer-album-detail-title\">{title}</div>\r\n        <div className={classes}>\r\n          {loading ? (\r\n            <div className=\"zsw-singer-album-loading\">\r\n              <LoadingOutlined />\r\n              \r\n            </div>\r\n          ) : (\r\n            <>\r\n              {albumData.map((item, index) => {\r\n                return (\r\n                  <SingerAlbumItem\r\n                    {...item}\r\n                    key={item.id}\r\n                    handleItemClick={() => handleItemClick(index)}\r\n                    selected={\r\n                      index === selectedIndex ||\r\n                      playQueue[currIndex] === item.id\r\n                    }\r\n                    isPlayed={playQueue[currIndex] === item.id}\r\n                    playState={playState}\r\n                    onDbClick={() =>\r\n                      hanldeDoubleClick(item.id, item.hasCopyRight)\r\n                    }\r\n                  />\r\n                );\r\n              })}\r\n            </>\r\n          )}\r\n        </div>\r\n        {needExpand && (\r\n          <div\r\n            className=\"zsw-singer-album-detail-expand-btn\"\r\n            onClick={() => setExpand(!expand)}\r\n          >\r\n            {!expand ? \"50\" : \"10\"}\r\n            <RightOutlined />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nSingerAlbumDetail.defaultProps = {\r\n  needExpand: true\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const currIndex = player.current;\r\n\r\n  return {\r\n    playQueue: player.playQueue,\r\n    currIndex,\r\n    playState: player.playState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, true));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(SingerAlbumDetail));\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport SingerAlbumDetail from \"./singerAlbumDetail\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerAlbum: React.FC<SingerAlbumProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [albums, setAlbums] = useState<IAlbumInfo[]>([]);\r\n  const more = useRef(true);\r\n  const [offset, setOffset] = useState(0);\r\n  const classes = classnames(\"zsw-singer-album\", {\r\n    show\r\n  });\r\n  const [firstRequest, setFirstRequest] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      setFirstRequest(true);\r\n    }\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    more.current = true;\r\n    setAlbums([]);\r\n    setOffset(0);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function handleScroll(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (!more.current) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n      if (\r\n        target.scrollTop >= target.scrollHeight - target.offsetHeight &&\r\n        target.scrollTop > 0\r\n      ) {\r\n        !isUnmount && setOffset((offset) => offset + 15);\r\n      }\r\n    }\r\n    const el = document.getElementsByClassName(\"zsw-singer-detail\")[0];\r\n    if (show && el) {\r\n      el.addEventListener(\"scroll\", handleScroll);\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n      if (el) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseAlbums(albums: any[]) {\r\n      const arr: IAlbumInfo[] = [];\r\n\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n        arr.push({\r\n          title: item.name,\r\n          picUrl: item.picUrl,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function returnUrl() {\r\n      return `/artist/album?id=${id}&offset=${offset}&limit=${15}`;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(returnUrl());\r\n      if (!isUnmount) {\r\n        more.current = data.more;\r\n        setAlbums((_data) => {\r\n          return _data.concat(parseAlbums(data.hotAlbums));\r\n        });\r\n      }\r\n    }\r\n\r\n    if (id && more.current && firstRequest) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, offset, firstRequest]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <SingerAlbumDetail id={id} title=\"50\" top50={true} />\r\n      {albums.map((item) => {\r\n        return (\r\n          <SingerAlbumDetail\r\n            {...item}\r\n            top50={false}\r\n            needExpand={false}\r\n            key={item.id + \" \" + id}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerAlbum);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerInfo: React.FC<SingerInfoProps> = (props) => {\r\n  const { show, id } = props;\r\n  const classes = classnames(\"zsw-singer-info\", {\r\n    show\r\n  });\r\n\r\n  const [desc, setDesc] = useState<ISingerDesc[]>([]);\r\n\r\n  useEffect(() => {\r\n    setDesc([]);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    function parseDesc(data: any) {\r\n      const arr: ISingerDesc[] = [];\r\n      arr.push({\r\n        title: \"\",\r\n        content: data.briefDesc\r\n      });\r\n      const introduction = data.introduction as any[];\r\n      for (let i = 0; i < introduction.length; i++) {\r\n        const item = introduction[i];\r\n        arr.push({\r\n          title: item.ti,\r\n          content: item.txt\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/artist/desc?id=\" + id);\r\n      setDesc(parseDesc(data));\r\n    }\r\n\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {desc.map((item) => {\r\n        return (\r\n          <div className=\"zsw-singer-info-item\" key={item.title}>\r\n            <p className=\"title\">{item.title}</p>\r\n            {item.content.split(\"\\n\").map((item, index) => {\r\n              return (\r\n                <p className=\"content\" key={item + index}>\r\n                  {item}\r\n                </p>\r\n              );\r\n            })}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerInfo);\r\n","import React from \"react\";\r\nimport { VideoCameraOutlined } from \"@ant-design/icons\";\r\n\r\nconst SingerMVItem: React.FC<SingerMVItemProps> = (props) => {\r\n  const { playCount, name, duration, picUrl, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"zsw-singer-mv-item\" onClick={onClick}>\r\n      <div>\r\n        <img src={`${picUrl + \"?param=160y90\"}`} alt=\"\" />\r\n        <span className=\"play-count\">\r\n          <VideoCameraOutlined />\r\n          {playCount}\r\n        </span>\r\n        <span className=\"duration\">{duration}</span>\r\n      </div>\r\n      <p>{name}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerMVItem);\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport SingerMVItem from \"./singerMVItem\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { parseTime, parsePlayCount } from \"../../utils\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SingerMV: React.FC<SingerMVProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [mvs, setMVs] = useState<ISingerMVItem[]>([]);\r\n  const classes = classnames(\"zsw-singer-mvs\", {\r\n    show\r\n  });\r\n  const [offset, setOffset] = useState(0);\r\n  const more = useRef(true);\r\n  const [firstRequest, setFirstRequest] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      setFirstRequest(true);\r\n    }\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    more.current = true;\r\n    setMVs([]);\r\n    setOffset(0);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function handleScroll(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (!more.current) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n      if (\r\n        target.scrollTop >= target.scrollHeight - target.offsetHeight &&\r\n        target.scrollTop > 0\r\n      ) {\r\n        !isUnmount && setOffset((offset) => offset + 30);\r\n      }\r\n    }\r\n    const el = document.getElementsByClassName(\"home-content\")[0];\r\n    if (show) {\r\n      el.addEventListener(\"scroll\", handleScroll);\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n      el.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    function returnUrl() {\r\n      return `/artist/mv?id=${id}&offset=${offset}&limit=30`;\r\n    }\r\n\r\n    function parsemvs(data: any[]) {\r\n      const arr: ISingerMVItem[] = [];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          name: item.name,\r\n          duration: parseTime(item.duration),\r\n          id: item.id,\r\n          picUrl: item.imgurl16v9,\r\n          playCount:\r\n            item.playCount >= 10000\r\n              ? parsePlayCount(item.playCount)\r\n              : item.playCount\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      more.current = data.hasMore;\r\n      setMVs((mvs) => mvs.concat(parsemvs(data.mvs)));\r\n      setLoading(false);\r\n    }\r\n\r\n    if (id && more.current && firstRequest) {\r\n      fetchData();\r\n    }\r\n  }, [id, offset, firstRequest]);\r\n\r\n  function handleClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"mv\");\r\n    history.push(\"/mv/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {mvs.map((item) => {\r\n        return (\r\n          <SingerMVItem\r\n            {...item}\r\n            key={item.id}\r\n            onClick={() => handleClick(item.id)}\r\n          />\r\n        );\r\n      })}\r\n      {loading && (\r\n        <div className=\"zsw-singer-mvs-loading\">\r\n          <LoadingOutlined />\r\n          \r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerMV);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SimiSingers: React.FC<SimiSingersProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [simiSingers, setSimiSingers] = useState<ISimiSingerItem[]>([]);\r\n  const classes = classnames(\"zsw-simi-singers\", {\r\n    show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    setSimiSingers([]);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    function parseData(data: any[]) {\r\n      const arr: ISimiSingerItem[] = [];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.img1v1Url\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/simi/artist?id=\" + id);\r\n      console.log(parseData(data.artists));\r\n      setSimiSingers(parseData(data.artists));\r\n    }\r\n\r\n    if (id && show) {\r\n      fetchData();\r\n    }\r\n  }, [id, show]);\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {simiSingers.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"zsw-simi-singer-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div>\r\n              <img src={item.picUrl + \"?param=120y120\"} alt=\"\" />\r\n            </div>\r\n            <p>{item.name}</p>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiSingers);\r\n","import SingerDetail from \"./singerDetail\";\r\n\r\nexport default SingerDetail;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { FolderAddOutlined } from \"@ant-design/icons\";\r\nimport SingerAlbum from \"./singerAlbum\";\r\nimport classnames from \"classnames\";\r\nimport SingerInfo from \"./singerInfo\";\r\nimport SingerMV from \"./singerMV\";\r\nimport SimiSingers from \"./simiSingers\";\r\nimport { match } from \"react-router-dom\";\r\n\r\ninterface SingerDetailProps {\r\n  match: match;\r\n}\r\n\r\ntype currentType = \"album\" | \"mv\" | \"singerInfo\" | \"simiSinger\";\r\nconst SingerDetail: React.FC<SingerDetailProps> = (props) => {\r\n  const match = props.match as match<{ id: string }>;\r\n  const [songsCount, setSongsCount] = useState(0);\r\n  const [albumsCount, setAlbumsCount] = useState(0);\r\n  const [singerName, setSingerName] = useState(\"\");\r\n  const [picUrl, setPicUrl] = useState(\"\");\r\n  const [current, setCurrent] = useState<currentType>(\"album\");\r\n  const classes = classnames(\"zsw-singer-detail\");\r\n\r\n  function itemClick(curr: currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCurrent(\"album\");\r\n  }, [match.params.id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    async function fetchSingerSongsCount() {\r\n      const { data } = await axios.get(\r\n        `/artist/songs?id=${match.params.id}&limit=0`\r\n      );\r\n      !isUnmount && setSongsCount(data.total);\r\n    }\r\n    async function fetchSingerAlbums() {\r\n      const { data } = await axios.get(\r\n        `/artist/album?id=${match.params.id}&limit=100`\r\n      );\r\n      if (!isUnmount) {\r\n        setAlbumsCount(data.artist.albumSize);\r\n        setSingerName(data.artist.name);\r\n        setPicUrl(data.artist.picUrl);\r\n      }\r\n    }\r\n    if (match.params.id) {\r\n      fetchSingerSongsCount();\r\n      fetchSingerAlbums();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [match.params.id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"zsw-singer-detail-top\">\r\n          <div\r\n            className=\"zsw-singer-detail-top-img\"\r\n            style={{\r\n              backgroundImage: `url(${picUrl}?param=200y200)`\r\n            }}\r\n          ></div>\r\n          <div className=\"zsw-singer-detail-info\">\r\n            <p className=\"zsw-singer-detail-info-panel-1\">\r\n              <span className=\"zsw-singer-detail-info-panel-1-tag\"></span>\r\n              <span className=\"zsw-singer-detail-info-panel-1-name\">\r\n                {singerName}\r\n              </span>\r\n            </p>\r\n            <p className=\"zsw-singer-detail-info-panel-2\">\r\n              <span className=\"iconfont icon-music_note\">:</span>\r\n              <span className=\"zsw-singer-detail-info-panel-2-count\">\r\n                {songsCount}\r\n              </span>\r\n            </p>\r\n            <p className=\"zsw-singer-detail-info-panel-3\">\r\n              <span className=\"iconfont icon-changpian1\">:</span>\r\n              <span className=\"zsw-singer-detail-info-panel-3-count\">\r\n                {albumsCount}\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"zsw-singer-detail-top-btn\">\r\n            <FolderAddOutlined />\r\n            \r\n          </div>\r\n        </div>\r\n        <ul className=\"playlist-info-nav\">\r\n          <li\r\n            onClick={() => itemClick(\"album\")}\r\n            className={current === \"album\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"mv\")}\r\n            className={current === \"mv\" ? \"sele\" : \"\"}\r\n          >\r\n            MV\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"singerInfo\")}\r\n            className={current === \"singerInfo\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"simiSinger\")}\r\n            className={current === \"simiSinger\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n        </ul>\r\n        <div className=\"zsw-singer-detail-content\">\r\n          <SingerAlbum id={match.params.id} show={current === \"album\"} />\r\n          <SingerInfo id={match.params.id} show={current === \"singerInfo\"} />\r\n          <SingerMV id={match.params.id} show={current === \"mv\"} />\r\n          <SimiSingers id={match.params.id} show={current === \"simiSinger\"} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerDetail);\r\n","import MV from \"./mv\";\r\n\r\nexport default MV;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { LeftOutlined } from \"@ant-design/icons\";\r\nimport Comments from \"../../common/comments\";\r\nimport axios from \"../../network\";\r\nimport { parseDate, parsePlayCount } from \"../../utils\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface IMVInfo {\r\n  name: string;\r\n  id: string;\r\n  playCount: string;\r\n  publishTime: string;\r\n  artists: any[];\r\n}\r\n\r\ninterface MVProps {\r\n  match: match;\r\n}\r\n\r\nconst MV: React.FC<MVProps> = (props) => {\r\n  const match = props.match as match<{ id: string }>;\r\n  const classes = classnames(\"zsw-mv\");\r\n  const [url, setUrl] = useState(\"\");\r\n  const [info, setInfo] = useState<IMVInfo>();\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function back() {\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.go(-1);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function parseMVInfo(data: any): IMVInfo {\r\n      return {\r\n        name: data.name,\r\n        artists: data.artists,\r\n        playCount:\r\n          data.playCount > 10000\r\n            ? parsePlayCount(data.playCount) + \"\"\r\n            : data.playCount + \"\",\r\n        publishTime: parseDate(\"YYYY-mm-dd\", data.publishTime),\r\n        id: data.id\r\n      };\r\n    }\r\n    async function fetchData() {\r\n      const urlData = await axios.get(\"/mv/url?id=\" + match.params.id);\r\n      const url = urlData.data.data.url;\r\n      setUrl(url);\r\n\r\n      const infoData = await axios.get(\"/mv/detail?mvid=\" + match.params.id);\r\n      setInfo(parseMVInfo(infoData.data.data));\r\n    }\r\n\r\n    if (match.params.id) {\r\n      fetchData();\r\n    }\r\n  }, [match.params.id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"zsw-mv-top\">\r\n          <div className=\"zsw-mv-top-left\">\r\n            <p>\r\n              <LeftOutlined onClick={back} />\r\n              <span className=\"zsw-mv-name\">{info ? info.name : \"\"}</span>\r\n              {info &&\r\n                info.artists.map((item, index) => {\r\n                  return (\r\n                    <React.Fragment key={item.id}>\r\n                      <span className=\"zsw-mv-singer-name\">{item.name}</span>\r\n                      <span>\r\n                        {index === info.artists.length - 1 ? \"\" : \"/\"}\r\n                      </span>\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n            </p>\r\n            <video src={url} controls></video>\r\n          </div>\r\n          <div className=\"zsw-mv-introduction\">\r\n            <div className=\"title\">MV</div>\r\n            <p>: {info ? info.publishTime : \"\"}</p>\r\n            <p>: {info ? info.playCount : \"\"}</p>\r\n          </div>\r\n        </div>\r\n        {match.params.id && <Comments type=\"mv\" id={match.params.id} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MV);\r\n","import React, { useRef } from \"react\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { Pagination } from \"antd\";\r\n\r\ninterface ResultOfPaginationProps {\r\n  handlePageSizeChange: (page: number) => void;\r\n  attrs: PaginationProps;\r\n  defaultPageSize: number;\r\n}\r\n\r\nconst ResultOfPagination: React.FC<ResultOfPaginationProps> = (props) => {\r\n  const { handlePageSizeChange, attrs, defaultPageSize } = props;\r\n\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: defaultPageSize,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n\r\n  return (\r\n    <div className=\"result-of-pagination\">\r\n      <Pagination {...defaultPagination.current} {...attrs} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfPagination);\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useCallback,\r\n  useContext\r\n} from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { parseTime, mergeSingers, parseCopyright } from \"../../utils\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction,\r\n  getChangePlayStateAction\r\n} from \"../../common/Player/store\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfSongs: React.FC<ResultOfSongsProps> = (props) => {\r\n  const {\r\n    keywords,\r\n    setLoading,\r\n    setSearchCount,\r\n    current,\r\n    playState,\r\n    setPlayDetailMap,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    changePlayState,\r\n    playQueue,\r\n    urlMap\r\n  } = props;\r\n  const [songs, setSongs] = useState<ISearchOfSongItem[]>([]);\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-songs\", {\r\n    hidden: !show\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const map = useRef<Map<string, PlayDetailItem>>(\r\n    new Map<string, PlayDetailItem>()\r\n  );\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 100\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  const handlePageSizeChange = useCallback((page: number) => {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  function renderIndex(value: any, record: ISearchOfSongItem) {\r\n    return (\r\n      <div className=\"index\">\r\n        {!record.hasCopyRight ? (\r\n          \"\"\r\n        ) : record.id === current ? (\r\n          <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n        ) : (\r\n          <span>{value}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(record: ISearchOfSongItem) {\r\n    if (!record.hasCopyRight) {\r\n      return message.error({\r\n        content: \">_<\"\r\n      });\r\n    }\r\n    if (current === record.id && playState === false) {\r\n      return changePlayState(true);\r\n    } else if (current === record.id) return;\r\n    if (playQueue.indexOf(record.id) !== -1) {\r\n      if (!urlMap.get(record.id)) {\r\n        fetchPlayUrl(record.id);\r\n      }\r\n      changePlayIndex(record.id);\r\n    } else {\r\n      pushPlayQueue(record.id);\r\n      fetchPlayUrl(record.id);\r\n      changePlayIndex(record.id);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}`;\r\n    }\r\n    function parseData(songs: any[]) {\r\n      const _arr: ISearchOfSongItem[] = [];\r\n      if (!(songs instanceof Array)) return [];\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const {\r\n          al: { name, picUrl },\r\n          ar,\r\n          id,\r\n          dt,\r\n          noCopyrightRcmd,\r\n          alia,\r\n          pop,\r\n          fee\r\n        } = songs[i];\r\n        const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n        const parsedItem = {\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          id,\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          album: name,\r\n          picUrl,\r\n          name: songs[i].name,\r\n          hasCopyRight: copyright,\r\n          alia: alia.join(\",\"),\r\n          albumId: songs[i].al.id\r\n        };\r\n        if (copyright) {\r\n          map.current.set(id, parsedItem);\r\n        }\r\n        _arr.push(Object.assign({}, parsedItem, { pop }));\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      map.current = new Map<string, PlayDetailItem>();\r\n      setSongs([]);\r\n      setShow(false);\r\n      setLoading(true);\r\n      axios.get(returnUrl()).then(({ data }) => {\r\n        setPagination({\r\n          total: data.result.songCount\r\n        });\r\n        setSearchCount(data.result.songCount);\r\n        setSongs(parseData(data.result.songs));\r\n        setPlayDetailMap(map.current);\r\n        setLoading(false);\r\n        setShow(true);\r\n      });\r\n    }\r\n\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n  }, [keywords, queryParams, setPlayDetailMap, setLoading, setSearchCount]);\r\n\r\n  function renderPop(value: any) {\r\n    return (\r\n      <div className=\"pop\">\r\n        <div className=\"pop-inner\" style={{ width: value + \"%\" }}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"steer\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <Table\r\n        size=\"small\"\r\n        bordered\r\n        dataSource={songs}\r\n        rowKey={(record) => record.id}\r\n        pagination={false}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () => handleDoubleClick(record)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={65}\r\n          dataIndex=\"index\"\r\n          render={renderIndex}\r\n        />\r\n        <Table.Column title=\"\" width={65} render={renderManipulation} />\r\n        <Table.Column title=\"\" ellipsis dataIndex=\"name\" />\r\n        <Table.Column\r\n          title=\"\"\r\n          ellipsis\r\n          dataIndex=\"singers\"\r\n          render={(value: ISingerInfo[]) => {\r\n            return value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                className=\"singer-name\"\r\n                onClick={() => toSingerDetail(item.id)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ));\r\n          }}\r\n        />\r\n        <Table.Column\r\n          title=\"\"\r\n          ellipsis\r\n          dataIndex=\"album\"\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column title=\"\" width={100} dataIndex=\"duration\" />\r\n        <Table.Column\r\n          title=\"\"\r\n          width={120}\r\n          dataIndex=\"pop\"\r\n          render={renderPop}\r\n        />\r\n      </Table>\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={100}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    playQueue: player.playQueue,\r\n    urlMap: player.playUrlMap\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string) {\r\n      dispatch(getPushPlayQueueAction(ids, false));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    },\r\n    changePlayState(flag: boolean) {\r\n      dispatch(getChangePlayStateAction(flag));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(ResultOfSongs));\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfSingers: React.FC<ResultOfSingersProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [singers, setSingers] = useState<ISearchOfSingerItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const classes = classnames(\"result-of-singers\", {\r\n    hidden: !show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parse(artists: any[]) {\r\n      const _arr: ISearchOfSingerItem[] = [];\r\n      if (!(artists instanceof Array)) return [];\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.img1v1Url\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=100`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setSingers([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      setPagination({\r\n        total: data.result.artistCount\r\n      });\r\n      setSearchCount(data.result.artistCount);\r\n      !isUnmount && setSingers(parse(data.result.artists));\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {singers.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-singers-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=45y45\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfSingers);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfAlbums: React.FC<ResultOfAlbumsProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [albums, setAlbums] = useState<ISearchOfAlbumItem[]>([]);\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-albums\", {\r\n    hidden: !show\r\n  });\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 15\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(e: React.MouseEvent, id: string) {\r\n    if ((e.target as HTMLDivElement).classList.contains(\"singer-name\")) return;\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    function parse(albums: any[]) {\r\n      const _arr: ISearchOfAlbumItem[] = [];\r\n      if (!(albums instanceof Array)) return [];\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.picUrl,\r\n          singerName: item.artist.name,\r\n          singerId: item.artist.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=10`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setAlbums([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      setAlbums(parse(data.result.albums));\r\n      setSearchCount(data.result.albumCount);\r\n      setPagination({\r\n        total: data.result.albumCount\r\n      });\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {albums.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-albums-item\"\r\n            key={item.id}\r\n            onClick={(e) => handleItemClick(e, item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=45y45\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n            <div\r\n              className=\"singer-name\"\r\n              onClick={() => toSingerDetail(item.singerId)}\r\n            >\r\n              {item.singerName}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={15}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfAlbums);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { parseTime, mergeSingers, parsePlayCount } from \"../../utils\";\r\nimport { CustomerServiceOutlined } from \"@ant-design/icons\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfMVs: React.FC<ResultOfMVsProps> = (props) => {\r\n  const { keywords, setLoading, setSearchCount } = props;\r\n  const [mvs, setMVs] = useState<ISearchOfMVItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const classes = classnames(\"result-of-mvs\", {\r\n    hidden: !show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"mv\");\r\n    history.push(\"/mv/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseMVs(mvs: any[]) {\r\n      const _arr: ISearchOfMVItem[] = [];\r\n      if (!(mvs instanceof Array)) return [];\r\n      for (let i = 0; i < mvs.length; i++) {\r\n        const item = mvs[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          duration: parseTime(item.duration),\r\n          playCount: parsePlayCount(item.playCount),\r\n          singers: mergeSingers(item.artists),\r\n          picUrl: item.cover\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=1004`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setLoading(true);\r\n      setMVs([]);\r\n      const { data } = await axios.get(returnUrl());\r\n      !isUnmount && setMVs(parseMVs(data.result.mvs));\r\n      setPagination({\r\n        total: data.result.mvCount\r\n      });\r\n      setSearchCount(data.result.mvCount);\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"result-of-mvs-content\">\r\n        {mvs.map((item) => {\r\n          return (\r\n            <div\r\n              className=\"result-of-mvs-item\"\r\n              key={item.id}\r\n              onClick={() => handleItemClick(item.id)}\r\n            >\r\n              <div>\r\n                <img src={item.picUrl + \"?param=199y112\"} alt=\"\" />\r\n                <span className=\"duration\">{item.duration}</span>\r\n                <div className=\"playCount\">\r\n                  <CustomerServiceOutlined />\r\n                  {item.playCount}\r\n                </div>\r\n              </div>\r\n              <p className=\"name\">{item.name}</p>\r\n              <p className=\"singer-name\">\r\n                {item.singers.map((singer) => (\r\n                  <span key={singer.id}>{singer.name}</span>\r\n                ))}\r\n              </p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfMVs);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfPlaylists: React.FC<ResultOfPlaylistsProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [playlists, setPlaylists] = useState<ResultOfPlaylistItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-playlists\", {\r\n    hidden: !show\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parsePlaylists(playlists: any[]) {\r\n      const _arr: ResultOfPlaylistItem[] = [];\r\n      if (!(playlists instanceof Array)) return [];\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = playlists[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.coverImgUrl,\r\n          total: item.trackCount + \"\",\r\n          creatorName: \"by \" + item.creator.nickname\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=1000`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setPlaylists([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      !isUnmount && setPlaylists(parsePlaylists(data.result.playlists));\r\n      setSearchCount(data.result.playlistCount);\r\n      setPagination({\r\n        total: data.result.playlistCount\r\n      });\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {playlists.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-playlists-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=50y50\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n            <div className=\"total\">{item.total}</div>\r\n            <div className=\"creator-name\">{item.creatorName}</div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfPlaylists);\r\n","import React, { useState, useCallback } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport ResultOfSongs from \"./resultOfSongs\";\r\nimport ResultOfSingers from \"./resultOfSingers\";\r\nimport ResultOfAlbums from \"./resultOfAlbums\";\r\nimport ResultOfMVs from \"./resultOfMVs\";\r\nimport ResultOfPlaylists from \"./resultOfPlaylists\";\r\nimport { match } from \"react-router-dom\";\r\n\r\ninterface SearchResultProps {\r\n  match: match;\r\n}\r\n\r\ntype currentType = \"\" | \"\" | \"\" | \"MV\" | \"\";\r\n\r\nconst typeArr: currentType[] = [\"\", \"\", \"\", \"MV\", \"\"];\r\n\r\nconst SearchResult: React.FC<SearchResultProps> = (props) => {\r\n  const match = props.match as match<{ keywords: string }>;\r\n  const [curr, setCurr] = useState<currentType>(\"\");\r\n  const [searchCount, setSearchCount] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = classnames(\"search-result\");\r\n\r\n  const setCount = useCallback((num: number) => {\r\n    setSearchCount(num);\r\n  }, []);\r\n\r\n  const changeLoading = useCallback((flag: boolean) => {\r\n    setLoading(flag);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"search-result-header\">\r\n          \"<span>{match.params.keywords}</span>\",{searchCount}{curr}\r\n        </div>\r\n        <div className=\"search-result-tabs\">\r\n          {typeArr.map((item) => {\r\n            const classes = classnames(\"search-result-tabs-item\", {\r\n              selected: item === curr\r\n            });\r\n            return (\r\n              <div className={classes} key={item} onClick={() => setCurr(item)}>\r\n                {item}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        {loading && (\r\n          <div className=\"search-result-loading\">\r\n            <LoadingOutlined />\r\n            <span></span>\r\n          </div>\r\n        )}\r\n        {curr === \"\" && (\r\n          <ResultOfSongs\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"\" && (\r\n          <ResultOfSingers\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"\" && (\r\n          <ResultOfAlbums\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"MV\" && (\r\n          <ResultOfMVs\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"\" && (\r\n          <ResultOfPlaylists\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchResult);\r\n","import SearchResult from \"./searchResult\";\r\n\r\nexport default SearchResult;\r\n\r\nexport * from \"./searchResult\";\r\n","import React, { useContext } from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport * as types from \"./types\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../common/Player/store\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nconst AlbumSongs: React.FC<types.AlbumSongsProps> = (props) => {\r\n  const {\r\n    loading,\r\n    songs,\r\n    current,\r\n    playState,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    willPlaylistId\r\n  } = props;\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function renderIndex(value: any, record: ISearchOfSongItem) {\r\n    return (\r\n      <div className=\"index\">\r\n        {!record.hasCopyRight ? (\r\n          \"\"\r\n        ) : record.id === current ? (\r\n          <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n        ) : (\r\n          <span>{value}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderPop(value: any) {\r\n    return (\r\n      <div className=\"pop\">\r\n        <div className=\"pop-inner\" style={{ width: value + \"%\" }}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \">_<\"\r\n      });\r\n    if (willPlaylistId.indexOf(id) === -1) {\r\n      pushPlayQueue(\r\n        songs.map((song) => song.id),\r\n        id\r\n      );\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"steer\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"album-songs\">\r\n      <Table\r\n        bordered\r\n        pagination={false}\r\n        rowKey={(record) => record.index}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        loading={loading}\r\n        dataSource={songs}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () =>\r\n              handleDoubleClick(record.id, record.hasCopyRight)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={40}\r\n          align=\"right\"\r\n          dataIndex=\"index\"\r\n          render={renderIndex}\r\n        />\r\n        <Table.Column title=\"\" width={60} render={renderManipulation} />\r\n        <Table.Column title=\"\" dataIndex=\"name\" ellipsis />\r\n        <Table.Column\r\n          title=\"\"\r\n          dataIndex=\"singers\"\r\n          ellipsis\r\n          render={(value: ISingerInfo[]) => {\r\n            return value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                className=\"singer-name\"\r\n                onClick={() => toSingerDetail(item.id)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ));\r\n          }}\r\n        />\r\n        <Table.Column\r\n          title=\"\"\r\n          dataIndex=\"album\"\r\n          ellipsis\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column title=\"\" width={150} dataIndex=\"duration\" />\r\n        <Table.Column\r\n          title=\"\"\r\n          width={120}\r\n          dataIndex=\"pop\"\r\n          render={renderPop}\r\n        />\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    willPlaylistId: player.willplaylistId\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    pushPlayQueue(ids: string | Array<string>, playlistId: string) {\r\n      dispatch(getPushPlayQueueAction(ids, true, playlistId));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(AlbumSongs));\r\n","import Album from \"./album\";\r\n\r\nexport default Album;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport {\r\n  PlayCircleOutlined,\r\n  FolderAddOutlined,\r\n  ShareAltOutlined,\r\n  DownloadOutlined\r\n} from \"@ant-design/icons\";\r\nimport AlbumSongs from \"./albumSongs\";\r\nimport axios from \"../../network\";\r\nimport * as types from \"./types\";\r\nimport {\r\n  parseDate,\r\n  parseTime,\r\n  mergeSingers,\r\n  parseCopyright\r\n} from \"../../utils\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSetPlayDetailMapAction } from \"../../common/Player/store\";\r\nimport Comments from \"../../common/comments\";\r\nimport classnames from \"classnames\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\ninterface AlbumProps {\r\n  setPlayDetailMap: (map: Map<string, PlayDetailItem>) => void;\r\n  match: match;\r\n}\r\n\r\nconst Album: React.FC<AlbumProps> = (props) => {\r\n  const { setPlayDetailMap } = props;\r\n  const [current, setCurrent] = useState<types.currentType>(\"songs\");\r\n  const [info, setInfo] = useState<types.AlbumInfo>();\r\n  const [songs, setSongs] = useState<types.IAlbumSongItem[]>([]);\r\n  const map = useRef<Map<string, PlayDetailItem>>(\r\n    new Map<string, PlayDetailItem>()\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = classnames(\"album\");\r\n  const match = props.match as match<{ id: string }>;\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseInfo(data: any): types.AlbumInfo {\r\n      return {\r\n        picUrl: data.picUrl,\r\n        publishTime: data.publishTime,\r\n        name: data.name,\r\n        description: data.description,\r\n        artistName: data.artist.name,\r\n        shareCount: data.info.shareCount,\r\n        id: data.artist.id\r\n      };\r\n    }\r\n    function parseSongs(songs: any[]) {\r\n      const _arr: types.IAlbumSongItem[] = [];\r\n\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const {\r\n          al: { name, picUrl },\r\n          ar,\r\n          id,\r\n          dt,\r\n          noCopyrightRcmd,\r\n          alia,\r\n          pop,\r\n          fee\r\n        } = songs[i];\r\n        const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n\r\n        const parsedItem = {\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          id,\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          album: name,\r\n          picUrl,\r\n          name: songs[i].name,\r\n          hasCopyRight: copyright,\r\n          alia: alia.join(\",\"),\r\n          albumId: songs[i].ar.id\r\n        };\r\n        if (copyright) {\r\n          map.current.set(id, parsedItem);\r\n        }\r\n        _arr.push(Object.assign({}, parsedItem, { pop }));\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setSongs([]);\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(\"/album?id=\" + match.params.id);\r\n      !isUnmount && setInfo(parseInfo(data.album));\r\n      !isUnmount && setSongs(parseSongs(data.songs));\r\n      !isUnmount && setPlayDetailMap(map.current);\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    if (match.params.id && current === \"songs\") {\r\n      fetchData();\r\n    }\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [match.params.id, current, setPlayDetailMap]);\r\n\r\n  function itemClick(curr: types.currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  function parseDescription(str: string) {\r\n    const arr = str.split(/(\\n)+/);\r\n\r\n    return arr.map((item, index) => {\r\n      return (\r\n        <p className=\"content\" key={index}>\r\n          {item}\r\n        </p>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"album-top\">\r\n          <div className=\"album-top-left\">\r\n            <img\r\n              src={\r\n                info\r\n                  ? info.picUrl + \"?param=200y200\"\r\n                  : \"https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg\"\r\n              }\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n          <div className=\"album-top-right\">\r\n            <div className=\"album-panel-1\">\r\n              <i></i>\r\n              <span>{info ? info.name : \"\"}</span>\r\n            </div>\r\n            <div className=\"album-panel-2\">\r\n              <ul>\r\n                <li>\r\n                  <PlayCircleOutlined />\r\n                  \r\n                </li>\r\n                <li>\r\n                  <FolderAddOutlined />\r\n                  \r\n                </li>\r\n                <li>\r\n                  <ShareAltOutlined />\r\n                  ({info ? info.shareCount : \"\"})\r\n                </li>\r\n                <li>\r\n                  <DownloadOutlined />\r\n                  \r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"album-panel-3\">\r\n              <p>\r\n                :\r\n                <span\r\n                  className=\"singer-name\"\r\n                  onClick={() => toSingerDetail(info!.id)}\r\n                >\r\n                  {info ? info.artistName : \"\"}\r\n                </span>\r\n              </p>\r\n              <p>\r\n                :\r\n                <span>\r\n                  {info ? parseDate(\"YYYY-mm-dd\", info.publishTime) : \"\"}\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ul className=\"album-nav\">\r\n          <li\r\n            onClick={() => itemClick(\"songs\")}\r\n            className={current === \"songs\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"comments\")}\r\n            className={current === \"comments\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"albumInfo\")}\r\n            className={current === \"albumInfo\" ? \"sele\" : \"\"}\r\n          >\r\n            \r\n          </li>\r\n        </ul>\r\n        {current === \"songs\" && <AlbumSongs songs={songs} loading={loading} />}\r\n        {current === \"comments\" && (\r\n          <Comments type=\"album\" id={match.params.id} />\r\n        )}\r\n        {current === \"albumInfo\" && (\r\n          <div className=\"album-info\">\r\n            <div className=\"title\"></div>\r\n            {info ? parseDescription(info.description) : \"\"}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(React.memo(Album));\r\n","import Mylove from \"./mylove\";\r\n\r\nexport default Mylove;\r\n\r\nexport * from \"./mylove\";\r\n","import React, { useEffect, useState } from \"react\";\r\nimport SongSheet from \"../../common/PlaylistInfo/components/songsheet\";\r\nimport * as types from \"./type\";\r\nimport axios from \"../../network\";\r\nimport { match } from \"react-router-dom\";\r\n\r\n// const uid = \"1425924625\";\r\n// const imgUrl =\r\n//   \"https://p4.music.126.net/ydi3P1xDFrrzbXrPZIwmBA==/109951164806102901.jpg?param=200y200\";\r\n// const userName = \"HolypureV\";\r\n\r\nconst Mylove: React.FC<types.MyloveProps> = (props) => {\r\n  const { userName, avatarUrl } = props;\r\n  const _match = props.match as match<{ id: string }>;\r\n  const [trackIds, setTrackIds] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parse(data: any) {\r\n      const arr: string[] = [];\r\n      for (let i = 0; i < data.trackIds.length; i++) {\r\n        const item = data.trackIds[i];\r\n        arr.push(item.id);\r\n      }\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\r\n        \"/playlist/detail?id=\" + _match.params.id\r\n      );\r\n      !isUnmount && setTrackIds(parse(data.playlist));\r\n    }\r\n\r\n    if (_match.params.id) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [_match.params.id]);\r\n\r\n  return (\r\n    <div className=\"mylove\">\r\n      <div>\r\n        <div className=\"mylove-top clearfix\">\r\n          <div className=\"profile\">\r\n            {avatarUrl && <img src={avatarUrl + \"?param=200y200\"} alt=\"\" />}\r\n          </div>\r\n          <div className=\"main\">\r\n            <div className=\"panel-1\">\r\n              <span className=\"tag\"></span>\r\n              <span className=\"title\"></span>\r\n            </div>\r\n            <div className=\"panel-2\">\r\n              <span className=\"prefix\">: </span>\r\n              <span className=\"name\">{userName}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mylove-playlist\">\r\n          <SongSheet trackIds={trackIds} keywords=\"\" show={true} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(Mylove);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"../../common/Header\";\r\nimport SignIn from \"../../common/SignIn\";\r\nimport { Layout, Menu, message } from \"antd\";\r\nimport { CustomerServiceOutlined, UnderlineOutlined } from \"@ant-design/icons\";\r\nimport SearchMusic from \"../SearchMusic\";\r\nimport Player from \"../../common/Player\";\r\nimport SongDetail from \"../../common/SongDetail\";\r\nimport MoreComments from \"../../common/comments/moreComments\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport PlayList from \"../PlayList\";\r\nimport SingerDetail from \"../SingerDetail\";\r\nimport MV from \"../MV\";\r\nimport SearchResult from \"../SearchResult\";\r\nimport Album from \"../Album\";\r\nimport { Route, Link, Switch, useHistory, Redirect } from \"react-router-dom\";\r\nimport { KeepAlive, createContext } from \"react-activation\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport Mylove from \"../Mylove\";\r\nimport axios from \"../../network\";\r\n\r\nexport interface HomeProps {\r\n  userState: boolean;\r\n  userId: string;\r\n  userName: string;\r\n  avatarUrl: string;\r\n}\r\n\r\nexport interface HistoryStackProps {\r\n  prev?: HistoryStackProps;\r\n  next?: HistoryStackProps;\r\n  name: string;\r\n}\r\n\r\nexport interface IMylove {\r\n  name: string;\r\n  id: string;\r\n}\r\n\r\nexport const SetHistoryStackContext = createContext<{\r\n  setHistoryStack: (\r\n    type: \"prev\" | \"next\" | \"push\" | \"remove\" | \"clear\",\r\n    name: string\r\n  ) => void;\r\n}>({\r\n  setHistoryStack: () => {}\r\n});\r\n\r\nconst Home: React.FC<HomeProps> = (props) => {\r\n  const { userId, userName, avatarUrl } = props;\r\n  const [current, setCurrent] = useState(\"recommend\");\r\n  const [historyStack, setHistoryStack] = useState<HistoryStackProps>({\r\n    name: \"recommend\"\r\n  });\r\n  const [myloves, setMyloves] = useState<IMylove[]>([]);\r\n  const history = useHistory();\r\n  const passedSetHistoryStack: {\r\n    setHistoryStack: (\r\n      type: \"prev\" | \"next\" | \"push\" | \"remove\" | \"clear\",\r\n      name: string\r\n    ) => void;\r\n  } = {\r\n    setHistoryStack(type, name) {\r\n      switch (type) {\r\n        case \"push\": {\r\n          const item: HistoryStackProps = {\r\n            name,\r\n            prev: historyStack\r\n          };\r\n          historyStack.next = item;\r\n          setHistoryStack(item);\r\n          break;\r\n        }\r\n        case \"next\": {\r\n          setHistoryStack(historyStack.next as HistoryStackProps);\r\n          break;\r\n        }\r\n        case \"prev\": {\r\n          setHistoryStack(historyStack.prev as HistoryStackProps);\r\n          break;\r\n        }\r\n        case \"remove\": {\r\n          if (name === \"prev\") {\r\n            if (historyStack.prev) {\r\n              historyStack.prev.next = undefined;\r\n              setHistoryStack(historyStack.prev as HistoryStackProps);\r\n            }\r\n          } else {\r\n            if (historyStack.next) {\r\n              historyStack.next.next = undefined;\r\n              setHistoryStack(historyStack.next as HistoryStackProps);\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case \"clear\": {\r\n          historyStack.prev = undefined;\r\n          historyStack.next = undefined;\r\n          historyStack.name = \"recommend\";\r\n          setHistoryStack(historyStack);\r\n          break;\r\n        }\r\n        default:\r\n          return;\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    function handleOffline() {\r\n      console.log(\"offline\");\r\n      message.error({\r\n        content: \",  !!\",\r\n        duration: 0\r\n      });\r\n    }\r\n\r\n    function handleOnline() {\r\n      console.log(\"online\");\r\n      message.destroy();\r\n      message.success({\r\n        content: \" !!\",\r\n        duration: 1\r\n      });\r\n    }\r\n    window.addEventListener(\"offline\", handleOffline);\r\n    window.addEventListener(\"online\", handleOnline);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchData() {\r\n      axios.get(\"/user/playlist?uid=\" + userId).then(({ data }) => {\r\n        const arr: IMylove[] = [];\r\n        const playlists = data.playlist as any[];\r\n        for (let i = 0; i < playlists.length; i++) {\r\n          const item = playlists[i];\r\n          arr.push({\r\n            name: item.name,\r\n            id: item.id\r\n          });\r\n        }\r\n        setMyloves(arr);\r\n      });\r\n    }\r\n\r\n    if (userId) fetchData();\r\n    else {\r\n      setMyloves([]);\r\n      setCurrent(\"recommend\");\r\n    }\r\n  }, [userId]);\r\n\r\n  function handleItemClick(e: any) {\r\n    const key = e.key as string;\r\n    const keyarr = key.split(\" \");\r\n    if (keyarr.length === 2) {\r\n      history.push(`/${keyarr[0]}/${keyarr[1]}`);\r\n      passedSetHistoryStack.setHistoryStack(\"push\", keyarr[0]);\r\n      setCurrent(key);\r\n      return;\r\n    }\r\n    history.push(`/${key === \"recommend\" ? \"\" : key}`);\r\n    passedSetHistoryStack.setHistoryStack(\"push\", key);\r\n    setCurrent(key);\r\n  }\r\n\r\n  function returnMyLoves() {\r\n    return myloves.map((love) => {\r\n      return (\r\n        <Menu.Item\r\n          title={love.name}\r\n          icon={<UnderlineOutlined />}\r\n          key={\"mylove \" + love.id}\r\n        >\r\n          {love.name}\r\n        </Menu.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n        <Header historyStack={historyStack} />\r\n      </SetHistoryStackContext.Provider>\r\n      <SignIn />\r\n      <Layout style={{ overflow: \"hidden\" }}>\r\n        <Layout.Sider className=\"home-sider\">\r\n          <Menu selectedKeys={[current]} onClick={handleItemClick}>\r\n            <Menu.ItemGroup title=\"\">\r\n              <Menu.Item\r\n                title=\"\"\r\n                icon={<CustomerServiceOutlined />}\r\n                key=\"recommend\"\r\n              >\r\n                <Link to=\"/\"></Link>\r\n              </Menu.Item>\r\n            </Menu.ItemGroup>\r\n            <Menu.ItemGroup title=\"()\">\r\n              {returnMyLoves()}\r\n            </Menu.ItemGroup>\r\n          </Menu>\r\n          <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n            <SongDetail />\r\n          </SetHistoryStackContext.Provider>\r\n        </Layout.Sider>\r\n        <Layout.Content className=\"home-content\">\r\n          <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n            <Switch>\r\n              <Route path=\"/mylove/:id\">\r\n                {(render) =>\r\n                  userId ? (\r\n                    <KeepAlive name=\"mylove\">\r\n                      <Mylove\r\n                        match={render.match!}\r\n                        avatarUrl={avatarUrl}\r\n                        userName={userName}\r\n                      />\r\n                    </KeepAlive>\r\n                  ) : (\r\n                    <Redirect to=\"/\" />\r\n                  )\r\n                }\r\n              </Route>\r\n              <Route path=\"/moreComments/:type/:id\">\r\n                {(render) => <MoreComments match={render.match!} />}\r\n              </Route>\r\n              <Route path=\"/singerDetail/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"album\">\r\n                    <SingerDetail match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/mv/:id\">\r\n                {(render) => (\r\n                  <CSSTransition\r\n                    in={render.location.pathname.includes(\"mv\")}\r\n                    timeout={200}\r\n                    mountOnEnter\r\n                    classNames={{\r\n                      enter: \"animate__animated\",\r\n                      enterActive: \"animate__fadeIn\"\r\n                    }}\r\n                    unmountOnExit\r\n                  >\r\n                    <MV match={render.match!} />\r\n                  </CSSTransition>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/album/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"album\">\r\n                    <Album match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/playlist/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"playlist\">\r\n                    <PlayList match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/searchResult/:keywords\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"searchResult\">\r\n                    <SearchResult match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/\">\r\n                <SearchMusic />\r\n              </Route>\r\n            </Switch>\r\n          </SetHistoryStackContext.Provider>\r\n        </Layout.Content>\r\n      </Layout>\r\n      <Layout.Footer className=\"home-footer\">\r\n        <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n          <Player />\r\n        </SetHistoryStackContext.Provider>\r\n      </Layout.Footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const header = state.header;\r\n\r\n  return {\r\n    userState: header.userState,\r\n    userId: header.user.userId,\r\n    userName: header.user.nickname,\r\n    avatarUrl: header.user.avatarUrl\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(Home));\r\n","import Home from \"./home\";\r\n\r\nexport default Home;\r\n\r\nexport * from \"./home\";\r\n","import React from \"react\";\nimport Home from \"./pages/Home\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { HeaderActionType } from \"./actionType\";\r\nimport { SET_USER_INFO, UPDATE_USER_STATE, USER_LOG_OUT } from \"./actionType\";\r\n\r\nconst defaultState: HeaderStoreStateProps = {\r\n  userState: false,\r\n  user: {\r\n    avatarUrl: \"\",\r\n    nickname: \"\",\r\n    userId: \"\"\r\n  }\r\n};\r\n\r\nfunction reset(state: HeaderStoreStateProps) {\r\n  state.userState = false;\r\n  state.user.avatarUrl = \"\";\r\n  state.user.nickname = \"\";\r\n  state.user.userId = \"\";\r\n  return state;\r\n}\r\n\r\nconst HeaderReducer = (state = defaultState, action: HeaderActionType) => {\r\n  switch (action.type) {\r\n    case SET_USER_INFO: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.user = action.user;\r\n      return newState;\r\n    }\r\n    case UPDATE_USER_STATE: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.userState = action.state;\r\n      return newState;\r\n    }\r\n    case USER_LOG_OUT: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      return reset(newState);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default HeaderReducer;\r\n","import Reducer from \"./reducer\";\r\n\r\nexport default Reducer;\r\n","import SignInReducer from \"./reducer\";\r\n\r\nexport default SignInReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport HeadeReducer from \"../common/Header/store\";\r\nimport SignInReducer from \"../common/SignIn/store\";\r\nimport PlayerReducer from \"../common/Player/store\";\r\n\r\nexport default combineReducers({\r\n  header: HeadeReducer,\r\n  signIn: SignInReducer,\r\n  player: PlayerReducer\r\n});\r\n","//@ts-nocheck\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducer\";\r\nimport UnionStateTypes from \"./stateType\";\r\n\r\nconst composeEnhancers =\r\n  typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\n\r\nconst store = createStore(reducer, enhancer);\r\n\r\nexport { UnionStateTypes };\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"antd/dist/antd.min.css\";\nimport \"./styles/index.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"animate.css\";\nimport { AliveScope } from \"react-activation\";\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <HashRouter>\n      <AliveScope>\n        <App />\n      </AliveScope>\n    </HashRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}