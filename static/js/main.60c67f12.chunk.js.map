{"version":3,"sources":["hooks/useDebounce.ts","network/index.ts","common/SearchContent/searchKeywords.tsx","common/SearchContent/hotSearchList.tsx","common/SearchContent/index.tsx","common/SearchContent/searchContent.tsx","common/SearchInput/searchInput.tsx","common/SearchInput/index.tsx","common/SignIn/store/reducer.ts","common/SignIn/store/actionCreator.ts","common/Header/index.tsx","common/Header/header.tsx","common/Header/store/actionCreator.ts","common/Header/store/actionType.ts","common/SignIn/signIn.tsx","common/SignIn/index.tsx","common/Swipe/dots.tsx","common/Swipe/swipe.tsx","common/Swipe/swipeItem.tsx","common/Swipe/index.tsx","pages/Recommend/components/title.tsx","utils/parsePlayCount.ts","utils/parseDate.ts","utils/parseTime.ts","utils/mergeSingers.ts","utils/parseLyrics.ts","utils/parseCopyright.ts","common/Lazyload/index.tsx","common/PlayListItem/index.tsx","common/PlayListItem/playListItem.tsx","pages/MainTabs/index.tsx","pages/MainTabs/mainTabs.tsx","pages/Recommend/index.tsx","pages/Recommend/recommend.tsx","pages/TotalPlaylists/categoryItem.tsx","pages/TotalPlaylists/allCategories.tsx","pages/TotalPlaylists/totalPlaylists.tsx","pages/TotalPlaylists/index.tsx","pages/Rank/officialRankItem.tsx","pages/Rank/index.tsx","pages/Rank/rank.tsx","pages/SingerRank/singerRankItem.tsx","pages/SingerRank/singerRank.tsx","pages/SingerRank/index.tsx","pages/SearchMusic/index.tsx","pages/SearchMusic/searchMusic.tsx","common/Player/progress.tsx","common/Player/store/reducer.ts","common/Player/store/actionCreator.ts","common/Player/store/actionType.ts","common/Player/store/index.ts","common/Player/willPlayTable.tsx","common/Player/willPlayList.tsx","common/Player/player.tsx","common/Player/index.tsx","common/Player/mapToProps.ts","common/comments/commentItem.tsx","common/comments/comments.tsx","common/comments/index.tsx","common/SimiPlaylist/simiPlaylistItem.tsx","common/SimiPlaylist/index.tsx","common/SimiPlaylist/simiPlaylist.tsx","common/SongDetail/songDetailContent.tsx","common/SongDetail/index.tsx","common/SongDetail/songDetail.tsx","common/comments/moreComments.tsx","common/PlaylistInfo/components/songsheet.tsx","common/PlaylistInfo/index.tsx","common/PlaylistInfo/playlistInfo.tsx","pages/PlayList/index.tsx","pages/PlayList/PlayList.tsx","pages/SingerDetail/singerAlbumItem.tsx","pages/SingerDetail/singerAlbumDetail.tsx","pages/SingerDetail/singerAlbum.tsx","pages/SingerDetail/singerInfo.tsx","pages/SingerDetail/singerMVItem.tsx","pages/SingerDetail/singerMV.tsx","pages/SingerDetail/simiSingers.tsx","pages/SingerDetail/index.tsx","pages/SingerDetail/singerDetail.tsx","pages/MV/index.tsx","pages/MV/mv.tsx","pages/SearchResult/resultOfPagination.tsx","pages/SearchResult/resultOfSongs.tsx","pages/SearchResult/resultOfSingers.tsx","pages/SearchResult/resultOfAlbums.tsx","pages/SearchResult/resultOfMVs.tsx","pages/SearchResult/resultOfPlaylists.tsx","pages/SearchResult/searchResult.tsx","pages/SearchResult/index.tsx","pages/Album/albumSongs.tsx","pages/Album/index.tsx","pages/Album/album.tsx","pages/Mylove/index.tsx","pages/Mylove/mylove.tsx","pages/Home/home.tsx","pages/Home/index.tsx","App.tsx","serviceWorker.ts","common/Header/store/reducer.ts","common/Header/store/index.ts","common/SignIn/store/index.ts","store/reducer.ts","store/index.ts","index.tsx"],"names":["useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","axios","defaults","baseURL","withCredentials","interceptors","response","use","error","Promise","resolve","React","memo","props","songs","albums","artists","playlists","data","setData","context","useContext","SetHistoryStackContext","history","useHistory","isUnmount","parseAlbums","Array","_arr","i","length","item","push","name","singerName","artist","id","parseArtists","parsePlaylists","a","get","result","fetchData","className","UserOutlined","map","key","onClick","setHistoryStack","SearchInputContext","arr","hots","first","str","changeValue","SearchContent","createContext","SearchInput","placeholder","onChange","style","debounce","suffixIcon","suffix","onSearch","classes","classnames","inputValue","setValue","isFocused","setFocused","passedSearchInputContext","useCallback","handleSearchClick","type","e","target","onFocus","onBlur","onKeyUp","Provider","defaultProps","displayName","defaultState","show","getChangeSignInShowAction","Header","connect","state","header","user","userState","dispatch","changeSignInShow","flag","action","handleUserLogOut","historyStack","nickname","avatarUrl","visible","setVisible","dropScope","useAliveController","href","preventDefault","prev","goBack","LeftOutlined","next","goForward","RightOutlined","float","marginLeft","keywords","src","alt","title","cancelText","okText","onConfirm","replace","SignIn","Form","useForm","form","handleUserLogin","onBack","padding","Item","rules","required","message","initialValue","prefix","MobileOutlined","allowClear","Password","LockOutlined","validateFields","then","values","phone","password","signIn","params","loading","content","duration","querystring","res","destroy","profile","userId","getSetUserInfoAction","success","onClose","sessionStorage","setItem","catch","Dots","passedContext","currIndex","count","leave","isActive","onMouseEnter","index","hover","onMouseLeave","renderChildren","Swipe","children","useRef","timer","playState","changePlayState","changeIndex","passedContextValue","current","undefined","Children","child","_child","cloneElement","console","unshift","RenderChildren","SwipeItem","posClass","ExportComponent","moreClick","playCount","parseInt","fmt","time","ret","date","Date","opt","getFullYear","toString","getMonth","getDate","getHours","getMinutes","getSeconds","k","RegExp","exec","padStart","totalSeconds","minute","seconds","singers","singer","reg","noCopyRight","fee","log","imgRef","io","IntersectionObserver","entries","forEach","isIntersecting","unobserve","Image","_io","observe","disconnect","ref","PlayListItem","picUrl","copywriter","CustomerServiceOutlined","parsePlayCount","PlayCircleOutlined","MainTabs","mode","selectedKeys","Recommend","banners","setBanners","recPlaylistItems","setRecPlaylistItems","_banners","banner","imageUrl","now","recommend","_data","margin","marginTop","icon","categoryName","currCategory","hot","iconclass","categories","changeCategory","changeShow","extendDropdown","handleClick","category","DownOutlined","toArray","obj","TotalPlaylists","match","setCurrCategory","setCategories","hotCategories","setHotCategories","setLoading","setPlaylists","page","limit","queryParams","setQueryParams","pagination","setPagination","defaultPagination","defaultCurrent","defaultPageSize","hideOnSinglePage","size","showSizeChanger","wrapperRef","wrapper","handleWrapperClick","classList","contains","addEventListener","removeEventListener","parseCategoryArray","arrItem","_categories","_categoriesArr","sub","neededArr","parsedArr","filter","tags","fetchAllCategoriesData","fetchHotCategoriesData","fetchUrl","offset","_playlists","coverImgUrl","total","fetchPlaylistData","LoadingOutlined","playlist","display","tracks","updateTime","handleItemClick","backgroundImage","track","second","parseDate","Rank","officialRankData","setOfficialRankData","globalRankData","setGlobalRankData","parseOfficialRank","parseToplist","coverUrl","parseGlobalRank","list","toplist","artistToplist","officialData","slice","globalData","concat","fetchRankData","lastRank","score","totalScore","width","typeMap","Map","set","SingerRank","currType","setCurrType","singerData","setSingerData","setUpdateTime","hanldeTabItemClick","parseArtist","SearchMusic","returnTransition","el","path","_path","location","CSSTransition","in","pathname","includes","timeout","mountOnEnter","unmountOnExit","classNames","enter","enterActive","exit","exitActive","render","max","onChanging","sliderRef","parseTime","onAfterChange","blur","defaultValue","tipFormatter","playLyricMap","playDetailMap","playUrlMap","playQueue","willPlayQueue","willplaylistId","clone","newState","JSON","parse","stringify","getPushPlayQueueAction","shouldCover","playlistId","getSetPlayUrlMapAction","url","getSetPlayLyricMapAction","lyric","getSetPlayDetailMapAction","items","getChangePlayIndexAction","getChangePlayStateAction","fetchPlayUrl","queryUrl","Reducer","window","audio","pause","splice","indexOf","player","changePlayIndex","pushPlayQueue","ids","DeleteOutlined","dataSource","showHeader","rowKey","record","showSorterTooltip","scroll","y","onRow","onDoubleClick","Column","SoundFilled","dataIndex","playModeArr","playMode","Player","changePlayId","getChangePlayIdAction","isplayed","setPlayed","volumn","setVolumn","setMax","timerRef","refresh","setRefresh","changePlayMode","willShow","setWillShow","handleOrderPlay","handleRandomPlay","handleRepeatPlay","currentTime","number","Math","floor","random","isNext","onChangePlayState","play","setInterval","clearInterval","document","getElementById","StepBackwardFilled","paused","PauseCircleFilled","PlayCircleFilled","StepForwardFilled","step","volume","onChangePlayMode","onCanPlay","onEnded","beReplied","likedCount","reply","beRepliedCommentId","LikeOutlined","parseReplied","_beReplied","element","replied","parseComments","comments","_comments","comment","commentId","Comments","ChangeSignInShow","restCount","setRestCount","popComments","setPopComments","newComments","setNewComments","moreHot","setMoreHot","popCommentsShow","setPopCommentsShow","$textarea","top","$homeContent","getElementsByClassName","hotComments","fetchComments","rows","maxLength","_type","mapTypeToNum","commentItem","SimiPlaylist","itemArray","setItemArray","textAlign","indicator","tip","lyricStr","fetchPlayLyric","queryLyric","lrc","withRouter","songDetail","hide","useMemo","hidden","scrollRef","scrollInnerRef","lyrics","setLyrics","currLyricIndex","changeCurrLyricIndex","groups","parseFloat","trim","parseLyrics","scrollTo","dis","currlyric","prevIndex","offsetTop","scrollPrev","nextIndex","scrollNext","HeartFilled","FolderAddOutlined","DownloadOutlined","ShareAltOutlined","ShrinkOutlined","alia","albumId","album","SongDetail","contentShow","setContentShow","ArrowsAltOutlined","setComments","hasMore","setHasMore","isReachBottom","setReachBottom","handleScroll2Bottom","scrollTop","offsetHeight","scrollHeight","SongSheet","trackIds","setPlayDetailMap","willPlaylistId","trackIdsRef","tableData","setTableData","tableDataRef","trackids","parseSong","song","al","ar","dt","noCopyrightRcmd","copyright","parseCopyright","mergeSingers","hasCopyRight","idsStr","join","_tableData","dispatchedMap","parsedSong","Object","assign","fetchSongsInfo","bordered","handleDoubleClick","align","HeartOutlined","ellipsis","sorter","b","clickAndPushAll","PlaylistInfo","setCurrent","setKeywords","itemClick","curr","PlayList","collapse","setCollapse","info","setInfo","detail","setDetail","isAdded","parseSubscriber","subscribers","_subscribers","subscriber","parseInfo","parseDetail","creator","description","subscribedCount","shareCount","createTime","commentCount","trackCount","fetchPlaylistInfo","UpOutlined","warn","tag","FireFilled","marginRight","selected","isPlayed","onDbClick","SingerAlbumDetail","needExpand","top50","selectedIndex","changeSelectedIndex","albumData","setAlbumData","expand","setExpand","onlyPushOnce","parseSongs","_map","hanldeDoubleClick","setAlbums","more","setOffset","firstRequest","setFirstRequest","handleScroll","returnUrl","hotAlbums","desc","setDesc","parseDesc","briefDesc","introduction","ti","txt","split","VideoCameraOutlined","mvs","setMVs","parsemvs","imgurl16v9","simiSingers","setSimiSingers","parseData","img1v1Url","SingerDetail","songsCount","setSongsCount","albumsCount","setAlbumsCount","setSingerName","setPicUrl","albumSize","fetchSingerSongsCount","fetchSingerAlbums","MV","setUrl","parseMVInfo","publishTime","urlData","infoData","go","Fragment","controls","handlePageSizeChange","attrs","urlMap","setSearchCount","setSongs","setShow","pop","parsedItem","songCount","setSingers","artistCount","singerId","albumCount","parseMVs","cover","mvCount","creatorName","playlistCount","typeArr","SearchResult","setCurr","searchCount","setCount","num","changeLoading","Album","artistName","Mylove","userName","_match","setTrackIds","Home","myloves","setMyloves","passedSetHistoryStack","overflow","Sider","keyarr","ItemGroup","to","love","UnderlineOutlined","Content","Footer","App","Boolean","hostname","reset","SignInReducer","combineReducers","HeadeReducer","PlayerReducer","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","reducer","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.60c67f12.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useDebounce = (value: any, delay = 400) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [delay, value]);\r\n  return debouncedValue;\r\n};\r\n\r\nexport default useDebounce;\r\n","import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"http://localhost:3001\";\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    return Promise.resolve(false);\r\n  }\r\n);\r\n\r\nexport default axios;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport * as types from \"./type\";\r\nimport { UserOutlined } from \"@ant-design/icons\";\r\nimport axios from \"../../network\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SearchKeywords: React.FC<SearchKeywordsProps> = (props) => {\r\n  const { value } = props;\r\n  const [data, setData] = useState<types.ISearchSuggestions>({\r\n    songs: [],\r\n    albums: [],\r\n    artists: [],\r\n    playlists: []\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleSingerClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"sinerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePlaylistClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function handleAlbumClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  // function handleSongClick() {\r\n\r\n  // }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseSongs(songs: any[]) {\r\n      if (!(songs instanceof Array)) return [];\r\n      const _arr: types.IISongItem[] = [];\r\n\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const item = songs[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          singerName: (item.artists as any[])\r\n            .map((el) => {\r\n              return el.name;\r\n            })\r\n            .join(\" \"),\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parseAlbums(albums: any[]) {\r\n      if (!(albums instanceof Array)) return [];\r\n      const _arr: types.IIAlbumItem[] = [];\r\n\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          singerName: item.artist.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parseArtists(artists: any[]) {\r\n      if (!(artists instanceof Array)) return [];\r\n      const _arr: types.IIArtistItem[] = [];\r\n\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function parsePlaylists(playlists: any[]) {\r\n      if (!(playlists instanceof Array)) return [];\r\n      const _arr: types.IIPlaylistItem[] = [];\r\n\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = playlists[i];\r\n\r\n        _arr.push({\r\n          name: item.name,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/search/suggest?keywords=\" + value);\r\n      // !isUnmount &&\r\n      //   setData({\r\n      //     playlists: parsePlaylists(data.result.playlists),\r\n      //     songs: parseSongs(data.result.songs),\r\n      //     albums: parseAlbums(data.result.albums),\r\n      //     artists: parseArtists(data.result.artists)\r\n      //   });\r\n      !isUnmount &&\r\n        setData({\r\n          playlists: parsePlaylists(data.result.playlists),\r\n          songs: [],\r\n          albums: parseAlbums(data.result.albums),\r\n          artists: parseArtists(data.result.artists)\r\n        });\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [value]);\r\n\r\n  return (\r\n    <div className=\"search-keywords\">\r\n      <div className=\"search-keywords-title\">\r\n        搜“<span>{value}</span>”相关的结果\r\n      </div>\r\n      {data.artists.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <UserOutlined />\r\n            歌手\r\n          </div>\r\n          {data.artists.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handleSingerClick(item.id)}\r\n              >\r\n                {item.name}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      {/* {data.songs.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-music_note\" />\r\n            单曲\r\n          </div>\r\n          {data.songs.map((item) => {\r\n            return (\r\n              <div className=\"search-item\" key={item.id}>\r\n                {item.name + \"-\" + item.singerName}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )} */}\r\n      {data.albums.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-changpian1\" />\r\n            专辑\r\n          </div>\r\n          {data.albums.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handleAlbumClick(item.id)}\r\n              >\r\n                {item.name + \"-\" + item.singerName}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      {data.playlists.length !== 0 && (\r\n        <div className=\"search-keywords-item\">\r\n          <div className=\"search-keywords-item-title\">\r\n            <i className=\"iconfont icon-gedan\" />\r\n            歌单\r\n          </div>\r\n          {data.playlists.map((item) => {\r\n            return (\r\n              <div\r\n                className=\"search-item\"\r\n                key={item.id}\r\n                onClick={() => handlePlaylistClick(item.id)}\r\n              >\r\n                {item.name}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchKeywords);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { SearchInputContext } from \"../SearchInput\";\r\n\r\nconst HotSearchContent: React.FC<HotSearchContentProps> = () => {\r\n  const [data, setData] = useState<string[]>([]);\r\n  const context = useContext(SearchInputContext);\r\n\r\n  function handleItemClick(str: string) {\r\n    context.changeValue(str);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/search/hot\");\r\n      const arr = data.result.hots as any[];\r\n\r\n      !isUnmount &&\r\n        setData(\r\n          arr.map((item) => {\r\n            return item.first;\r\n          })\r\n        );\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"hot-search-content\">\r\n      <div className=\"hot-search-content-title\">热门搜索</div>\r\n      {data.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"search-item\"\r\n            key={item}\r\n            onClick={() => handleItemClick(item)}\r\n          >\r\n            {item}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(HotSearchContent);\r\n","import SearchContent from \"./searchContent\";\r\n\r\nexport default SearchContent;\r\n","import React from \"react\";\r\nimport SearchKeywords from \"./searchKeywords\";\r\nimport HotSearchContent from \"./hotSearchList\";\r\n\r\nconst SearchContent: React.FC<SearchContentProps> = (props) => {\r\n  const { value } = props;\r\n\r\n  return (\r\n    <div className=\"zsw-search-content\">\r\n      {value && <SearchKeywords value={value} />}\r\n      {!value && <HotSearchContent />}\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(SearchContent);\r\n","import React, {\r\n  useState,\r\n  ChangeEvent,\r\n  useEffect,\r\n  useCallback,\r\n  createContext\r\n} from \"react\";\r\nimport classnames from \"classnames\";\r\nimport useDebounce from \"../../hooks/useDebounce\";\r\nimport SearchContent from \"../SearchContent\";\r\n\r\ninterface SearchInputProps {\r\n  style?: React.CSSProperties;\r\n  onChange?: (value: any) => void;\r\n  className?: string;\r\n  placeholder?: string;\r\n  debounce?: boolean;\r\n  value?: string;\r\n  suffix?: boolean;\r\n  suffixIcon?: string;\r\n  onSearch?: (keywords: string) => void;\r\n}\r\n\r\ninterface ISearchInputContext {\r\n  changeValue: (str: string) => void;\r\n}\r\n\r\nexport const SearchInputContext = createContext<ISearchInputContext>({\r\n  changeValue: () => {}\r\n});\r\n\r\nconst SearchInput: React.FC<SearchInputProps> = (props) => {\r\n  const {\r\n    placeholder,\r\n    className,\r\n    onChange,\r\n    style,\r\n    debounce,\r\n    value,\r\n    suffixIcon,\r\n    suffix,\r\n    onSearch\r\n  } = props;\r\n  const classes = classnames(\"zsw-input\", className);\r\n  const [inputValue, setValue] = useState(value);\r\n  const debouncedValue = useDebounce(inputValue);\r\n  const [isFocused, setFocused] = useState(false);\r\n\r\n  const changeValue = useCallback((value: string) => {\r\n    setValue(value);\r\n  }, []);\r\n\r\n  const passedSearchInputContext: ISearchInputContext = {\r\n    changeValue\r\n  };\r\n\r\n  function handleInput(e: ChangeEvent<HTMLInputElement>) {\r\n    const value = e.target.value;\r\n    setValue(value);\r\n    if (!debounce && onChange) onChange(value);\r\n  }\r\n\r\n  function handleSearchClick() {\r\n    if (inputValue) {\r\n      onSearch && onSearch(inputValue);\r\n    }\r\n  }\r\n\r\n  function handleFocus() {\r\n    setFocused(true);\r\n  }\r\n\r\n  function handleBlur() {\r\n    setTimeout(() => {\r\n      setFocused(false);\r\n    }, 200);\r\n  }\r\n\r\n  function handleKeyUp(e: React.KeyboardEvent) {\r\n    if (e.key === \"Enter\") {\r\n      handleSearchClick();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (onChange && debounce) onChange(debouncedValue);\r\n  }, [onChange, debouncedValue, debounce]);\r\n\r\n  return (\r\n    <div className={classes} style={style}>\r\n      <input\r\n        type=\"text\"\r\n        onChange={handleInput}\r\n        placeholder={placeholder}\r\n        value={inputValue || \"\"}\r\n        onFocus={handleFocus}\r\n        onBlur={handleBlur}\r\n        onKeyUp={handleKeyUp}\r\n      />\r\n      {suffix && (\r\n        <i\r\n          className={suffixIcon + \" suffix-icon\"}\r\n          onClick={handleSearchClick}\r\n        />\r\n      )}\r\n      <SearchInputContext.Provider value={passedSearchInputContext}>\r\n        {isFocused && <SearchContent value={inputValue ? inputValue : \"\"} />}\r\n      </SearchInputContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearchInput.defaultProps = {\r\n  debounce: true,\r\n  suffixIcon: \"iconfont icon-xianxingtubiaozhizuomoban-20\",\r\n  suffix: true\r\n};\r\n\r\nSearchInput.displayName = \"SearchInput\";\r\n\r\nexport default React.memo(SearchInput);\r\n","import SearchInput from \"./searchInput\";\r\n\r\nexport default SearchInput;\r\n\r\nexport * from \"./searchInput\";\r\n","const defaultState: SignInStoreStateProps = {\r\n  show: false\r\n};\r\n\r\nexport const CHANGE_SIGNIN_SHOW = \"change_signIn_show\";\r\ntype CHANGE_SIGNIN_SHOW_TYPE = typeof CHANGE_SIGNIN_SHOW;\r\n\r\nexport interface ChangeSignInShowType {\r\n  type: CHANGE_SIGNIN_SHOW_TYPE;\r\n  show: boolean;\r\n}\r\n\r\nexport default (state = defaultState, action: ChangeSignInShowType) => {\r\n  switch (action.type) {\r\n    case CHANGE_SIGNIN_SHOW: {\r\n      const newState: SignInStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.show = action.show;\r\n      return newState;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ChangeSignInShowType, CHANGE_SIGNIN_SHOW } from \"./reducer\";\r\n\r\nexport const getChangeSignInShowAction = (\r\n  show: boolean\r\n): ChangeSignInShowType => {\r\n  return {\r\n    type: CHANGE_SIGNIN_SHOW,\r\n    show\r\n  };\r\n};\r\n","import Header from \"./header\";\r\n\r\nexport default Header;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Popconfirm } from \"antd\";\r\nimport SearchInput from \"../SearchInput\";\r\nimport { UserOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { getChangeSignInShowAction } from \"../SignIn/store/actionCreator\";\r\nimport { HistoryStackProps } from \"../../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport { getUserLogOutAction } from \"./store/actionCreator\";\r\nimport { useAliveController } from \"react-activation\";\r\n\r\ninterface HeaderProps extends HeaderStoreStateProps {\r\n  changeSignInShow: (flag: boolean) => void;\r\n  historyStack: HistoryStackProps;\r\n  handleUserLogOut: () => void;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = (props) => {\r\n  const {\r\n    userState,\r\n    user,\r\n    changeSignInShow,\r\n    historyStack,\r\n    handleUserLogOut\r\n  } = props;\r\n  const { nickname, avatarUrl } = user;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const [visible, setVisible] = useState(false);\r\n  const { dropScope } = useAliveController();\r\n\r\n  function enterLogin() {\r\n    if (!userState) {\r\n      return changeSignInShow(true);\r\n    }\r\n    setVisible(!visible);\r\n  }\r\n\r\n  function handlePrevClick() {\r\n    if (!historyStack.prev) return;\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.goBack();\r\n  }\r\n\r\n  function handleNextClick() {\r\n    if (!historyStack.next) return;\r\n    context.setHistoryStack(\"next\", \"\");\r\n    history.goForward();\r\n  }\r\n\r\n  function handleOk() {\r\n    handleUserLogOut();\r\n    history.replace(\"/\");\r\n    context.setHistoryStack(\"clear\", \"\");\r\n    dropScope(/^((?!recommend).)*$/);\r\n  }\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-inner\">\r\n        <a href=\"/\" className=\"logo\" onClick={(e) => e.preventDefault()}>\r\n          <span className=\" iconfont icon-wangyiyunyinyueclick\"></span>\r\n          <span className=\"name\">网易云音乐</span>\r\n        </a>\r\n        <div className=\"navigators\">\r\n          <div\r\n            className={`navigator-prev ${historyStack.prev ? \"able\" : \"\"}`}\r\n            onClick={handlePrevClick}\r\n          >\r\n            <LeftOutlined />\r\n          </div>\r\n          <div\r\n            className={`navigator-next ${historyStack.next ? \"able\" : \"\"}`}\r\n            onClick={handleNextClick}\r\n          >\r\n            <RightOutlined />\r\n          </div>\r\n        </div>\r\n        <SearchInput\r\n          style={{ float: \"left\", marginLeft: \"4rem\" }}\r\n          placeholder=\"搜索音乐,歌手,歌词,用户\"\r\n          onSearch={(keywords: string) => {\r\n            context.setHistoryStack(\"push\", \"searchResult\");\r\n            history.push(`/searchResult/${keywords}`);\r\n          }}\r\n        />\r\n        <div className=\"user\" onClick={enterLogin}>\r\n          <span className=\"user-img\">\r\n            {avatarUrl ? (\r\n              <img src={avatarUrl} alt=\"\" />\r\n            ) : (\r\n              <UserOutlined className=\"user-icon\" />\r\n            )}\r\n          </span>\r\n          {userState ? (\r\n            <span className=\"user-state user-online\">{nickname}</span>\r\n          ) : (\r\n            <span className=\"user-state user-offline\">未登录</span>\r\n          )}\r\n          <Popconfirm\r\n            visible={visible}\r\n            title=\"确定退出吗\"\r\n            cancelText=\"取消\"\r\n            okText=\"退出\"\r\n            onConfirm={handleOk}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = function (state: UnionStateTypes) {\r\n  const header = state.header;\r\n  return {\r\n    user: header.user,\r\n    userState: header.userState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = function (dispatch: any) {\r\n  return {\r\n    changeSignInShow(flag: boolean) {\r\n      const action = getChangeSignInShowAction(flag);\r\n      dispatch(action);\r\n    },\r\n    handleUserLogOut() {\r\n      const action = getUserLogOutAction();\r\n      dispatch(action);\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Header));\r\n","import {\r\n  HeaderActionType,\r\n  SET_USER_INFO,\r\n  UPDATE_USER_STATE,\r\n  USER_LOG_OUT\r\n} from \"./actionType\";\r\nimport axios from \"../../../network\";\r\nimport { Dispatch } from \"redux\";\r\nimport { message } from \"antd\";\r\nimport { getChangeSignInShowAction } from \"../../SignIn/store/actionCreator\";\r\n\r\nexport const getSetUserInfoAction = (user: UserProps): HeaderActionType => {\r\n  return {\r\n    type: SET_USER_INFO,\r\n    user\r\n  };\r\n};\r\n\r\nexport const getUpdateUserStateAction = (state: boolean): HeaderActionType => {\r\n  return {\r\n    type: UPDATE_USER_STATE,\r\n    state\r\n  };\r\n};\r\n\r\nexport const getUserLogOutAction = (): HeaderActionType => {\r\n  return {\r\n    type: USER_LOG_OUT\r\n  };\r\n};\r\n\r\nexport const userLogIn = (\r\n  params: LoginRequestConfig\r\n): ((dispatch: Dispatch) => void) => {\r\n  return (dispatch) => {\r\n    message.loading({\r\n      content: \"登陆中\",\r\n      duration: 0,\r\n      key: \"loading\"\r\n    });\r\n    const { phone, password } = params;\r\n    const querystring = `/login/cellphone?phone=${phone}&password=${password}`;\r\n    axios\r\n      .get(querystring, {\r\n        withCredentials: true\r\n      })\r\n      .then((res) => {\r\n        message.destroy();\r\n        let { data } = res;\r\n        const user = {} as UserProps;\r\n        const { avatarUrl, nickname, userId } = data.profile;\r\n        user.avatarUrl = avatarUrl;\r\n        user.nickname = nickname;\r\n        user.userId = userId;\r\n        dispatch(getUpdateUserStateAction(true));\r\n        dispatch(getSetUserInfoAction(user));\r\n        message.success({\r\n          content: \"登录成功\",\r\n          duration: 1,\r\n          onClose: () => dispatch(getChangeSignInShowAction(false))\r\n        });\r\n        sessionStorage.setItem(\"islogin\", \"true\");\r\n      })\r\n      .catch(() => {\r\n        message.destroy();\r\n        message.error(\"账号或密码错误\");\r\n      });\r\n  };\r\n};\r\n","export const SET_USER_INFO = \"set_user_info\";\r\ntype SET_USER_INFO_TYPE = typeof SET_USER_INFO;\r\n\r\nexport const USER_LOG_OUT = \"user_log_out\";\r\ntype USER_LOG_OUT_TYPE = typeof USER_LOG_OUT;\r\n\r\nexport const UPDATE_USER_STATE = \"update_user_state\";\r\ntype UPDATE_USER_STATE_TYPE = typeof UPDATE_USER_STATE;\r\n\r\nexport interface SetUserInfoType {\r\n  type: SET_USER_INFO_TYPE;\r\n  user: UserProps;\r\n}\r\n\r\nexport interface UserLogOutType {\r\n  type: USER_LOG_OUT_TYPE;\r\n}\r\n\r\nexport interface UpdateUserStateType {\r\n  type: UPDATE_USER_STATE_TYPE;\r\n  state: boolean;\r\n}\r\n\r\nexport type HeaderActionType =\r\n  | SetUserInfoType\r\n  | UpdateUserStateType\r\n  | UserLogOutType;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { PageHeader } from \"antd\";\r\nimport { Input, Form } from \"antd\";\r\nimport { LockOutlined, MobileOutlined } from \"@ant-design/icons\";\r\nimport classnames from \"classnames\";\r\nimport { userLogIn } from \"../Header/store/actionCreator\";\r\nimport { getChangeSignInShowAction } from \"./store/actionCreator\";\r\n\r\ninterface SignInProps {\r\n  show: boolean;\r\n  handleUserLogin: (user: LoginRequestConfig) => void;\r\n  changeSignInShow: (flag: boolean) => void;\r\n}\r\n\r\nconst SignIn: React.FC<SignInProps> = (props) => {\r\n  const [form] = Form.useForm();\r\n  const { show, handleUserLogin, changeSignInShow } = props;\r\n  const classes = classnames(\"signin\", {\r\n    show\r\n  });\r\n\r\n  function handleSubmit() {\r\n    form.validateFields().then((values) => {\r\n      const { phone, password } = values;\r\n      handleUserLogin({ phone, password });\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"content\">\r\n        <PageHeader\r\n          title=\"退出\"\r\n          onBack={() => changeSignInShow(false)}\r\n          className=\"nav\"\r\n        />\r\n        <h2 className=\"title\">手机 · 登录</h2>\r\n        <Form form={form} style={{ padding: \"2rem 1rem\" }}>\r\n          <Form.Item\r\n            name=\"phone\"\r\n            rules={[{ required: true, message: \"手机号必须填写\" }]}\r\n            initialValue=\"18257712408\"\r\n          >\r\n            <Input prefix={<MobileOutlined />} allowClear />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[{ required: true, message: \"密码必须填写\" }]}\r\n            initialValue=\"a986176132\"\r\n          >\r\n            <Input.Password prefix={<LockOutlined />} allowClear />\r\n          </Form.Item>\r\n          <div className=\"btn\" onClick={handleSubmit}>\r\n            登 录\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  return {\r\n    show: state.signIn.show\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    handleUserLogin(user: LoginRequestConfig) {\r\n      const action = userLogIn(user);\r\n      dispatch(action);\r\n    },\r\n    changeSignInShow(flag: boolean) {\r\n      const action = getChangeSignInShowAction(flag);\r\n      dispatch(action);\r\n    }\r\n  };\r\n};\r\n\r\nSignIn.displayName = \"SignIn\";\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(SignIn));\r\n","import SignIn from \"./signIn\";\r\n\r\nexport default SignIn;\r\n","import React, { ReactElement, useContext } from \"react\";\r\nimport { passedContext } from \"./swipe\";\r\n\r\ninterface DotsProps {}\r\n\r\nconst Dots: React.FC<DotsProps> = React.memo(() => {\r\n  const context = useContext(passedContext);\r\n  const { currIndex, count } = context;\r\n\r\n  function hover(index: number) {\r\n    context.hover && context.hover(index);\r\n  }\r\n\r\n  function leave() {\r\n    context.leave && context.leave();\r\n  }\r\n\r\n  const renderChildren = () => {\r\n    if (!count) return;\r\n    const arr = [] as ReactElement[];\r\n    for (let i = 0; i < count; i++) {\r\n      let isActive = false;\r\n      if (currIndex === i + 1) {\r\n        isActive = true;\r\n      } else if (currIndex === 0 && i === count - 1) {\r\n        isActive = true;\r\n      } else if (currIndex === count + 1 && i === 0) {\r\n        isActive = true;\r\n      }\r\n\r\n      arr.push(\r\n        <li\r\n          key={i}\r\n          className={`dot ${isActive ? \"active\" : \"\"}`}\r\n          onMouseEnter={() => hover(i + 1)}\r\n          onMouseLeave={leave}\r\n        ></li>\r\n      );\r\n    }\r\n    return arr;\r\n  };\r\n\r\n  return <ul className=\"dots clearfix\">{renderChildren()}</ul>;\r\n});\r\n\r\nDots.displayName = \"Dots\";\r\n\r\nexport default Dots;\r\n","import React, { useRef, useState, createContext, useEffect } from \"react\";\r\nimport { SwipeItemProps } from \"./swipeItem\";\r\nimport Dots from \"./dots\";\r\n\r\nexport interface SwipeProps {\r\n  style?: React.CSSProperties;\r\n  duration?: number;\r\n}\r\n\r\ninterface SwipeContext {\r\n  currIndex?: number;\r\n  count?: number;\r\n  hover?: (index: number) => void;\r\n  leave?: () => void;\r\n}\r\n\r\ntype fcEl = React.FunctionComponentElement<SwipeItemProps>;\r\n\r\nexport const passedContext = createContext<SwipeContext>({});\r\n\r\nconst Swipe: React.FC<SwipeProps> = ({ style, children, duration }) => {\r\n  const count = useRef(0);\r\n  const timer = useRef<any>();\r\n  const [playState, changePlayState] = useState(true);\r\n  const [currIndex, changeIndex] = useState(1);\r\n\r\n  const passedContextValue: SwipeContext = {\r\n    currIndex,\r\n    count: count.current,\r\n    hover: handleHover,\r\n    leave: handleLeave\r\n  };\r\n\r\n  const RenderChildren = () => {\r\n    const length = React.Children.count(children);\r\n    const res = React.Children.map(children, (child, index) => {\r\n      const _child = child as fcEl;\r\n      if (_child.type.displayName === \"SwipeItem\") {\r\n        return React.cloneElement(_child, {\r\n          index: index + 1\r\n        });\r\n      } else {\r\n        console.error(\"Warning: Swipe's children must be SwipeItem\");\r\n      }\r\n    }) as fcEl[];\r\n    if (res.length !== 0 && res[0] && res[length - 1]) {\r\n      res.unshift(\r\n        React.cloneElement(res[length - 1], {\r\n          key: \"copy_last\",\r\n          index: 0\r\n        })\r\n      );\r\n      res.push(\r\n        React.cloneElement(res[1], {\r\n          key: \"copy_first\",\r\n          index: length + 1\r\n        })\r\n      );\r\n    }\r\n    passedContextValue.count = length;\r\n    count.current = length;\r\n    return res;\r\n  };\r\n\r\n  function handleHover(index: number) {\r\n    changePlayState(false);\r\n    clearTimeout(timer.current);\r\n    changeIndex(index);\r\n  }\r\n\r\n  function handleLeave() {\r\n    changePlayState(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function next() {\r\n      if (!count || count.current === undefined) return;\r\n      if (currIndex === count.current) {\r\n        return changeIndex(0);\r\n      }\r\n      timer.current = setTimeout(() => {\r\n        changeIndex(currIndex + 1);\r\n      }, duration);\r\n    }\r\n    if (playState) next();\r\n  }, [currIndex, duration, playState]);\r\n\r\n  return (\r\n    <div className=\"zsw-swipe\" style={style}>\r\n      <passedContext.Provider value={passedContextValue}>\r\n        <div>{RenderChildren()}</div>\r\n        <Dots />\r\n      </passedContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nSwipe.defaultProps = {\r\n  duration: 5000\r\n};\r\n\r\nexport default Swipe;\r\n","import React, { useContext } from \"react\";\r\nimport { passedContext } from \"./swipe\";\r\n\r\ntype position = \"left\" | \"center\" | \"right\" | \"active\";\r\n\r\nexport interface SwipeItemProps {\r\n  index?: number;\r\n  style?: React.CSSProperties;\r\n  pos?: position;\r\n}\r\n\r\nconst SwipeItem: React.FC<SwipeItemProps> = React.memo(\r\n  ({ index, children, style }) => {\r\n    const context = useContext(passedContext);\r\n    const { currIndex, count } = context;\r\n    const resInitPos = (): position => {\r\n      if (currIndex === undefined || count === undefined) return \"center\";\r\n      if (currIndex + 1 === index) {\r\n        return \"right\";\r\n      } else if (\r\n        currIndex - 1 === index ||\r\n        (!currIndex && index === count - 1)\r\n      ) {\r\n        return \"left\";\r\n      } else if (currIndex === index) {\r\n        return \"active\";\r\n      }\r\n      return \"center\";\r\n    };\r\n    const posClass = resInitPos();\r\n\r\n    return (\r\n      <div style={style} className={`swipe-item ${posClass}`}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nSwipeItem.displayName = \"SwipeItem\";\r\n\r\nexport default SwipeItem;\r\n","import Swipe, { SwipeProps } from \"./swipe\";\r\nimport SwipeItem, { SwipeItemProps } from \"./swipeItem\";\r\n\r\ntype ExportType = React.FC<SwipeProps> & {\r\n  Item: React.FC<SwipeItemProps>;\r\n};\r\n\r\nconst ExportComponent = Swipe as ExportType;\r\n\r\nExportComponent.Item = SwipeItem;\r\n\r\nexport default ExportComponent;\r\n","import React from \"react\";\r\n\r\ninterface TitleProps {\r\n  title: string;\r\n  moreClick: () => void;\r\n}\r\n\r\nconst Title: React.FC<TitleProps> = (props) => {\r\n  const { title, moreClick } = props;\r\n\r\n  return (\r\n    <div className=\"recommend-panel-title\">\r\n      <span className=\"fl\">{title}</span>\r\n      <span className=\"fr\" onClick={moreClick}>\r\n        更多\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Title);\r\n","export default function (playCount: number) {\r\n  return parseInt(`${playCount / 10000}`) + \"万\";\r\n}\r\n","// dateFormat(\"YYYY-mm-dd HH:MM\", date)\r\n// >>> 2019-06-06 19:45`\r\n\r\nexport default function (fmt: string, time: string | number) {\r\n  let ret;\r\n  const date = new Date(time);\r\n  const opt = {\r\n    \"Y+\": date.getFullYear().toString(), // 年\r\n    \"m+\": (date.getMonth() + 1).toString(), // 月\r\n    \"d+\": date.getDate().toString(), // 日\r\n    \"H+\": date.getHours().toString(), // 时\r\n    \"M+\": date.getMinutes().toString(), // 分\r\n    \"S+\": date.getSeconds().toString() // 秒\r\n    // 有其他格式化字符需求可以继续添加，必须转化成字符串\r\n  };\r\n  for (let k in opt) {\r\n    ret = new RegExp(\"(\" + k + \")\").exec(fmt);\r\n    if (ret) {\r\n      //@ts-ignore\r\n      fmt = fmt.replace(\r\n        ret[1],\r\n        //@ts-ignore\r\n        ret[1].length === 1 ? opt[k] : opt[k].padStart(ret[1].length, \"0\")\r\n      );\r\n    }\r\n  }\r\n  return fmt;\r\n}\r\n","export default function (time: number) {\r\n  const totalSeconds = parseInt(\"\" + time / 1000);\r\n  const minute = parseInt(`${totalSeconds / 60}`);\r\n  const seconds = parseInt(`${totalSeconds - minute * 60}`);\r\n  return (\r\n    minute.toString().padStart(2, \"0\") +\r\n    \":\" +\r\n    seconds.toString().padStart(2, \"0\")\r\n  );\r\n}\r\n","export default function (singers: Array<any>) {\r\n  const arr: Array<ISingerInfo> = [];\r\n  for (let i = 0; i < singers.length; i++) {\r\n    const singer = singers[i];\r\n    arr.push({\r\n      name: singer.name,\r\n      id: singer.id\r\n    });\r\n  }\r\n  return arr;\r\n}\r\n","const reg = /^\\[(?<minute>\\d+):(?<second>\\d+\\.\\d+)\\](?<content>.*)?$/gm;\r\n\r\nexport default function (str: string) {\r\n  let res: RegExpExecArray | null;\r\n  let arr: Array<LyricRegItem> = [];\r\n  while ((res = reg.exec(str))) {\r\n    let data: any = res.groups;\r\n    let minute = parseFloat(data.minute);\r\n    let second = parseFloat(data.second) + minute * 60;\r\n    let content = data.content;\r\n    if (content && content.length > 0) {\r\n      content = content.trim();\r\n      arr.push({\r\n        second,\r\n        content\r\n      });\r\n    } else {\r\n      arr.push({\r\n        second,\r\n        content: \"\"\r\n      });\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n","export default (noCopyRight: any, fee: number) => {\r\n  if (noCopyRight) return false;\r\n  switch (fee) {\r\n    case 0:\r\n    case 8:\r\n      return true;\r\n    case 1:\r\n      return false;\r\n    default: {\r\n      console.log(fee);\r\n      return false;\r\n    }\r\n  }\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\ninterface LazyloadProps {\r\n  src: string;\r\n  className?: string;\r\n}\r\n\r\nconst Lazyload: React.FC<LazyloadProps> = (props) => {\r\n  const { src, className } = props;\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const handleIntersection: IntersectionObserverCallback = (entries) => {\r\n    entries.forEach((item) => {\r\n      // 遍历entries数组\r\n      if (item.isIntersecting) {\r\n        // 当前元素可见\r\n        const target = item.target as HTMLImageElement;\r\n        target.src = src;\r\n        io.current.unobserve(item.target); // 停止观察当前元素 避免不可见时候再次调用callback函数\r\n      }\r\n    });\r\n  };\r\n  const io = useRef(new IntersectionObserver(handleIntersection));\r\n\r\n  useEffect(() => {\r\n    const image = new Image();\r\n    image.src = src;\r\n  }, [src]);\r\n\r\n  useEffect(() => {\r\n    const _io = io.current;\r\n    if (imgRef && imgRef.current && io && io.current) {\r\n      io.current.observe(imgRef.current);\r\n    }\r\n    return () => {\r\n      _io.disconnect();\r\n    };\r\n  }, [imgRef]);\r\n\r\n  return (\r\n    <img\r\n      src=\"data:image/png;base64,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\"\r\n      alt=\"\"\r\n      className={\"lazyload \" + className}\r\n      ref={imgRef}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(Lazyload);\r\n","import PlayListItem from \"./playListItem\";\r\n\r\nexport default PlayListItem;\r\n","import React from \"react\";\r\nimport { parsePlayCount } from \"../../utils\";\r\nimport { CustomerServiceOutlined, PlayCircleOutlined } from \"@ant-design/icons\";\r\nimport Lazyload from \"../Lazyload\";\r\n\r\nconst PlayListItem: React.FC<PlayListItemProps> = (props) => {\r\n  const { playCount, picUrl, onClick, name, copywriter } = props;\r\n\r\n  return (\r\n    <div onClick={onClick} className=\"playlist-item\">\r\n      <Lazyload src={picUrl} className={copywriter ? \"tran\" : \"\"} />\r\n      {playCount && (\r\n        <div className=\"play-count\">\r\n          <CustomerServiceOutlined />\r\n          {parsePlayCount(playCount)}\r\n        </div>\r\n      )}\r\n      {name && <div className=\"description\">{name}</div>}\r\n      <div className=\"play-icon\">\r\n        <PlayCircleOutlined />\r\n      </div>\r\n      {copywriter && <div className=\"copywriter\">{copywriter}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(PlayListItem);\r\n","import MainTabs from \"./mainTabs\";\r\n\r\nexport default MainTabs;\r\n","import React, { useContext } from \"react\";\r\nimport { Menu } from \"antd\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface MainTabsProps {\r\n  name: string;\r\n}\r\n\r\ntype currentType = \"recommend\" | \"totalPlaylist\" | \"rank\";\r\n\r\nconst MainTabs: React.FC<MainTabsProps> = (props) => {\r\n  const { name } = props;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function handleItemClick(e: any) {\r\n    const key = e.key as currentType;\r\n    history.push(`/${key === \"recommend\" ? \"\" : key}`);\r\n    context.setHistoryStack(\"push\", key);\r\n  }\r\n\r\n  return (\r\n    <div className=\"main-tabs-nav\">\r\n      <Menu mode=\"horizontal\" selectedKeys={[name]} onClick={handleItemClick}>\r\n        <Menu.Item title=\"个性推荐\" key=\"recommend\">\r\n          个性推荐\r\n        </Menu.Item>\r\n        <Menu.Item title=\"歌单\" key=\"totalPlaylist\">\r\n          歌单\r\n        </Menu.Item>\r\n        <Menu.Item title=\"排行榜\" key=\"rank\">\r\n          排行榜\r\n        </Menu.Item>\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(MainTabs);\r\n","import Recommend from \"./recommend\";\r\n\r\nexport default Recommend;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport Swipe from \"../../common/Swipe\";\r\nimport classnames from \"classnames\";\r\nimport Title from \"./components/title\";\r\nimport PlayListItem from \"../../common/PlayListItem\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\n\r\ninterface RecommendProps {\r\n  moreClick: () => void;\r\n  userId: string;\r\n}\r\n\r\ninterface IBanner {\r\n  imageUrl: string;\r\n}\r\n\r\nconst Recommend: React.FC<RecommendProps> = (props) => {\r\n  const { moreClick, userId } = props;\r\n  const [banners, setBanners] = useState<Array<string>>([]);\r\n  const [recPlaylistItems, setRecPlaylistItems] = useState<\r\n    Array<IPlaylistItem>\r\n  >([]);\r\n  const classes = classnames(\"recommend\");\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function handleItemClick(id: string) {\r\n    history.push(`/playlist/${id}`);\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    function fetchBanners() {\r\n      axios.get(\"/banner?type=0\").then(({ data }) => {\r\n        const banners = data.banners as Array<IBanner>;\r\n        const _banners = [];\r\n        for (let i = 0; i < banners.length; i++) {\r\n          const banner = banners[i];\r\n          _banners.push(banner.imageUrl);\r\n        }\r\n        setBanners(_banners);\r\n      });\r\n    }\r\n    function getRecommendPlaylists() {\r\n      axios\r\n        .get(\"/personalized?limit=10&timestamp=\" + Date.now())\r\n        .then(({ data }) => {\r\n          //  console.log(data);\r\n          const recommend = data.result as Array<IPlaylistItem>;\r\n          const _data = [] as Array<IPlaylistItem>;\r\n          for (let i = 0; i < recommend.length; i++) {\r\n            const { id, name, picUrl, playCount, copywriter } = recommend[i];\r\n            _data.push({ id, name, picUrl, playCount, copywriter });\r\n          }\r\n          setRecPlaylistItems(_data);\r\n        });\r\n    }\r\n    fetchBanners();\r\n    getRecommendPlaylists();\r\n  }, [userId]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <MainTabs name=\"recommend\" />\r\n        <Swipe style={{ margin: \"0 auto\", marginTop: 30 }}>\r\n          {banners.map((banner) => {\r\n            return (\r\n              <Swipe.Item key={banner}>\r\n                <img src={banner} alt=\"\" />\r\n              </Swipe.Item>\r\n            );\r\n          })}\r\n        </Swipe>\r\n        <div className=\"recommend-playlists\">\r\n          <Title title=\"推荐歌单\" moreClick={moreClick} />\r\n          <div className=\"playlist-item-container\">\r\n            {recPlaylistItems.map((item) => {\r\n              return (\r\n                <PlayListItem\r\n                  {...item}\r\n                  key={item.id}\r\n                  onClick={() => handleItemClick(item.id)}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  return {\r\n    userId: state.header.user.userId\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(Recommend));\r\n","import React from \"react\";\r\n\r\nconst CategoryItem: React.FC<CategoryItemProps> = (props) => {\r\n  const { icon, categoryName, arr, onClick, currCategory } = props;\r\n\r\n  return (\r\n    <div className=\"all-categories-dropdown-content-item\">\r\n      <div className=\"all-categories-dropdown-content-item-left\">\r\n        <div>\r\n          <i className={\"iconfont \" + icon}></i>\r\n          <span>{categoryName}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"all-categories-dropdown-content-item-right\">\r\n        <div>\r\n          {arr.map((item) => {\r\n            return (\r\n              <div\r\n                className={\r\n                  \"all-categories-dropdown-content-item-right-item \" +\r\n                  (currCategory === item.name ? \"selected\" : \"\")\r\n                }\r\n                key={item.name}\r\n                onClick={() => onClick(item.name)}\r\n              >\r\n                {item.name}\r\n                {item.hot && (\r\n                  <span className=\"all-categories-dropdown-content-item-right-item-hot\">\r\n                    HOT\r\n                  </span>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(CategoryItem);\r\n","import React from \"react\";\r\nimport { DownOutlined } from \"@ant-design/icons\";\r\nimport CategoryItem from \"./categoryItem\";\r\n\r\nconst iconclass = [\r\n  \"icon-diqiu\",\r\n  \"icon-fengge\",\r\n  \"icon-kafei\",\r\n  \"icon-xiaolian\",\r\n  \"icon-zhuti_\"\r\n];\r\n\r\nconst AllCategories: React.FC<AllCategoriesProps> = (props) => {\r\n  const { categories, currCategory, changeCategory, show, changeShow } = props;\r\n\r\n  function extendDropdown() {\r\n    changeShow(!show);\r\n  }\r\n\r\n  function handleClick(category: string) {\r\n    extendDropdown();\r\n    changeCategory(category);\r\n  }\r\n\r\n  return (\r\n    <div className=\"all-categories\">\r\n      <div className=\"all-categories-btn\" onClick={extendDropdown}>\r\n        {currCategory}\r\n        <DownOutlined />\r\n      </div>\r\n      <div className={\"all-categories-dropdown \" + (show ? \"show\" : \"\")}>\r\n        <div className=\"all-categories-dropdown-title\">选择标签</div>\r\n        <div className=\"all-categories-dropdown-content\">\r\n          <div>\r\n            <div\r\n              className={\r\n                \"all-categories-dropdown-content-top \" +\r\n                (currCategory === \"全部歌单\" ? \"selected\" : \"\")\r\n              }\r\n              onClick={() => handleClick(\"全部歌单\")}\r\n            >\r\n              全部歌单\r\n            </div>\r\n            {categories.map((item, index) => {\r\n              return (\r\n                <CategoryItem\r\n                  {...item}\r\n                  icon={iconclass[index]}\r\n                  key={item.categoryName}\r\n                  onClick={handleClick}\r\n                  currCategory={currCategory}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(AllCategories);\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport AllCategories from \"./allCategories\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport PlaylistItem from \"../../common/PlayListItem\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { Pagination } from \"antd\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory, match } from \"react-router-dom\";\r\nimport MainTabs from \"../MainTabs\";\r\n\r\ninterface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nfunction toArray(obj: any) {\r\n  const arr = [];\r\n  for (let index in obj) {\r\n    arr.push(obj[index]);\r\n  }\r\n  return arr;\r\n}\r\n\r\ninterface TotalPlaylistsProps {\r\n  match: match;\r\n}\r\n\r\nconst TotalPlaylists: React.FC<TotalPlaylistsProps> = (props) => {\r\n  const classes = classnames(\"total-playlists\");\r\n  const match = props.match as match<{ type: string }>;\r\n  const type = match && match.params.type ? match.params.type : \"全部歌单\";\r\n  const [currCategory, setCurrCategory] = useState(type);\r\n  const [categories, setCategories] = useState<CategoryType>([]);\r\n  const [hotCategories, setHotCategories] = useState<Array<IHotCategoryItem>>(\r\n    []\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n  const [playlists, setPlaylists] = useState<Array<IPlaylistItem>>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 50\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: 50,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const [show, changeShow] = useState(false);\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    const wrapper = wrapperRef;\r\n    function handleWrapperClick(e: MouseEvent) {\r\n      const target = e.target as HTMLElement;\r\n      if (!target.classList.contains(\"all-categories-btn\")) {\r\n        changeShow(false);\r\n      }\r\n    }\r\n    if (wrapper.current) {\r\n      wrapper.current.addEventListener(\"click\", handleWrapperClick);\r\n    }\r\n\r\n    return () => {\r\n      if (wrapper.current) {\r\n        wrapper.current.removeEventListener(\"click\", handleWrapperClick);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrCategory(type === \"另类\" ? \"另类/独立\" : type);\r\n  }, [type]);\r\n\r\n  useEffect(() => {\r\n    function parseCategoryArray(arr: Array<any>) {\r\n      const _arr = [];\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const arrItem = arr[i];\r\n        const item: ICategoryItem = {\r\n          name: arrItem.name,\r\n          category: arrItem.category,\r\n          hot: arrItem.hot\r\n        };\r\n        _arr.push(item);\r\n      }\r\n      return _arr;\r\n    }\r\n\r\n    async function fetchAllCategoriesData() {\r\n      const { data } = await axios.get(\"/playlist/catlist\");\r\n      const _categories = data.categories;\r\n      const _categoriesArr = toArray(_categories);\r\n      const sub = data.sub as Array<any>;\r\n      const neededArr = [];\r\n      console.log(_categoriesArr);\r\n      for (let i = 0; i < _categoriesArr.length; i++) {\r\n        const arr = sub.filter((item) => item.category === i);\r\n        const parsedArr = parseCategoryArray(arr);\r\n        const item = {\r\n          categoryName: _categoriesArr[i],\r\n          arr: parsedArr\r\n        };\r\n        neededArr.push(item);\r\n      }\r\n      setCategories(neededArr);\r\n    }\r\n\r\n    async function fetchHotCategoriesData() {\r\n      const { data } = await axios.get(\"/playlist/hot\");\r\n      const tags = data.tags as Array<any>;\r\n      const arr = [];\r\n      for (let i = 0; i < tags.length; i++) {\r\n        arr.push({\r\n          name: tags[i].name,\r\n          id: tags[i].id\r\n        });\r\n      }\r\n      setHotCategories(arr);\r\n    }\r\n\r\n    fetchAllCategoriesData();\r\n    fetchHotCategoriesData();\r\n    return () => {\r\n      console.log(\"unmount\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      if (currCategory === \"全部歌单\") {\r\n        return `/top/playlist?limit=${limit}&offset=${offset}`;\r\n      }\r\n      return `/top/playlist?cat=${currCategory}&limit=${limit}&offset=${offset}`;\r\n    }\r\n\r\n    async function fetchPlaylistData() {\r\n      setLoading(true);\r\n      if (playlists.length === 0) {\r\n        await new Promise((resolve) => {\r\n          setTimeout(resolve, 500);\r\n        });\r\n      }\r\n      const { data } = await axios.get(fetchUrl());\r\n      const _playlists = data.playlists as Array<any>;\r\n      const arr: Array<IPlaylistItem> = [];\r\n      for (let i = 0; i < _playlists.length; i++) {\r\n        const item = _playlists[i];\r\n        arr.push({\r\n          name: item.name,\r\n          id: item.id,\r\n          playCount: item.playCount,\r\n          picUrl: item.coverImgUrl\r\n        });\r\n      }\r\n      setPagination({\r\n        total: 500\r\n      });\r\n      setPlaylists(arr);\r\n      setLoading(false);\r\n    }\r\n\r\n    fetchPlaylistData();\r\n    // eslint-disable-next-line\r\n  }, [currCategory, queryParams]);\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes} ref={wrapperRef}>\r\n      <div className=\"total-playlists-inner\">\r\n        <MainTabs name=\"totalPlaylist\" />\r\n        <AllCategories\r\n          categories={categories}\r\n          currCategory={currCategory}\r\n          changeCategory={setCurrCategory}\r\n          show={show}\r\n          changeShow={changeShow}\r\n        />\r\n        <div className=\"hot-categories\">\r\n          <span className=\"hot-categories-title\">热门标签: </span>\r\n          {hotCategories.map((item) => {\r\n            return (\r\n              <span\r\n                key={item.name}\r\n                className=\"hot-categories-item\"\r\n                onClick={() => setCurrCategory(item.name)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"all-playlists-inner-content\">\r\n          {loading ? (\r\n            <div className=\"all-playlists-inner-content-loading\">\r\n              <LoadingOutlined />\r\n              载入中\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {playlists.map((playlist) => {\r\n                return (\r\n                  <PlaylistItem\r\n                    {...playlist}\r\n                    onClick={() => handleItemClick(playlist.id)}\r\n                    key={playlist.id}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n          <div className=\"all-playlists-inner-pagination\">\r\n            <Pagination\r\n              {...defaultPagination.current}\r\n              {...pagination}\r\n              style={{ display: loading ? \"none\" : \"block\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(TotalPlaylists);\r\n","import TotalPlaylists from \"./totalPlaylists\";\r\n\r\nexport default TotalPlaylists;\r\n","import React from \"react\";\r\nimport { PlayCircleOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { parseDate } from \"../../utils\";\r\n\r\nconst OfficialRankItem: React.FC<OfficialRankItemProps> = (props) => {\r\n  const { picUrl, tracks, updateTime, onClick } = props;\r\n\r\n  function handleItemClick() {\r\n    onClick && onClick();\r\n  }\r\n\r\n  return (\r\n    <div className=\"official-rank-item\">\r\n      <div\r\n        className=\"official-rank-item-top\"\r\n        style={{\r\n          backgroundImage: `url(${picUrl}?param=300y100)`\r\n        }}\r\n      >\r\n        <div\r\n          className=\"official-rank-item-left-overlay\"\r\n          onClick={handleItemClick}\r\n        >\r\n          <PlayCircleOutlined />\r\n        </div>\r\n      </div>\r\n      <div className=\"official-rank-item-bottom\">\r\n        {tracks.map((track, index) => {\r\n          return (\r\n            <div className=\"official-rank-item-bottom-item\" key={index}>\r\n              <div className=\"official-rank-item-bottom-item-index\">\r\n                {index + 1}\r\n              </div>\r\n              <div className=\"official-rank-item-bottom-item-song-name\">\r\n                {track.first}\r\n              </div>\r\n              <div className=\"official-rank-item-bottom-item-singer-name\">\r\n                {track.second}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"official-rank-item-bottom-btn\">\r\n          <span style={{ float: \"left\" }}>\r\n            {parseDate(\"mm月dd日更新\", updateTime)}\r\n          </span>\r\n          <span style={{ float: \"right\" }} onClick={handleItemClick}>\r\n            查看全部\r\n            <RightOutlined />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(OfficialRankItem);\r\n","import Rank from \"./rank\";\r\n\r\nexport default Rank;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport OfficialRankItem from \"./officialRankItem\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport PlaylistItem from \"../../common/PlayListItem\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\nconst Rank: React.FC<RankProps> = () => {\r\n  const classes = classnames(\"total-ranks\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [officialRankData, setOfficialRankData] = useState<\r\n    Array<OfficialRankItemProps>\r\n  >([]);\r\n  const [globalRankData, setGlobalRankData] = useState<Array<IPlaylistItem>>(\r\n    []\r\n  );\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    function parseOfficialRank(data: any[]) {\r\n      const arr: OfficialRankItemProps[] = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          picUrl: item.coverImgUrl,\r\n          updateTime: item.updateTime,\r\n          id: item.id,\r\n          tracks: item.tracks\r\n        });\r\n      }\r\n      console.log(arr);\r\n      return arr;\r\n    }\r\n    function parseToplist(obj: any): OfficialRankItemProps {\r\n      return {\r\n        updateTime: Date.now(),\r\n        picUrl: obj.coverUrl,\r\n        tracks: obj.artists,\r\n        id: \"\",\r\n        type: \"singer\"\r\n      };\r\n    }\r\n    function parseGlobalRank(data: any[]) {\r\n      const arr: IPlaylistItem[] = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          picUrl: item.coverImgUrl,\r\n          id: item.id,\r\n          name: item.name,\r\n          playCount: item.playCount\r\n        });\r\n      }\r\n      return arr;\r\n    }\r\n    async function fetchRankData() {\r\n      setLoading(true);\r\n      if (officialRankData.length === 0) {\r\n        await new Promise((resolve) => {\r\n          setTimeout(resolve, 500);\r\n        });\r\n      }\r\n      const { data } = await axios.get(\"/toplist/detail\");\r\n      const list = data.list as Array<any>;\r\n      const toplist = data.artistToplist;\r\n      const officialData = list.slice(0, 4);\r\n      const globalData = list.slice(4);\r\n      setOfficialRankData(\r\n        parseOfficialRank(officialData).concat([parseToplist(toplist)])\r\n      );\r\n      setGlobalRankData(parseGlobalRank(globalData));\r\n      setLoading(false);\r\n    }\r\n    fetchRankData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  function handleItemClick(id: string, type?: string) {\r\n    if (!type) {\r\n      context.setHistoryStack(\"push\", \"playlist\");\r\n      history.push(\"/playlist/\" + id);\r\n      return;\r\n    }\r\n    return history.push(\"/singerRank\");\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <MainTabs name=\"rank\" />\r\n        {loading ? (\r\n          <div className=\"total-rank-loading\">\r\n            <LoadingOutlined />\r\n            载入中...\r\n          </div>\r\n        ) : (\r\n          <div className=\"total-ranks-inner\">\r\n            <div className=\"official-rank\">\r\n              <div className=\"total-ranks-title\">官方榜</div>\r\n              <div className=\"official-rank-content\">\r\n                {officialRankData.map((item) => {\r\n                  return (\r\n                    <OfficialRankItem\r\n                      {...item}\r\n                      key={item.id}\r\n                      onClick={() => handleItemClick(item.id, item.type)}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            <div className=\"global-rank\">\r\n              <div className=\"total-ranks-title\">全球榜</div>\r\n              <div className=\"global-rank-content\">\r\n                {globalRankData.map((data) => {\r\n                  return (\r\n                    <PlaylistItem\r\n                      {...data}\r\n                      key={data.id}\r\n                      onClick={() => handleItemClick(data.id)}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Rank);\r\n","import React from \"react\";\r\nimport Lazyload from \"../../common/Lazyload\";\r\n\r\nconst SingerRankItem: React.FC<SingerRankItemProps> = (props) => {\r\n  const { picUrl, name, lastRank, index, score, totalScore, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"total-singer-rank-item\" onClick={onClick}>\r\n      <div className=\"total-singer-rank-item-index\">\r\n        <div\r\n          className={`total-singer-rank-item-index-curr ${\r\n            index < 3 ? \"three\" : \"\"\r\n          }`}\r\n        >\r\n          {index + 1}\r\n        </div>\r\n        {lastRank === undefined ? (\r\n          <div className=\"total-singer-rank-item-index-dis new\">new</div>\r\n        ) : index - lastRank === 0 ? (\r\n          <div className=\"total-singer-rank-item-index-dis\">-0</div>\r\n        ) : index - lastRank > 0 ? (\r\n          <div className=\"total-singer-rank-item-index-dis positive\">\r\n            <span className=\"iconfont icon-down-jiantou-right\"></span>\r\n            {index - lastRank}\r\n          </div>\r\n        ) : (\r\n          <div className=\"total-singer-rank-item-index-dis negative\">\r\n            <span className=\"iconfont icon-down-jiantou-right\"></span>\r\n            {index - lastRank}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"total-singer-rank-item-img\">\r\n        <Lazyload src={picUrl + \"?param=44y44\"} />\r\n      </div>\r\n      <div className=\"total-singer-rank-item-name\">{name}</div>\r\n      <div className=\"total-singer-rank-item-score\">\r\n        <div\r\n          className=\"total-singer-rank-item-score-inner\"\r\n          style={{ width: (score / totalScore) * 100 + \"%\" }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerRankItem);\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { parseDate } from \"../../utils\";\r\nimport SingerRankItem from \"./singerRankItem\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\ntype currType = \"华语\" | \"欧美\" | \"韩国\" | \"日本\";\r\n\r\nconst typeMap: Map<currType, number> = new Map();\r\ntypeMap.set(\"华语\", 1);\r\ntypeMap.set(\"欧美\", 2);\r\ntypeMap.set(\"韩国\", 3);\r\ntypeMap.set(\"日本\", 4);\r\n\r\ninterface SingerRankProps extends SingerRank {}\r\n\r\nconst SingerRank: React.FC<SingerRankProps> = () => {\r\n  const classes = classnames(\"total-singer-rank\");\r\n  const [currType, setCurrType] = useState<currType>(\"华语\");\r\n  const [singerData, setSingerData] = useState<ISingerItemInfo[]>([]);\r\n  const totalScore = useRef(0);\r\n  const [updateTime, setUpdateTime] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function hanldeTabItemClick(name: currType) {\r\n    setCurrType(name);\r\n  }\r\n\r\n  function handleRankItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseArtist(artists: any[]) {\r\n      const arr: ISingerItemInfo[] = [];\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n        if (i === 0) {\r\n          totalScore.current = item.score;\r\n        }\r\n        arr.push({\r\n          name: item.name,\r\n          score: item.score,\r\n          id: item.id,\r\n          picUrl: item.picUrl,\r\n          lastRank: item.lastRank\r\n        });\r\n      }\r\n      return arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(\r\n        `/toplist/artist?type=${typeMap.get(currType)}`\r\n      );\r\n      const list = data.list;\r\n      !isUnmount && setUpdateTime(list.updateTime);\r\n      const artists = list.artists as any[];\r\n      !isUnmount && setSingerData(parseArtist(artists));\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    fetchData();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [currType]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"total-singer-rank-title\">云音乐歌手榜</div>\r\n        <div className=\"total-singer-rank-tab\">\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"华语\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"华语\")}\r\n          >\r\n            华语\r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"欧美\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"欧美\")}\r\n          >\r\n            欧美\r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"韩国\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"韩国\")}\r\n          >\r\n            韩国\r\n          </div>\r\n          <div\r\n            className={`total-singer-rank-tab-item ${\r\n              currType === \"日本\" ? \"selected\" : \"\"\r\n            }`}\r\n            onClick={() => hanldeTabItemClick(\"日本\")}\r\n          >\r\n            日本\r\n          </div>\r\n          {updateTime ? (\r\n            <div className=\"total-singer-rank-tab-updateTime\">\r\n              <span>更新时间:</span>\r\n              {parseDate(\"mm月dd日\", updateTime)}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n        <div className=\"total-singer-rank-content\">\r\n          {loading ? (\r\n            <div className=\"total-singer-rank-content-loading\">\r\n              <LoadingOutlined />\r\n              载入中\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {singerData.map((item, index) => {\r\n                return (\r\n                  <SingerRankItem\r\n                    key={item.id}\r\n                    {...item}\r\n                    index={index}\r\n                    totalScore={totalScore.current}\r\n                    onClick={() => handleRankItemClick(item.id)}\r\n                  />\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerRank);\r\n","import SingerRank from \"./singerRank\";\r\n\r\nexport default SingerRank;\r\n","import SearchMusic from \"./searchMusic\";\r\n\r\nexport default SearchMusic;\r\n","import React, { useContext } from \"react\";\r\nimport Recommend from \"../Recommend\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport TotalPlaylists from \"../TotalPlaylists\";\r\nimport Rank from \"../Rank\";\r\nimport SingerRank from \"../SingerRank\";\r\nimport classnames from \"classnames\";\r\nimport KeepAlive from \"react-activation\";\r\nimport { Route, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ntype currentType =\r\n  | \"recommend\"\r\n  | \"totalPlaylist\"\r\n  | \"rank\"\r\n  | \"singer\"\r\n  | \"singerRank\";\r\n\r\ninterface SearchMusicProps {}\r\n\r\nconst SearchMusic: React.FC<SearchMusicProps> = () => {\r\n  const history = useHistory();\r\n  const classes = classnames(\"search-music\");\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function moreClick() {\r\n    context.setHistoryStack(\"push\", \"totalPlaylist\");\r\n    history.push(\"/totalPlaylist\");\r\n  }\r\n\r\n  function returnTransition(\r\n    type: currentType,\r\n    el: React.ReactElement,\r\n    path?: string\r\n  ) {\r\n    const _path = path ? path : \"/\" + type;\r\n    return (\r\n      <Route path={_path}>\r\n        {({ location }) => {\r\n          return (\r\n            <CSSTransition\r\n              in={\r\n                location.pathname.includes(type) ||\r\n                (type === \"recommend\" && location.pathname === \"/\")\r\n              }\r\n              timeout={200}\r\n              mountOnEnter={true}\r\n              unmountOnExit\r\n              classNames={{\r\n                enter: \"animate__animated\",\r\n                enterActive: \"animate__fadeIn\",\r\n                exit: \"animate__animated\",\r\n                exitActive: \"animate__fadeOut\"\r\n              }}\r\n            >\r\n              <KeepAlive name={type}>{el}</KeepAlive>\r\n            </CSSTransition>\r\n          );\r\n        }}\r\n      </Route>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"search-music-content\">\r\n        {returnTransition(\r\n          \"recommend\",\r\n          <Recommend moreClick={moreClick} />,\r\n          \"/\"\r\n        )}\r\n        <Route path=\"/totalPlaylist/:type?\">\r\n          {(render) => {\r\n            return (\r\n              <CSSTransition\r\n                in={render.location.pathname.includes(\"totalPlaylist\")}\r\n                timeout={200}\r\n                mountOnEnter={true}\r\n                unmountOnExit\r\n                classNames={{\r\n                  enter: \"animate__animated\",\r\n                  enterActive: \"animate__fadeIn\",\r\n                  exit: \"animate__animated\",\r\n                  exitActive: \"animate__fadeOut\"\r\n                }}\r\n              >\r\n                <KeepAlive>\r\n                  <TotalPlaylists match={render.match!} />\r\n                </KeepAlive>\r\n              </CSSTransition>\r\n            );\r\n          }}\r\n        </Route>\r\n        {returnTransition(\"rank\", <Rank />)}\r\n        {returnTransition(\"singerRank\", <SingerRank />)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchMusic);\r\n","import React, { useRef } from \"react\";\r\nimport { Slider } from \"antd\";\r\nimport { parseTime } from \"../../utils\";\r\n\r\nexport interface ProgressProps {\r\n  max: number;\r\n  onChange: (value: number) => void;\r\n  value: number;\r\n  onChanging: (value: number) => void;\r\n  className: string;\r\n}\r\n\r\nconst Progress: React.FC<ProgressProps> = (props) => {\r\n  const { max, onChange, value, onChanging, className } = props;\r\n  const sliderRef = useRef<any>();\r\n\r\n  function handleAfterChange(value: number) {\r\n    if (sliderRef && sliderRef.current) {\r\n      sliderRef.current.blur();\r\n    }\r\n    onChange(value);\r\n  }\r\n\r\n  function tipFormatter(value: number | undefined) {\r\n    return parseTime(value ? value * 1000 : 0).toString();\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      <span className=\"current-time\">{parseTime(value * 1000)}</span>\r\n      <Slider\r\n        max={max}\r\n        onAfterChange={handleAfterChange}\r\n        value={value}\r\n        defaultValue={0}\r\n        onChange={onChanging}\r\n        ref={sliderRef}\r\n        tipFormatter={tipFormatter}\r\n      />\r\n      <span className=\"duration\">{parseTime(max * 1000)}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Progress);\r\n","import { PlayerActionType, CHNAGE_PLAY_STATE } from \"./actionType\";\r\nimport {\r\n  SET_PLAY_URL_MAP,\r\n  PUSH_PLAY_QUEUE,\r\n  SET_PLAY_LYRIC_MAP,\r\n  SET_PLAY_DETAIL_MAP,\r\n  CHANGE_PLAY_INDEX,\r\n  CHANGE_PLAY_ID\r\n} from \"./actionType\";\r\n\r\nconst defaultState: PlayerStoreStateProps = {\r\n  playLyricMap: new Map<string, string>(),\r\n  playDetailMap: new Map<string, PlayDetailItem>(),\r\n  playUrlMap: new Map<string, string>(),\r\n  playQueue: [],\r\n  current: -1,\r\n  playState: false,\r\n  willPlayQueue: [],\r\n  willplaylistId: []\r\n};\r\n\r\nfunction clone(state: PlayerStoreStateProps) {\r\n  let playDetailMap = new Map(state.playDetailMap);\r\n  let playUrlMap = new Map(state.playUrlMap);\r\n  let playLyricMap = new Map(state.playLyricMap);\r\n  const newState = JSON.parse(JSON.stringify(state)) as PlayerStoreStateProps;\r\n  newState.playLyricMap = playLyricMap;\r\n  newState.playUrlMap = playUrlMap;\r\n  newState.playDetailMap = playDetailMap;\r\n  return newState;\r\n}\r\n\r\nexport default (state = defaultState, action: PlayerActionType) => {\r\n  switch (action.type) {\r\n    case PUSH_PLAY_QUEUE: {\r\n      const { id, shouldCover, playlistId } = action;\r\n      const newState = clone(state);\r\n      if (shouldCover) {\r\n        newState.playQueue = [];\r\n        newState.willPlayQueue = [];\r\n        if (playlistId) {\r\n          newState.willplaylistId = [playlistId];\r\n        }\r\n        newState.willplaylistId = [];\r\n      }\r\n      if (id instanceof Array) {\r\n        if (id.length === 0) {\r\n          window.audio.pause();\r\n          window.audio.src = \"\";\r\n          newState.current = -1;\r\n          newState.playState = false;\r\n        }\r\n        newState.playQueue.push(...id);\r\n        for (let i = 0; i < id.length; i++) {\r\n          const item = newState.playDetailMap.get(id[i]);\r\n          if (item) {\r\n            const { name, singers, duration, id } = item;\r\n            newState.willPlayQueue.push({\r\n              name,\r\n              singers,\r\n              duration,\r\n              id\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        newState.playQueue.splice(newState.current + 1, 0, id);\r\n        const item = newState.playDetailMap.get(id);\r\n        if (item) {\r\n          const { name, singers, duration, id } = item;\r\n          newState.willPlayQueue.splice(newState.current + 1, 0, {\r\n            name,\r\n            singers,\r\n            duration,\r\n            id\r\n          });\r\n        }\r\n      }\r\n      // console.log(newState);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_URL_MAP: {\r\n      const { url, id } = action;\r\n      const newState = clone(state);\r\n      newState.playUrlMap.set(id, url);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_LYRIC_MAP: {\r\n      const { lyric, id } = action;\r\n      const newState = clone(state);\r\n      newState.playLyricMap.set(id, lyric);\r\n      return newState;\r\n    }\r\n    case SET_PLAY_DETAIL_MAP: {\r\n      const { items } = action;\r\n      const newState = clone(state);\r\n      newState.playDetailMap = new Map([...newState.playDetailMap, ...items]);\r\n      return newState;\r\n    }\r\n    case CHANGE_PLAY_INDEX: {\r\n      const { id } = action;\r\n      const newState = clone(state);\r\n      newState.current = newState.playQueue.indexOf(id);\r\n      return newState;\r\n    }\r\n    case CHANGE_PLAY_ID: {\r\n      const { index } = action;\r\n      const newState = clone(state);\r\n      console.log(index);\r\n      newState.current = index;\r\n      return newState;\r\n    }\r\n    case CHNAGE_PLAY_STATE: {\r\n      const { flag } = action;\r\n      const newState = clone(state);\r\n      newState.playState = flag;\r\n      return newState;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  PlayerActionType,\r\n  PUSH_PLAY_QUEUE,\r\n  SET_PLAY_DETAIL_MAP,\r\n  SET_PLAY_LYRIC_MAP,\r\n  SET_PLAY_URL_MAP,\r\n  CHANGE_PLAY_INDEX,\r\n  CHANGE_PLAY_ID,\r\n  CHNAGE_PLAY_STATE\r\n} from \"./actionType\";\r\nimport axios from \"../../../network\";\r\n// import { parseTime, mergeSingerNames } from \"../../../utils\";\r\n\r\nexport const getPushPlayQueueAction = (\r\n  id: string | Array<string>,\r\n  shouldCover = false,\r\n  playlistId = \"\"\r\n): PlayerActionType => {\r\n  return {\r\n    type: PUSH_PLAY_QUEUE,\r\n    id,\r\n    shouldCover,\r\n    playlistId\r\n  };\r\n};\r\n\r\nexport const getSetPlayUrlMapAction = (\r\n  url: string,\r\n  id: string\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_URL_MAP,\r\n    url,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getSetPlayLyricMapAction = (\r\n  lyric: string,\r\n  id: string\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_LYRIC_MAP,\r\n    lyric,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getSetPlayDetailMapAction = (\r\n  items: Map<string, PlayDetailItem>\r\n): PlayerActionType => {\r\n  return {\r\n    type: SET_PLAY_DETAIL_MAP,\r\n    items\r\n  };\r\n};\r\n\r\nexport const getChangePlayIndexAction = (id: string): PlayerActionType => {\r\n  return {\r\n    type: CHANGE_PLAY_INDEX,\r\n    id\r\n  };\r\n};\r\n\r\nexport const getChangePlayStateAction = (flag: boolean): PlayerActionType => {\r\n  return {\r\n    type: CHNAGE_PLAY_STATE,\r\n    flag\r\n  };\r\n};\r\n\r\nexport const getChangePlayIdAction = (index: number): PlayerActionType => {\r\n  return {\r\n    type: CHANGE_PLAY_ID,\r\n    index\r\n  };\r\n};\r\n\r\nexport const fetchPlayUrl = (id: string) => {\r\n  return async (dispatch: any) => {\r\n    const queryUrl = `/song/url?id=${id}`;\r\n    try {\r\n      let { data } = await axios.get(queryUrl);\r\n      const _data = data.data as Array<any>;\r\n      _data.length !== 0 && dispatch(getSetPlayUrlMapAction(_data[0].url, id));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchPlayLyric = (id: string) => {\r\n  return async (dispatch: any) => {\r\n    const queryLyric = `/lyric?id=${id}`;\r\n    try {\r\n      let { data } = await axios.get(queryLyric);\r\n      dispatch(getSetPlayLyricMapAction(data.lrc.lyric, id));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n","export const PUSH_PLAY_QUEUE = \"push_play_queue\";\r\ntype PUSH_PLAY_QUEUE_TYPE = typeof PUSH_PLAY_QUEUE;\r\n\r\nexport const SET_PLAY_URL_MAP = \"set_play_url_map\";\r\ntype SET_PLAY_URL_MAP_TYPE = typeof SET_PLAY_URL_MAP;\r\n\r\nexport const SET_PLAY_LYRIC_MAP = \"set_play_lyric_map\";\r\ntype SET_PLAY_LYRIC_MAP_TYPE = typeof SET_PLAY_LYRIC_MAP;\r\n\r\nexport const SET_PLAY_DETAIL_MAP = \"set_play_detail_map\";\r\ntype SET_PLAY_DETAIL_MAP_TYPE = typeof SET_PLAY_DETAIL_MAP;\r\n\r\nexport const CHANGE_PLAY_INDEX = \"change_play_index\";\r\ntype CHANGE_PLAY_INDEX_TYPE = typeof CHANGE_PLAY_INDEX;\r\n\r\nexport const CHANGE_PLAY_ID = \"change_play_id\";\r\ntype CHANGE_PLAY_ID_TYPE = typeof CHANGE_PLAY_ID;\r\n\r\nexport const CHNAGE_PLAY_STATE = \"change_play_state\";\r\ntype CHNAGE_PLAY_STATE_TYPE = typeof CHNAGE_PLAY_STATE;\r\n\r\nexport interface PushPlayQueueType {\r\n  type: PUSH_PLAY_QUEUE_TYPE;\r\n  id: string | Array<string>;\r\n  shouldCover: boolean;\r\n  playlistId: string;\r\n}\r\n\r\nexport interface SetPlayUrlMapType {\r\n  type: SET_PLAY_URL_MAP_TYPE;\r\n  url: string;\r\n  id: string;\r\n}\r\n\r\nexport interface SetPlayLyricMapType {\r\n  type: SET_PLAY_LYRIC_MAP_TYPE;\r\n  lyric: string;\r\n  id: string;\r\n}\r\n\r\nexport interface SetPlayDetailMapType {\r\n  type: SET_PLAY_DETAIL_MAP_TYPE;\r\n  items: Map<string, PlayDetailItem>;\r\n}\r\n\r\nexport interface ChangePlayIndexType {\r\n  type: CHANGE_PLAY_INDEX_TYPE;\r\n  id: string;\r\n}\r\n\r\nexport interface ChangePlayStateType {\r\n  type: CHNAGE_PLAY_STATE_TYPE;\r\n  flag: boolean;\r\n}\r\n\r\nexport interface ChangePlayIdType {\r\n  type: CHANGE_PLAY_ID_TYPE;\r\n  index: number;\r\n}\r\n\r\nexport type PlayerActionType =\r\n  | PushPlayQueueType\r\n  | SetPlayUrlMapType\r\n  | SetPlayLyricMapType\r\n  | SetPlayDetailMapType\r\n  | ChangePlayIndexType\r\n  | ChangePlayIdType\r\n  | ChangePlayStateType;\r\n","import Reducer from \"./reducer\";\r\n\r\nexport default Reducer;\r\nexport * from \"./actionCreator\";\r\n","import React, { useContext } from \"react\";\r\nimport { Table } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport {\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction,\r\n  getPushPlayQueueAction\r\n} from \"./store\";\r\nimport { SoundFilled, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nconst WillPLayTable: React.FC<WillPlayTableProps> = (props) => {\r\n  const {\r\n    willPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    current,\r\n    playState,\r\n    pushPlayQueue\r\n  } = props;\r\n\r\n  function hanldeDoubleClick(id: string) {\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  function clearAll() {\r\n    pushPlayQueue([]);\r\n  }\r\n\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"will-play-list-tips\">\r\n        <div className=\"will-play-list-total\">共{willPlayQueue.length}首</div>\r\n        <div className=\"will-play-list-clear-all\" onClick={clearAll}>\r\n          <DeleteOutlined />\r\n          清空\r\n        </div>\r\n      </div>\r\n      <Table\r\n        dataSource={willPlayQueue}\r\n        className=\"will-play-list-content\"\r\n        showHeader={false}\r\n        rowKey={(record) => record.id}\r\n        pagination={false}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        scroll={{ y: 485 }}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () => hanldeDoubleClick(record.id)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          width={50}\r\n          className=\"will-play-list-play-state\"\r\n          render={(value: any, record: WillPlayItem, index) => {\r\n            return current === record.id ? (\r\n              <SoundFilled\r\n                className={`will-play-list-${playState ? \"play\" : \"pause\"}`}\r\n              />\r\n            ) : (\r\n              <span></span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"name\"\r\n          width={300}\r\n          className=\"will-play-list-name\"\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"singers\"\r\n          className=\"will-play-list-singername\"\r\n          render={(value: ISingerInfo[]) =>\r\n            value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                onClick={() => toSingerDetail(item.id)}\r\n                className=\"singer-name\"\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ))\r\n          }\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"duration\"\r\n          className=\"will-play-list-duration\"\r\n        />\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (\r\n  state: UnionStateTypes\r\n): {\r\n  willPlayQueue: Array<WillPlayItem>;\r\n  current: string;\r\n  playState: boolean;\r\n} => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    willPlayQueue: player.willPlayQueue,\r\n    current: player.playQueue[current],\r\n    playState: player.playState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, true));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(WillPLayTable));\r\n","import React from \"react\";\r\nimport classnames from \"classnames\";\r\nimport WillPlayTable from \"./willPlayTable\";\r\n\r\nconst WillPlayList: React.FC<WillPlayListProps> = (props) => {\r\n  const { show } = props;\r\n  const classes = classnames(\"will-play-list\", {\r\n    show\r\n  });\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"will-play-list-title\">\r\n        <div className=\"will-play-list-title-center\">\r\n          <div className=\"will-play-list-title-playlist sele\">播放列表</div>\r\n          <div className=\"will-play-list-title-history\">历史记录</div>\r\n        </div>\r\n      </div>\r\n      <WillPlayTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(WillPlayList);\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  PlayCircleFilled,\r\n  StepBackwardFilled,\r\n  StepForwardFilled,\r\n  PauseCircleFilled,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport Progress from \"./progress\";\r\nimport { connect } from \"react-redux\";\r\nimport { Slider, Tooltip } from \"antd\";\r\nimport { mapDispatchToProps, mapStateToProps } from \"./mapToProps\";\r\nimport WillPlayList from \"./willPlayList\";\r\n\r\nconst playModeArr: Array<IPlayMode> = [\r\n  {\r\n    playMode: \"order\",\r\n    title: \"顺序播放\",\r\n    icon: \"icon-shouye-bofangmoshi-shunxubofang\",\r\n    index: 0\r\n  },\r\n  {\r\n    playMode: \"random\",\r\n    title: \"随机播放\",\r\n    icon: \"icon-shouye-bofangmoshi-suijibofang\",\r\n    index: 1\r\n  },\r\n  {\r\n    playMode: \"repeat\",\r\n    title: \"单曲循环\",\r\n    icon: \"icon-shouye-bofangmoshi-danquxunhuan\",\r\n    index: 2\r\n  }\r\n];\r\n\r\nconst Player: React.FC<PlayerProps> = (props) => {\r\n  const {\r\n    src,\r\n    currIndex,\r\n    playQueue,\r\n    changePlayId,\r\n    playUrlMap,\r\n    fetchPlayUrl,\r\n    changePlayState\r\n  } = props;\r\n  const [isplayed, setPlayed] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [volumn, setVolumn] = useState(1);\r\n  const [max, setMax] = useState(0);\r\n  const timerRef = useRef<any>();\r\n  const [refresh, setRefresh] = useState(false);\r\n  const [playMode, changePlayMode] = useState(0);\r\n  // 播放队列是否显示\r\n  const [willShow, setWillShow] = useState(false);\r\n\r\n  function prev() {\r\n    if (playQueue.length === 0) {\r\n      return;\r\n    }\r\n    switch (playMode) {\r\n      case 0:\r\n        return handleOrderPlay(false);\r\n      case 1:\r\n        return handleRandomPlay();\r\n      case 2:\r\n        return handleRepeatPlay();\r\n    }\r\n  }\r\n\r\n  function next() {\r\n    if (playQueue.length === 0) {\r\n      return;\r\n    }\r\n    switch (playMode) {\r\n      case 0:\r\n        return handleOrderPlay();\r\n      case 1:\r\n        return handleRandomPlay();\r\n      case 2:\r\n        return handleRepeatPlay();\r\n    }\r\n  }\r\n\r\n  function handleRepeatPlay() {\r\n    window.audio.currentTime = 0;\r\n  }\r\n\r\n  function handleRandomPlay() {\r\n    const number = Math.floor(Math.random() * playQueue.length);\r\n    if (!playUrlMap.get(playQueue[number])) {\r\n      fetchPlayUrl(playQueue[number]);\r\n    }\r\n    changePlayId(number);\r\n  }\r\n\r\n  function handleOrderPlay(isNext = true) {\r\n    if (isNext) {\r\n      let index = currIndex + 1;\r\n      if (index >= playQueue.length) {\r\n        index = 0;\r\n      }\r\n      if (!playUrlMap.get(playQueue[index])) {\r\n        fetchPlayUrl(playQueue[index]);\r\n      }\r\n      console.log(index);\r\n      changePlayId(index);\r\n    } else {\r\n      let index = currIndex - 1;\r\n      if (index < 0) {\r\n        index = playQueue.length - 1;\r\n      }\r\n      if (!playUrlMap.get(playQueue[index])) {\r\n        fetchPlayUrl(playQueue[index]);\r\n      }\r\n      changePlayId(index);\r\n    }\r\n  }\r\n\r\n  function onChangePlayMode(index: number) {\r\n    if (index + 1 > 2) {\r\n      return changePlayMode(0);\r\n    }\r\n    changePlayMode(index + 1);\r\n  }\r\n\r\n  function onProgressChange(value: number) {\r\n    window.audio.currentTime = value;\r\n    setRefresh(!refresh);\r\n    setPlayed(true);\r\n  }\r\n\r\n  function onChanging(value: number) {\r\n    setValue(value);\r\n    clearInterval(timerRef.current);\r\n  }\r\n\r\n  function onVolumnChanging(value: number) {\r\n    window.audio.volume = value;\r\n    setVolumn(value);\r\n  }\r\n\r\n  function handleCanPlay() {\r\n    window.audio.play();\r\n    setMax(window.audio.duration);\r\n    setPlayed(true);\r\n    changePlayState(true);\r\n  }\r\n\r\n  function changeWillListShow(flag: boolean) {\r\n    setWillShow(flag);\r\n  }\r\n\r\n  function onPlayEnd() {\r\n    next();\r\n  }\r\n\r\n  useEffect(() => {\r\n    function handlePlaying() {\r\n      setValue(window.audio.currentTime);\r\n    }\r\n\r\n    timerRef.current = setInterval(() => {\r\n      handlePlaying();\r\n      if (!isplayed) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      clearInterval(timerRef.current);\r\n    };\r\n  }, [isplayed, refresh]);\r\n\r\n  function onChangePlayState(flag: number) {\r\n    if (!window.audio.src) return;\r\n    if (flag) {\r\n      window.audio.play();\r\n      setPlayed(true);\r\n      changePlayState(true);\r\n    } else {\r\n      window.audio.pause();\r\n      setPlayed(false);\r\n      changePlayState(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.audio = document.getElementById(\"play-audio\") as HTMLAudioElement;\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"zsw-player\">\r\n      <ul className=\"btn\">\r\n        <li>\r\n          <StepBackwardFilled onClick={prev} />\r\n        </li>\r\n        <li>\r\n          {window.audio && !window.audio.paused ? (\r\n            <PauseCircleFilled onClick={() => onChangePlayState(0)} />\r\n          ) : (\r\n            <PlayCircleFilled onClick={() => onChangePlayState(1)} />\r\n          )}\r\n        </li>\r\n        <li>\r\n          <StepForwardFilled onClick={next} />\r\n        </li>\r\n      </ul>\r\n      <Progress\r\n        onChange={onProgressChange}\r\n        max={max}\r\n        value={value}\r\n        onChanging={onChanging}\r\n        className=\"player-progress\"\r\n      />\r\n      <div className=\"volumn\">\r\n        <SoundFilled />\r\n        <Slider\r\n          max={1}\r\n          step={0.1}\r\n          className=\"volumn-slider\"\r\n          defaultValue={0}\r\n          value={volumn}\r\n          onChange={onVolumnChanging}\r\n        />\r\n      </div>\r\n      <div className=\"play-mode\">\r\n        <Tooltip title={playModeArr[playMode].title}>\r\n          <span\r\n            className={`iconfont ${playModeArr[playMode].icon}`}\r\n            onClick={() => onChangePlayMode(playModeArr[playMode].index)}\r\n          ></span>\r\n        </Tooltip>\r\n      </div>\r\n      <div className=\"will-play\">\r\n        <span\r\n          className=\"iconfont icon-bofangliebiao\"\r\n          title=\"播放列表\"\r\n          onClick={() => changeWillListShow(!willShow)}\r\n        ></span>\r\n      </div>\r\n      <audio\r\n        src={src}\r\n        id=\"play-audio\"\r\n        onCanPlay={handleCanPlay}\r\n        onEnded={onPlayEnd}\r\n      />\r\n      <WillPlayList show={willShow} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Player));\r\n","import Player from \"./player\";\r\n\r\nexport * from \"./player\";\r\nexport default Player;\r\n","import {\r\n  getChangePlayIdAction,\r\n  fetchPlayUrl,\r\n  getChangePlayStateAction\r\n} from \"./store\";\r\nimport { UnionStateTypes } from \"../../store\";\r\n\r\nexport const mapStateToProps = (\r\n  state: UnionStateTypes\r\n): {\r\n  src: string | undefined;\r\n  currIndex: number;\r\n  playQueue: Array<string>;\r\n  playUrlMap: Map<string, string>;\r\n} => {\r\n  const player = state.player;\r\n  const currIndex = player.current;\r\n  const playQueue = player.playQueue;\r\n  const current = playQueue[currIndex];\r\n\r\n  return {\r\n    src: player.playUrlMap.get(current),\r\n    currIndex: currIndex,\r\n    playQueue,\r\n    playUrlMap: player.playUrlMap\r\n  };\r\n};\r\n\r\nexport const mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    changePlayId(index: number) {\r\n      console.log(index);\r\n      dispatch(getChangePlayIdAction(index));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayState(flag: boolean) {\r\n      dispatch(getChangePlayStateAction(flag));\r\n    }\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { parseDate } from \"../../utils\";\r\nimport { LikeOutlined } from \"@ant-design/icons\";\r\n\r\nexport interface IBeReplied {\r\n  nickname: string;\r\n  userId: string;\r\n  content: string;\r\n  beRepliedCommentId: string;\r\n}\r\n\r\nexport interface CommentItemProps {\r\n  userId: string;\r\n  nickname: string;\r\n  avatarUrl: string;\r\n  content: string;\r\n  time: string;\r\n  commentId: string;\r\n  beReplied?: Array<IBeReplied>;\r\n  likedCount: number;\r\n}\r\n\r\nconst CommentItem: React.FC<CommentItemProps> = (props) => {\r\n  const { nickname, avatarUrl, content, time, beReplied, likedCount } = props;\r\n\r\n  return (\r\n    <div className=\"comment-item\">\r\n      <div className=\"img\">\r\n        <img src={avatarUrl} alt=\"\" className=\"avatar\" width={36} />\r\n      </div>\r\n      <div className=\"info\">\r\n        <p className=\"content\">\r\n          <span className=\"avatar-name\">{nickname}:</span> {content}\r\n        </p>\r\n        {beReplied &&\r\n          beReplied.length !== 0 &&\r\n          beReplied.map((reply) => {\r\n            return (\r\n              <div className=\"reply\" key={reply.beRepliedCommentId}>\r\n                <span className=\"avatar-name\">{reply.nickname}</span>\r\n                {reply.content}\r\n              </div>\r\n            );\r\n          })}\r\n        <p className=\"time\">{parseDate(\"YYYY年m月d日 HH:MM\", time)}</p>\r\n      </div>\r\n      <div className=\"interaction\">\r\n        <span>\r\n          <LikeOutlined />({likedCount})\r\n        </span>\r\n        <span className=\"split\">|</span>\r\n        <span>分享</span>\r\n        <span className=\"split\">|</span>\r\n        <span>回复</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(CommentItem);\r\n","import React, {\r\n  useState,\r\n  ChangeEvent,\r\n  useEffect,\r\n  useRef,\r\n  useContext\r\n} from \"react\";\r\nimport CommentItem, { CommentItemProps, IBeReplied } from \"./commentItem\";\r\nimport axios from \"../../network\";\r\nimport { LoadingOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport { Pagination, message } from \"antd\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { getChangeSignInShowAction } from \"../SignIn/store/actionCreator\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nexport function parseReplied(beReplied: Array<any>): Array<IBeReplied> | [] {\r\n  if (beReplied.length === 0) return [];\r\n\r\n  const _beReplied = [];\r\n\r\n  for (let i = 0; i < beReplied.length; i++) {\r\n    const element = beReplied[i];\r\n    const replied: IBeReplied = {\r\n      content: element.content,\r\n      userId: element.user.userId,\r\n      nickname: element.user.nickname,\r\n      beRepliedCommentId: element.beRepliedCommentId\r\n    };\r\n    _beReplied.push(replied);\r\n  }\r\n\r\n  return _beReplied;\r\n}\r\n\r\nexport function parseComments(\r\n  comments: Array<any>\r\n): Array<CommentItemProps> | [] {\r\n  if (comments.length === 0) return [];\r\n  const _comments = [];\r\n  for (let i = 0; i < comments.length; i++) {\r\n    const element = comments[i];\r\n    const comment: CommentItemProps = {\r\n      userId: element.user.userId,\r\n      nickname: element.user.nickname,\r\n      avatarUrl: element.user.avatarUrl,\r\n      content: element.content,\r\n      time: element.time,\r\n      likedCount: element.likedCount,\r\n      commentId: element.commentId,\r\n      beReplied: parseReplied(element.beReplied)\r\n    };\r\n    _comments.push(comment);\r\n  }\r\n  return _comments;\r\n}\r\n\r\ninterface CommentsProps {\r\n  id: string;\r\n  type: commentType;\r\n  userState: boolean;\r\n  ChangeSignInShow: () => void;\r\n}\r\n\r\nconst Comments: React.FC<CommentsProps> = (props) => {\r\n  const [restCount, setRestCount] = useState(280);\r\n  const [popComments, setPopComments] = useState<Array<CommentItemProps>>([]);\r\n  const [newComments, setNewComments] = useState<Array<CommentItemProps>>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  // 有无更多的热门评论\r\n  const [moreHot, setMoreHot] = useState(false);\r\n  const [popCommentsShow, setPopCommentsShow] = useState(false);\r\n  const { userState, ChangeSignInShow, id, type } = props;\r\n\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const $textarea = useRef<HTMLTextAreaElement>(null);\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: 50,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n  const $homeContent = useRef<HTMLDivElement>();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 50\r\n  });\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    if (page >= 2) {\r\n      setPopCommentsShow(false);\r\n    } else if (page === 1) {\r\n      setPopCommentsShow(true);\r\n    }\r\n    scrollY(200);\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  function handleMoreClick() {\r\n    context.setHistoryStack(\"push\", \"moreComments\");\r\n    history.push(`/moreComments/${type}/${id}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    $homeContent.current = document.getElementsByClassName(\r\n      \"home-content\"\r\n    )[0] as HTMLDivElement;\r\n  }, []);\r\n\r\n  function scrollY(top: number) {\r\n    if ($homeContent && $homeContent.current) {\r\n      $homeContent.current.scroll({ top });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function fetchUrl(id: string, type: commentType) {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      switch (type) {\r\n        case \"playlist\":\r\n          return `comment/playlist?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"music\":\r\n          return `comment/music?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"mv\":\r\n          return `comment/mv?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n        case \"album\":\r\n          return `comment/album?id=${id}&limit=${limit}&offset=${offset}&timestamp=${Date.now()}`;\r\n      }\r\n    }\r\n\r\n    async function fetchComments() {\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(fetchUrl(id, type));\r\n      if (queryParams.page === 0) {\r\n        !isUnmount && setMoreHot(data.moreHot);\r\n        !isUnmount && setPopComments(parseComments(data.hotComments));\r\n        !isUnmount && setPopCommentsShow(true);\r\n      }\r\n      !isUnmount && setNewComments(parseComments(data.comments));\r\n      !isUnmount &&\r\n        setPagination({\r\n          total: data.total\r\n        });\r\n      !isUnmount && setLoading(false);\r\n    }\r\n\r\n    fetchComments();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, type, queryParams]);\r\n\r\n  function onChange(e: ChangeEvent<HTMLTextAreaElement>) {\r\n    setRestCount(280 - e.target.value.length);\r\n  }\r\n\r\n  function mapTypeToNum(type: commentType) {\r\n    switch (type) {\r\n      case \"music\":\r\n        return 0;\r\n      case \"mv\":\r\n        return 1;\r\n      case \"playlist\":\r\n        return 2;\r\n    }\r\n  }\r\n\r\n  function sendComment() {\r\n    if (!userState) {\r\n      return ChangeSignInShow();\r\n    }\r\n    if ($textarea && $textarea.current) {\r\n      const _type = mapTypeToNum(type);\r\n      axios\r\n        .get(\r\n          `/comment?t=1&type=${_type}&id=${id}&content=${$textarea.current.value}`,\r\n          { withCredentials: true }\r\n        )\r\n        .then((res) => {\r\n          const comment = res.data.comment;\r\n          const commentItem: CommentItemProps = {\r\n            commentId: comment.commentId,\r\n            content: comment.content,\r\n            time: comment.time,\r\n            userId: comment.user.userId,\r\n            nickname: comment.user.nickname,\r\n            avatarUrl: comment.user.avatarUrl,\r\n            likedCount: 0\r\n          };\r\n          message.success({\r\n            content: \"评论发送成功\",\r\n            duration: 0.5,\r\n            onClose: () => {\r\n              setNewComments((value) => {\r\n                return [commentItem].concat(value);\r\n              });\r\n              if ($textarea && $textarea.current) {\r\n                $textarea.current.value = \"\";\r\n              }\r\n            }\r\n          });\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"zsw-comments\">\r\n      <div className=\"textarea\">\r\n        <div className=\"textarea-inner\">\r\n          <textarea\r\n            name=\"\"\r\n            id=\"\"\r\n            rows={3}\r\n            maxLength={280}\r\n            onChange={onChange}\r\n            ref={$textarea}\r\n          />\r\n          <div className=\"rest-words-count\">{restCount}</div>\r\n        </div>\r\n        <button className=\"btn-comment\" onClick={sendComment}>\r\n          评论\r\n        </button>\r\n      </div>\r\n      {popComments.length !== 0 && (\r\n        <div className={`pop-comments ${popCommentsShow ? \"show\" : \"\"}`}>\r\n          <div className=\"zsw-comments-title\">精彩评论</div>\r\n          {popComments.map((comment) => {\r\n            return <CommentItem {...comment} key={comment.commentId} />;\r\n          })}\r\n          {moreHot && (\r\n            <div className=\"more\">\r\n              <span onClick={handleMoreClick}>\r\n                查看更多评论\r\n                <RightOutlined />\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div className=\"new-comments\">\r\n        <div className=\"zsw-comments-title\">最新评论({pagination.total})</div>\r\n        {loading && (\r\n          <div className=\"loading\">\r\n            <LoadingOutlined />\r\n            <span className=\"text\">加载中...</span>\r\n          </div>\r\n        )}\r\n        {newComments.map((comment) => {\r\n          return <CommentItem {...comment} key={comment.commentId} />;\r\n        })}\r\n        <div className=\"comments-pagination\">\r\n          <Pagination {...defaultPagination.current} {...pagination} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const header = state.header;\r\n  return {\r\n    userState: header.userState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    ChangeSignInShow() {\r\n      dispatch(getChangeSignInShowAction(true));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(Comments));\r\n","import Comments from \"./comments\";\r\n\r\nexport default Comments;\r\nexport * from \"./comments\";\r\nexport * from \"./commentItem\";\r\n","import React from \"react\";\r\nimport { parsePlayCount } from \"../../utils\";\r\n\r\nconst SimiPlaylistItem: React.FC<ISimiPlaylistItem> = (props) => {\r\n  const { picUrl, name, playCount, onClick, id } = props;\r\n\r\n  function handleClick() {\r\n    onClick && onClick(id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"simi-playlist-item\" onClick={handleClick}>\r\n      <div className=\"simi-playlist-item-left\">\r\n        <img src={picUrl} alt=\"\" />\r\n      </div>\r\n      <div className=\"simi-playlist-item-right\">\r\n        <p className=\"simi-playlist-item-right-name\">{name}</p>\r\n        <p className=\"simi-playlist-item-right-playcount\">\r\n          {parsePlayCount(playCount)}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiPlaylistItem);\r\n","import SimiPlaylist from \"./simiPlaylist\";\r\n\r\nexport default SimiPlaylist;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport SimiPlaylistItem from \"./simiPlaylistItem\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { Spin } from \"antd\";\r\n\r\nconst SimiPlaylist: React.FC<SimiPlaylistProps> = (props) => {\r\n  const { id, onClick } = props;\r\n  const [itemArray, setItemArray] = useState<Array<ISimiPlaylistItem>>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function parse(playlist: any): ISimiPlaylistItem {\r\n      return {\r\n        id: playlist.id,\r\n        name: playlist.name,\r\n        picUrl: playlist.coverImgUrl,\r\n        playCount: playlist.playCount\r\n      };\r\n    }\r\n    async function fetchData() {\r\n      setLoading(true);\r\n      const { data } = await axios.get(`simi/playlist?id=${id}`);\r\n      const playlists = data.playlists as Array<any>;\r\n      const arr: Array<ISimiPlaylistItem> = [];\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = parse(playlists[i]);\r\n        arr.push(item);\r\n      }\r\n      setItemArray(arr);\r\n      setLoading(false);\r\n    }\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className=\"simi-playlist\">\r\n      {loading ? (\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Spin indicator={<LoadingOutlined />} tip={\"加载中\"} />\r\n        </div>\r\n      ) : (\r\n        itemArray.map((item) => {\r\n          return <SimiPlaylistItem {...item} key={item.id} onClick={onClick} />;\r\n        })\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiPlaylist);\r\n","import React, { useRef, useEffect, useState, useContext, useMemo } from \"react\";\r\nimport {\r\n  HeartFilled,\r\n  FolderAddOutlined,\r\n  DownloadOutlined,\r\n  ShareAltOutlined,\r\n  ShrinkOutlined\r\n} from \"@ant-design/icons\";\r\nimport { parseLyrics } from \"../../utils\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { fetchPlayLyric } from \"../Player/store\";\r\nimport Comments from \"../comments\";\r\nimport SimiPlaylist from \"../SimiPlaylist\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\nimport classnames from \"classnames\";\r\nimport { useHistory, withRouter, RouteComponentProps } from \"react-router-dom\";\r\n\r\nexport interface SongDetailContentProps extends SongDetailContent {\r\n  hide: (flag: boolean) => void;\r\n}\r\n\r\nconst SongDetailContent: React.FC<\r\n  SongDetailContentProps & RouteComponentProps\r\n> = (props) => {\r\n  const { show, fetchPlayLyric, songDetail, lyricStr, playState, hide } = props;\r\n  const classes = useMemo(() => {\r\n    return classnames(\"zsw-song-detail-content\", {\r\n      hidden: !show\r\n    });\r\n  }, [show]);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const scrollInnerRef = useRef<HTMLDivElement>(null);\r\n  const [lyrics, setLyrics] = useState<Array<LyricRegItem>>([]);\r\n  const timerRef = useRef<any>();\r\n  const [currLyricIndex, changeCurrLyricIndex] = useState(0);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (!lyricStr) {\r\n      fetchPlayLyric(songDetail.id);\r\n    }\r\n  }, [fetchPlayLyric, songDetail.id, lyricStr]);\r\n\r\n  useEffect(() => {\r\n    changeCurrLyricIndex(0);\r\n    setLyrics([]);\r\n  }, [songDetail.id]);\r\n\r\n  useEffect(() => {\r\n    if (lyricStr) {\r\n      setLyrics(parseLyrics(lyricStr));\r\n    }\r\n  }, [lyricStr]);\r\n\r\n  useEffect(() => {\r\n    function scrollTo(top: number) {\r\n      let dis = top - 240 <= 0 ? 0 : top - 240;\r\n      if (scrollRef && scrollRef.current) {\r\n        scrollRef.current.scrollTo({ top: dis });\r\n      }\r\n    }\r\n    function scrollNext(\r\n      audio: HTMLAudioElement,\r\n      currlyric: Array<LyricRegItem>,\r\n      children: HTMLCollection\r\n    ) {\r\n      for (let i = currLyricIndex; i < currlyric.length; i++) {\r\n        const nextIndex =\r\n          i + 1 >= currlyric.length ? currlyric.length - 1 : i + 1;\r\n        if (\r\n          i === currlyric.length - 1 &&\r\n          audio.currentTime >= currlyric[i].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n        if (\r\n          audio.currentTime >= currlyric[i].second &&\r\n          audio.currentTime < currlyric[nextIndex].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n      }\r\n    }\r\n    function scrollPrev(\r\n      audio: HTMLAudioElement,\r\n      currlyric: Array<LyricRegItem>,\r\n      children: HTMLCollection\r\n    ) {\r\n      for (let i = currLyricIndex; i >= 0; i--) {\r\n        const prevIndex = i - 1 <= 0 ? 0 : i - 1;\r\n        if (\r\n          i === 0 &&\r\n          audio.currentTime <= currlyric[i].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[i] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(i);\r\n        }\r\n        if (\r\n          audio.currentTime <= currlyric[i].second &&\r\n          audio.currentTime > currlyric[prevIndex].second &&\r\n          i !== currLyricIndex\r\n        ) {\r\n          scrollTo((children[prevIndex] as HTMLParagraphElement).offsetTop);\r\n          return changeCurrLyricIndex(prevIndex);\r\n        }\r\n      }\r\n    }\r\n    function scroll() {\r\n      if (\r\n        scrollInnerRef &&\r\n        scrollInnerRef.current &&\r\n        scrollInnerRef.current.children.length !== 0\r\n      ) {\r\n        const children = scrollInnerRef.current.children;\r\n        const currlyric = lyrics;\r\n        const audio = window.audio;\r\n        if (audio.currentTime < currlyric[currLyricIndex].second) {\r\n          scrollPrev(audio, currlyric, children);\r\n        } else {\r\n          scrollNext(audio, currlyric, children);\r\n        }\r\n      }\r\n    }\r\n    if (lyrics.length !== 0) {\r\n      timerRef.current = setInterval(() => {\r\n        if (!playState) {\r\n          return clearInterval(timerRef.current);\r\n        }\r\n        scroll();\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      clearInterval(timerRef.current);\r\n    };\r\n  }, [playState, currLyricIndex, lyrics]);\r\n\r\n  useEffect(() => {\r\n    hide(false);\r\n  }, [props.location.pathname, hide]);\r\n\r\n  function handleSimiPlaylistClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={show === true}\r\n      timeout={400}\r\n      mountOnEnter\r\n      classNames={{\r\n        enter: \"animate__animated\",\r\n        enterActive: \"animate__fadeIn\",\r\n        exit: \"animate__animated\",\r\n        exitActive: \"animate__fadeOut\"\r\n      }}\r\n    >\r\n      <div className={classes}>\r\n        <div>\r\n          <div className=\"zsw-song-detail-content-top\">\r\n            <div\r\n              className=\"zsw-song-detail-content-top-overlay\"\r\n              style={{\r\n                backgroundImage: `url(${songDetail.picUrl})`\r\n              }}\r\n            ></div>\r\n            <div className=\"zsw-song-detail-content-top-content\">\r\n              <div className=\"zsw-song-detail-content-top-left\">\r\n                <div\r\n                  className={`zsw-song-detail-content-top-left-round ${\r\n                    playState ? \"spin\" : \"\"\r\n                  }`}\r\n                >\r\n                  <img src={songDetail.picUrl} alt=\"\" />\r\n                </div>\r\n                <ul className=\"zsw-song-detail-content-top-left-tags\">\r\n                  <li>\r\n                    <HeartFilled />\r\n                    喜欢\r\n                  </li>\r\n                  <li>\r\n                    <FolderAddOutlined />\r\n                    添加\r\n                  </li>\r\n                  <li>\r\n                    <DownloadOutlined />\r\n                    收藏\r\n                  </li>\r\n                  <li>\r\n                    <ShareAltOutlined />\r\n                    分享\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div className=\"zsw-song-detail-content-top-right\">\r\n                <h3>\r\n                  {songDetail.name}\r\n                  <ShrinkOutlined\r\n                    className=\"shrink\"\r\n                    onClick={() => hide(false)}\r\n                  />\r\n                </h3>\r\n                {songDetail.alia && (\r\n                  <p className=\"zsw-song-detail-content-top-right-alia\">\r\n                    {songDetail.alia}\r\n                  </p>\r\n                )}\r\n                <div className=\"zsw-song-detail-content-top-right-detail\">\r\n                  专辑:{\" \"}\r\n                  <span\r\n                    className=\"album-name\"\r\n                    onClick={() => toAlbum(songDetail.albumId)}\r\n                  >\r\n                    {songDetail.album}\r\n                  </span>\r\n                  歌手:\r\n                  {songDetail.singers.map((singer) => (\r\n                    <span\r\n                      className=\"singer-name\"\r\n                      key={singer.id}\r\n                      onClick={() => toSingerDetail(singer.id)}\r\n                    >\r\n                      {singer.name}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n                <br />\r\n                <div\r\n                  className=\"zsw-song-detail-content-top-right-scroll\"\r\n                  ref={scrollRef}\r\n                >\r\n                  <div ref={scrollInnerRef}>\r\n                    {lyrics.map((lyric, index) => {\r\n                      return (\r\n                        <p\r\n                          key={`${lyric.second} ${index}`}\r\n                          className={`${\r\n                            index === currLyricIndex ? \"active\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {lyric.content}\r\n                        </p>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"zsw-song-detail-content-bottom\">\r\n            <div className=\"zsw-song-detail-content-bottom-left\">\r\n              <div className=\"zsw-song-detail-content-bottom-title\">\r\n                听友评论\r\n              </div>\r\n              {show && <Comments type=\"music\" id={songDetail.id} />}\r\n            </div>\r\n            {show && (\r\n              <div className=\"zsw-song-detail-content-bottom-right\">\r\n                <div className=\"zsw-song-detail-content-bottom-title\">\r\n                  包含这首歌的歌单\r\n                </div>\r\n                <SimiPlaylist\r\n                  id={songDetail.id}\r\n                  onClick={handleSimiPlaylistClick}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const id = player.playQueue[player.current];\r\n\r\n  return {\r\n    playState: player.playState,\r\n    lyricStr: player.playLyricMap.get(id)\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    fetchPlayLyric(id: string) {\r\n      dispatch(fetchPlayLyric(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(React.memo(SongDetailContent)));\r\n","import SongDetail from \"./songDetail\";\r\n\r\nexport default SongDetail;\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport { ArrowsAltOutlined } from \"@ant-design/icons\";\r\nimport SongDetailContent from \"./songDetailContent\";\r\n\r\nconst SongDetail: React.FC<SongDetailProps> = (props) => {\r\n  const { songDetail, current } = props;\r\n  const [contentShow, setContentShow] = useState(false);\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={current !== -1}\r\n      timeout={200}\r\n      mountOnEnter\r\n      classNames={{\r\n        enter: \"animate__animated\",\r\n        enterActive: \"animate__fadeIn\",\r\n        exit: \"animate__animated\",\r\n        exitActive: \"animate__fadeOut\"\r\n      }}\r\n      unmountOnExit\r\n    >\r\n      <div className=\"zsw-song-detail\">\r\n        <div className=\"zsw-song-detail-left\">\r\n          <img\r\n            src={songDetail?.picUrl}\r\n            alt=\"\"\r\n            className=\"zsw-song-detail-img\"\r\n          />\r\n          <div\r\n            className=\"zsw-song-detail-enlarge\"\r\n            onClick={() => setContentShow(true)}\r\n          >\r\n            <ArrowsAltOutlined />\r\n          </div>\r\n        </div>\r\n        <div className=\"zsw-song-detail-info\">\r\n          <p>{songDetail?.name}</p>\r\n          <p className=\"zsw-song-detail-info-singername\">\r\n            {songDetail?.singers.map((singer) => {\r\n              return <span key={singer.id}>{singer.name}</span>;\r\n            })}\r\n          </p>\r\n        </div>\r\n        {songDetail && (\r\n          <SongDetailContent\r\n            songDetail={songDetail}\r\n            show={contentShow}\r\n            hide={setContentShow}\r\n          />\r\n        )}\r\n      </div>\r\n    </CSSTransition>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (\r\n  state: UnionStateTypes\r\n): { current: number; songDetail?: PlayDetailItem } => {\r\n  const player = state.player;\r\n  const id = player.playQueue[player.current];\r\n  const item = player.playDetailMap.get(id);\r\n\r\n  return {\r\n    current: player.current,\r\n    songDetail: item\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(SongDetail));\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { LeftOutlined, LoadingOutlined } from \"@ant-design/icons\";\r\nimport CommentItem, { CommentItemProps } from \"./commentItem\";\r\nimport axios from \"../../network\";\r\nimport { parseComments } from \"./comments\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\ninterface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\ninterface MoreCommentsProps {\r\n  match: match;\r\n}\r\n\r\nconst MoreComments: React.FC<MoreCommentsProps> = (props) => {\r\n  const { id, type } = (props.match as match<{\r\n    id: string;\r\n    type: commentType;\r\n  }>).params;\r\n  const [comments, setComments] = useState<Array<CommentItemProps>>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isReachBottom, setReachBottom] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const $homeContent = document.getElementsByClassName(\r\n      \"zsw-more-comments\"\r\n    )[0] as HTMLDivElement;\r\n    function handleScroll2Bottom(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (target.scrollTop + target.offsetHeight + 20 > target.scrollHeight) {\r\n        setReachBottom(true);\r\n      } else {\r\n        setReachBottom(false);\r\n      }\r\n    }\r\n    if ($homeContent) {\r\n      $homeContent.addEventListener(\"scroll\", handleScroll2Bottom);\r\n    }\r\n    return () => {\r\n      $homeContent.removeEventListener(\"scroll\", handleScroll2Bottom);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      switch (type) {\r\n        case \"playlist\":\r\n          return `comment/hot?id=${id}&type=2&offset=${offset}&limit=${limit}`;\r\n        case \"music\":\r\n          return `comment/hot?id=${id}&type=0&offset=${offset}&limit=${limit}`;\r\n        case \"mv\":\r\n          return `comment/hot?id=${id}&type=1&offset=${offset}&limit=${limit}`;\r\n        case \"album\":\r\n          return `comment/hot?id=${id}&type=3&offset=${offset}&limit=${limit}`;\r\n      }\r\n    }\r\n\r\n    async function fetchComments() {\r\n      const { data } = await axios.get(fetchUrl());\r\n      setHasMore(data.hasMore);\r\n      setComments((_data) => {\r\n        return _data.concat(parseComments(data.hotComments));\r\n      });\r\n    }\r\n\r\n    fetchComments();\r\n  }, [queryParams, id, type]);\r\n\r\n  useEffect(() => {\r\n    if (isReachBottom) {\r\n      setQueryParams((data) => {\r\n        return {\r\n          page: data.page + 1,\r\n          limit: data.limit\r\n        };\r\n      });\r\n    }\r\n  }, [isReachBottom]);\r\n\r\n  function onBack() {\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <div className=\"zsw-more-comments\">\r\n      <div>\r\n        <div className=\"more-comments-nav\">\r\n          <LeftOutlined onClick={onBack} />\r\n          精彩评论\r\n        </div>\r\n        <div className=\"zsw-more-comments-content\">\r\n          {comments.map((comment) => {\r\n            return <CommentItem {...comment} key={comment.commentId} />;\r\n          })}\r\n          {hasMore && (\r\n            <div className=\"loading\">\r\n              <LoadingOutlined />\r\n              <span className=\"text\">加载中...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MoreComments);\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport axios from \"../../../network\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { parseTime, mergeSingers, parseCopyright } from \"../../../utils\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../Player/store\";\r\nimport { UnionStateTypes } from \"../../../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../../pages/Home\";\r\n\r\nconst SongSheet: React.FC<SongSheetProps> = (props) => {\r\n  const {\r\n    trackIds,\r\n    keywords,\r\n    show,\r\n    setPlayDetailMap,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    current,\r\n    playState,\r\n    willPlaylistId\r\n  } = props;\r\n  const trackIdsRef = useRef([...trackIds]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tableData, setTableData] = useState<Array<ISongSheetItem>>([]);\r\n  const tableDataRef = useRef<Array<ISongSheetItem>>();\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    const trackids: Array<string> = [];\r\n    function parseSong(song: any, index: number) {\r\n      const {\r\n        al: { name, picUrl },\r\n        ar,\r\n        id,\r\n        dt,\r\n        noCopyrightRcmd,\r\n        fee\r\n      } = song;\r\n      // const {\r\n      //   data: { success }\r\n      // } = await axios.get(`/check/music?id=${id}`);\r\n      const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n      if (copyright) {\r\n        trackids.push(id);\r\n      }\r\n      return {\r\n        duration: parseTime(dt),\r\n        singers: mergeSingers(ar),\r\n        id,\r\n        index: index.toString().padStart(2, \"0\"),\r\n        album: name,\r\n        picUrl,\r\n        name: song.name,\r\n        hasCopyRight: copyright,\r\n        albumId: song.al.id\r\n      };\r\n    }\r\n    function fetchSongsInfo() {\r\n      setTableData([]);\r\n      if (trackIds && trackIds.length) {\r\n        !isUnmount && setLoading(true);\r\n        const idsStr = trackIds.join(\",\");\r\n        axios.get(\"/song/detail?ids=\" + idsStr).then(({ data }) => {\r\n          const songs = data.songs as Array<any>;\r\n          const _tableData = [];\r\n          const dispatchedMap = new Map<string, PlayDetailItem>();\r\n          for (let i = 0; i < songs.length; i++) {\r\n            const parsedSong = parseSong(songs[i], i + 1);\r\n            if (parsedSong.hasCopyRight) {\r\n              const song: PlayDetailItem = Object.assign({}, parsedSong, {\r\n                alia: songs[i].alia.join(\",\")\r\n              });\r\n              dispatchedMap.set(parsedSong.id, song);\r\n            }\r\n            _tableData.push(parsedSong);\r\n          }\r\n          trackIdsRef.current = trackids;\r\n          !isUnmount && setTableData(_tableData);\r\n          tableDataRef.current = _tableData;\r\n          !isUnmount && setLoading(false);\r\n          setPlayDetailMap(dispatchedMap);\r\n        });\r\n      }\r\n    }\r\n\r\n    fetchSongsInfo();\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [trackIds, setPlayDetailMap]);\r\n\r\n  useEffect(() => {\r\n    if (tableDataRef.current && tableDataRef.current.length) {\r\n      const _tableData: ISongSheetItem[] = [];\r\n      for (let i = 0; i < tableDataRef.current.length; i++) {\r\n        const { name, album, singers } = tableDataRef.current[i];\r\n        const singerName = singers.map((singer) => singer.name);\r\n        if (\r\n          name.includes(keywords) ||\r\n          album.includes(keywords) ||\r\n          singerName.includes(keywords)\r\n        ) {\r\n          _tableData.push(tableDataRef.current[i]);\r\n        }\r\n      }\r\n      setTableData(_tableData);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [keywords]);\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"manipulation\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \"因合作方要求，该资源暂时下架>_<\"\r\n      });\r\n    if (willPlaylistId.indexOf(id) === -1) {\r\n      pushPlayQueue(trackIdsRef.current, id);\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Table\r\n        bordered\r\n        dataSource={tableData}\r\n        pagination={false}\r\n        rowKey={(record) => record.id}\r\n        className={`songsheet-table ${show ? \"show\" : \"\"}`}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        loading={loading}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () =>\r\n              handleDoubleClick(record.id, record.hasCopyRight)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={40}\r\n          align=\"right\"\r\n          render={(value: any, record: ISongSheetItem, index) => (\r\n            <>\r\n              {!record.hasCopyRight ? (\r\n                <span>无</span>\r\n              ) : record.id === current ? (\r\n                <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n              ) : (\r\n                <span>{(index + 1).toString().padStart(2, \"0\")}</span>\r\n              )}\r\n            </>\r\n          )}\r\n        />\r\n        <Table.Column title=\"操作\" render={renderManipulation} width={80} />\r\n        <Table.Column\r\n          dataIndex=\"name\"\r\n          title=\"音乐标题\"\r\n          width={300}\r\n          ellipsis\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.name !== b.name ? (a.name > b.name ? 1 : -1) : 0;\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"singers\"\r\n          title=\"歌手\"\r\n          ellipsis\r\n          width={200}\r\n          render={(value: ISingerInfo[]) => {\r\n            return (\r\n              <div>\r\n                {value.map((item) => (\r\n                  <span\r\n                    key={item.id}\r\n                    className=\"singer-name\"\r\n                    onClick={() => toSingerDetail(item.id)}\r\n                  >\r\n                    {item.name}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"album\"\r\n          title=\"专辑\"\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.album !== b.album ? (a.album > b.album ? 1 : -1) : 0;\r\n          }}\r\n          ellipsis\r\n          width={200}\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column\r\n          dataIndex=\"duration\"\r\n          title=\"时长\"\r\n          sorter={(a: ISongSheetItem, b: ISongSheetItem) => {\r\n            return a.duration !== b.duration\r\n              ? a.duration > b.duration\r\n                ? 1\r\n                : -1\r\n              : 0;\r\n          }}\r\n          width={100}\r\n        />\r\n      </Table>\r\n    </>\r\n  );\r\n};\r\n\r\nSongSheet.defaultProps = {\r\n  clickAndPushAll: true\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    willPlaylistId: player.willplaylistId\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>, playlistId: string) {\r\n      dispatch(getPushPlayQueueAction(ids, true, playlistId));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(SongSheet));\r\n","import PlaylistInfo from \"./playlistInfo\";\r\n\r\nexport default PlaylistInfo;\r\n\r\nexport * from \"./playlistInfo\";\r\n","import React, { useState } from \"react\";\r\nimport SearchInput from \"../SearchInput\";\r\nimport SongSheet from \"./components/songsheet\";\r\nimport Comments from \"../comments\";\r\n\r\ntype currentType = \"playlist\" | \"comments\" | \"subscribers\";\r\n\r\nconst PlaylistInfo: React.FC<PlaylistInfoProps> = (props) => {\r\n  const [current, setCurrent] = useState<currentType>(\"playlist\");\r\n  const [keywords, setKeywords] = useState(\"\");\r\n  const { trackIds, playlistId } = props;\r\n\r\n  function itemClick(curr: currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  function handleInputChange(keywords: string) {\r\n    setKeywords(keywords);\r\n  }\r\n\r\n  return (\r\n    <div className=\"playlist-info\">\r\n      <ul className=\"playlist-info-nav\">\r\n        <li\r\n          onClick={() => itemClick(\"playlist\")}\r\n          className={current === \"playlist\" ? \"sele\" : \"\"}\r\n        >\r\n          歌曲列表\r\n        </li>\r\n        <li\r\n          onClick={() => itemClick(\"comments\")}\r\n          className={current === \"comments\" ? \"sele\" : \"\"}\r\n        >\r\n          评论\r\n        </li>\r\n        <li\r\n          onClick={() => itemClick(\"subscribers\")}\r\n          className={current === \"subscribers\" ? \"sele\" : \"\"}\r\n        >\r\n          收藏者\r\n        </li>\r\n        {current === \"playlist\" && (\r\n          <li style={{ float: \"right\" }} className=\"search\">\r\n            <SearchInput\r\n              className=\"playlist-info-search\"\r\n              placeholder=\"搜索歌单音乐\"\r\n              onChange={handleInputChange}\r\n            />\r\n          </li>\r\n        )}\r\n      </ul>\r\n      <SongSheet\r\n        trackIds={trackIds}\r\n        keywords={keywords}\r\n        show={current === \"playlist\"}\r\n      />\r\n      {current === \"comments\" && <Comments type=\"playlist\" id={playlistId} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(PlaylistInfo);\r\n","import PlayList from \"./PlayList\";\r\n\r\nexport default PlayList;\r\nexport * from \"./PlayList\";\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport {\r\n  FireFilled,\r\n  PlayCircleOutlined,\r\n  FolderAddOutlined,\r\n  ShareAltOutlined,\r\n  DownloadOutlined,\r\n  UpOutlined,\r\n  DownOutlined\r\n} from \"@ant-design/icons\";\r\nimport { parseDate, parsePlayCount } from \"../../utils\";\r\nimport PlaylistInfo from \"../../common/PlaylistInfo\";\r\nimport axios from \"../../network\";\r\nimport { connect } from \"react-redux\";\r\nimport { getPushPlayQueueAction } from \"../../common/Player/store\";\r\nimport { message } from \"antd\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface PlaylistProps {\r\n  pushPlayQueue: (ids: string | Array<string>) => void;\r\n  match: match;\r\n}\r\n\r\ninterface IDetail {\r\n  coverImgUrl: string;\r\n  // 歌单名字\r\n  name: string;\r\n  tags?: Array<string>;\r\n  avatarUrl: string;\r\n  description?: string;\r\n  playCount: number;\r\n  subscribedCount: number;\r\n  shareCount: number;\r\n  createTime: number;\r\n  commentCount: number;\r\n  // 歌单创作者名字\r\n  nickname: string;\r\n  // 歌单歌曲个数\r\n  trackCount: number;\r\n}\r\n\r\nconst PlayList: React.FC<PlaylistProps> = (props) => {\r\n  const [collapse, setCollapse] = useState(true);\r\n  // 歌单的全部歌曲，订阅者，歌单id\r\n  const [info, setInfo] = useState<PlaylistInfoProps>();\r\n  // 歌单描述信息，创作者信息等等\r\n  const [detail, setDetail] = useState<IDetail>();\r\n  const isAdded = useRef(false);\r\n  const { pushPlayQueue } = props;\r\n  const match = props.match as match<{ id: string }>;\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  useEffect(() => {\r\n    function parseSubscriber(subscribers: Array<any>): Array<ISubscriber> {\r\n      const _subscribers = [];\r\n      for (let i = 0; i < subscribers.length; i++) {\r\n        const subscriber: ISubscriber = {\r\n          avatarUrl: subscribers[i].avatarUrl,\r\n          userId: subscribers[i].userId\r\n        };\r\n        _subscribers.push(subscriber);\r\n      }\r\n      return _subscribers;\r\n    }\r\n\r\n    function parseInfo(playlist: any): PlaylistInfoProps {\r\n      return {\r\n        trackIds: playlist.trackIds.map((track: any) => track.id),\r\n        subscribers: parseSubscriber(playlist.subscribers),\r\n        playlistId: playlist.id\r\n      };\r\n    }\r\n\r\n    function parseDetail(playlist: any): IDetail {\r\n      return {\r\n        coverImgUrl: playlist.coverImgUrl,\r\n        name: playlist.name,\r\n        tags: playlist.tags,\r\n        avatarUrl: playlist.creator.avatarUrl,\r\n        description: playlist.description,\r\n        playCount: playlist.playCount,\r\n        subscribedCount: playlist.subscribedCount,\r\n        shareCount: playlist.shareCount,\r\n        createTime: playlist.createTime,\r\n        commentCount: playlist.commentCount,\r\n        nickname: playlist.creator.nickname,\r\n        trackCount: playlist.trackCount\r\n      };\r\n    }\r\n\r\n    async function fetchPlaylistInfo(id: string) {\r\n      const { data } = await axios.get(\"/playlist/detail?id=\" + id);\r\n      setDetail(parseDetail(data.playlist));\r\n      setInfo(parseInfo(data.playlist));\r\n    }\r\n\r\n    if (match.params.id) {\r\n      setInfo(undefined);\r\n      fetchPlaylistInfo(match.params.id);\r\n    }\r\n  }, [match.params.id]);\r\n\r\n  function pushPlayQueueAll() {\r\n    if (isAdded.current) {\r\n      return message.warn({\r\n        content: \"请勿重复添加\"\r\n      });\r\n    }\r\n    if (info) {\r\n      pushPlayQueue(info.trackIds);\r\n      isAdded.current = true;\r\n    }\r\n  }\r\n\r\n  function toTotalPlaylist(type: string) {\r\n    context.setHistoryStack(\"push\", \"totalPlaylist\");\r\n    history.push(\"/totalPlaylist/\" + type);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"playlist\">\r\n        <div>\r\n          <div className=\"playlist-top\">\r\n            <div className=\"cover-image \">\r\n              {detail && <img src={detail.coverImgUrl} alt=\"\" />}\r\n            </div>\r\n            {detail && detail.description && (\r\n              <div className=\"collapse\">\r\n                {collapse ? (\r\n                  <DownOutlined onClick={() => setCollapse(false)} />\r\n                ) : (\r\n                  <UpOutlined onClick={() => setCollapse(true)} />\r\n                )}\r\n              </div>\r\n            )}\r\n            <div className=\"playlist-detail\">\r\n              <div className=\"playlist-detail-panel-1\">\r\n                <div style={{ float: \"left\" }}>\r\n                  <span className=\"tag\">歌单</span>\r\n                  <span className=\"content\">{detail?.name}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"playlist-detail-panel-2\">\r\n                <img src={detail?.avatarUrl} alt=\"\" />\r\n                <span className=\"nickname\">{detail?.nickname}</span>\r\n                <span className=\"createTime\">\r\n                  {detail?.createTime &&\r\n                    parseDate(\"YYYY-mm-dd\", detail.createTime)}\r\n                  创建\r\n                </span>\r\n              </div>\r\n              <div className=\"playlist-detail-panel-3\">\r\n                <div className=\"btn\" onClick={pushPlayQueueAll}>\r\n                  <PlayCircleOutlined />\r\n                  添加全部\r\n                </div>\r\n                <div className=\"btn\">\r\n                  <FolderAddOutlined />\r\n                  收藏{`(${detail ? detail.subscribedCount : 0})`}\r\n                </div>\r\n                <div className=\"btn\">\r\n                  <ShareAltOutlined />\r\n                  分享{`(${detail ? detail.shareCount : 0})`}\r\n                </div>\r\n                <div className=\"btn\">\r\n                  <DownloadOutlined />\r\n                  下载全部\r\n                </div>\r\n              </div>\r\n              {detail && detail.tags && (\r\n                <div className=\"playlist-detail-panel-4\">\r\n                  标签:\r\n                  {detail.tags.map((tag) => {\r\n                    return (\r\n                      <span key={tag} onClick={() => toTotalPlaylist(tag)}>\r\n                        {tag}\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n              {detail && detail.description && (\r\n                <div\r\n                  className={`playlist-detail-panel-5 ${\r\n                    collapse ? \"collapsed\" : \"\"\r\n                  }`}\r\n                >\r\n                  简介:\r\n                  {detail.description.trim()}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"right\">\r\n              <FireFilled style={{ marginRight: 10 }} />\r\n              {detail?.trackCount}\r\n              <PlayCircleOutlined style={{ margin: \"0 10px\" }} />\r\n              {detail?.playCount && parsePlayCount(detail.playCount)}\r\n            </div>\r\n          </div>\r\n          <div className=\"playlist-bottom\">\r\n            {info && <PlaylistInfo {...info} />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, false));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(React.memo(PlayList));\r\n","import React from \"react\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerAlbumItem: React.FC<SingerAlbumItemProps> = (props) => {\r\n  const {\r\n    selected,\r\n    handleItemClick,\r\n    name,\r\n    alia,\r\n    duration,\r\n    index,\r\n    hasCopyRight,\r\n    playState,\r\n    isPlayed,\r\n    onDbClick\r\n  } = props;\r\n\r\n  const classes = classnames(\"zsw-singer-album-item\", {\r\n    selected\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={classes}\r\n      onClick={handleItemClick}\r\n      onDoubleClick={onDbClick}\r\n    >\r\n      <div className=\"zsw-singer-album-item-index\">\r\n        {hasCopyRight ? (\r\n          isPlayed ? (\r\n            <SoundFilled className={`${playState ? \"play\" : \"pause\"}`} />\r\n          ) : (\r\n            index\r\n          )\r\n        ) : (\r\n          \"无\"\r\n        )}\r\n      </div>\r\n      <HeartOutlined />\r\n      <DownloadOutlined />\r\n      <div className=\"zsw-singer-album-item-text\">\r\n        <span className=\"zsw-singer-album-item-name\">{name}</span>\r\n        {alia && <span className=\"zsw-singer-album-item-alia\">({alia})</span>}\r\n      </div>\r\n      <span className=\"zsw-singer-album-item-duration\">{duration}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerAlbumItem);\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport SingerAlbumItem from \"./singerAlbumItem\";\r\nimport { LoadingOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport axios from \"../../network\";\r\nimport { parseTime, mergeSingers } from \"../../utils\";\r\nimport classnames from \"classnames\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { message } from \"antd\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../common/Player/store\";\r\n\r\nconst SingerAlbumDetail: React.FC<SingerAlbumDetailProps> = (props) => {\r\n  const {\r\n    id,\r\n    playQueue,\r\n    currIndex,\r\n    playState,\r\n    pushPlayQueue,\r\n    setPlayDetailMap,\r\n    changePlayIndex,\r\n    fetchPlayUrl,\r\n    title,\r\n    needExpand,\r\n    top50,\r\n    picUrl\r\n  } = props;\r\n  const [selectedIndex, changeSelectedIndex] = useState(-1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [albumData, setAlbumData] = useState<ISingerAlbumItem[]>([]);\r\n  const [expand, setExpand] = useState(false);\r\n  const classes = classnames(\"zsw-singer-album-detail-content\", {\r\n    expand,\r\n    top50\r\n  });\r\n  const onlyPushOnce = useRef(false);\r\n  const trackIdsRef = useRef<string[]>([]);\r\n\r\n  function handleItemClick(index: number) {\r\n    changeSelectedIndex(index);\r\n  }\r\n\r\n  function hanldeDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \"因合作方要求，该资源暂时下架>_<\"\r\n      });\r\n    if (!onlyPushOnce.current || currIndex === -1) {\r\n      pushPlayQueue(trackIdsRef.current);\r\n      onlyPushOnce.current = true;\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    trackIdsRef.current = [];\r\n    function parseSongs(arr: any[]) {\r\n      const _arr: ISingerAlbumItem[] = [];\r\n      const _map = new Map<string, PlayDetailItem>();\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const item = arr[i];\r\n        const { name, id, dt, alia, noCopyrightRcmd, ar, al, fee } = item;\r\n        trackIdsRef.current.push(item.id);\r\n        _map.set(item.id, {\r\n          name,\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          picUrl: al.picUrl,\r\n          album: al.name,\r\n          alia: alia.join(\" \"),\r\n          id,\r\n          hasCopyRight: noCopyrightRcmd || fee ? false : true,\r\n          albumId: item.al.id\r\n        });\r\n        _arr.push({\r\n          name,\r\n          id,\r\n          duration: parseTime(dt),\r\n          alia: alia.join(\" \"),\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          hasCopyRight: noCopyrightRcmd ? false : true\r\n        });\r\n      }\r\n      setPlayDetailMap(_map);\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setLoading(true);\r\n      if (top50) {\r\n        const { data } = await axios.get(\"/artist/top/song?id=\" + id);\r\n        !isUnmount && setAlbumData(parseSongs(data.songs));\r\n      } else {\r\n        const { data } = await axios.get(\"/album?id=\" + id);\r\n        !isUnmount && setAlbumData(parseSongs(data.songs));\r\n      }\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, top50, setPlayDetailMap]);\r\n\r\n  return (\r\n    <div className=\"zsw-singer-album-detail\">\r\n      <div className=\"zsw-singer-album-detail-left\">\r\n        <img\r\n          src={`${\r\n            picUrl\r\n              ? picUrl + \"?param=150y150\"\r\n              : \"https://p2.music.126.net/HvB44MNINoLar8HFbRjIGQ==/109951165142435842.jpg?param=150y150\"\r\n          }`}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      <div className=\"zsw-singer-album-detail-right\">\r\n        <div className=\"zsw-singer-album-detail-title\">{title}</div>\r\n        <div className={classes}>\r\n          {loading ? (\r\n            <div className=\"zsw-singer-album-loading\">\r\n              <LoadingOutlined />\r\n              载入中\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {albumData.map((item, index) => {\r\n                return (\r\n                  <SingerAlbumItem\r\n                    {...item}\r\n                    key={item.id}\r\n                    handleItemClick={() => handleItemClick(index)}\r\n                    selected={\r\n                      index === selectedIndex ||\r\n                      playQueue[currIndex] === item.id\r\n                    }\r\n                    isPlayed={playQueue[currIndex] === item.id}\r\n                    playState={playState}\r\n                    onDbClick={() =>\r\n                      hanldeDoubleClick(item.id, item.hasCopyRight)\r\n                    }\r\n                  />\r\n                );\r\n              })}\r\n            </>\r\n          )}\r\n        </div>\r\n        {needExpand && (\r\n          <div\r\n            className=\"zsw-singer-album-detail-expand-btn\"\r\n            onClick={() => setExpand(!expand)}\r\n          >\r\n            {!expand ? \"查看全部50首\" : \"只显示10首\"}\r\n            <RightOutlined />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nSingerAlbumDetail.defaultProps = {\r\n  needExpand: true\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const currIndex = player.current;\r\n\r\n  return {\r\n    playQueue: player.playQueue,\r\n    currIndex,\r\n    playState: player.playState\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string | Array<string>) {\r\n      dispatch(getPushPlayQueueAction(ids, true));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(SingerAlbumDetail));\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport SingerAlbumDetail from \"./singerAlbumDetail\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerAlbum: React.FC<SingerAlbumProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [albums, setAlbums] = useState<IAlbumInfo[]>([]);\r\n  const more = useRef(true);\r\n  const [offset, setOffset] = useState(0);\r\n  const classes = classnames(\"zsw-singer-album\", {\r\n    show\r\n  });\r\n  const [firstRequest, setFirstRequest] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      setFirstRequest(true);\r\n    }\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    more.current = true;\r\n    setAlbums([]);\r\n    setOffset(0);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function handleScroll(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (!more.current) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n      if (\r\n        target.scrollTop >= target.scrollHeight - target.offsetHeight &&\r\n        target.scrollTop > 0\r\n      ) {\r\n        !isUnmount && setOffset((offset) => offset + 15);\r\n      }\r\n    }\r\n    const el = document.getElementsByClassName(\"zsw-singer-detail\")[0];\r\n    if (show && el) {\r\n      el.addEventListener(\"scroll\", handleScroll);\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n      if (el) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseAlbums(albums: any[]) {\r\n      const arr: IAlbumInfo[] = [];\r\n\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n        arr.push({\r\n          title: item.name,\r\n          picUrl: item.picUrl,\r\n          id: item.id\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function returnUrl() {\r\n      return `/artist/album?id=${id}&offset=${offset}&limit=${15}`;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(returnUrl());\r\n      if (!isUnmount) {\r\n        more.current = data.more;\r\n        setAlbums((_data) => {\r\n          return _data.concat(parseAlbums(data.hotAlbums));\r\n        });\r\n      }\r\n    }\r\n\r\n    if (id && more.current && firstRequest) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [id, offset, firstRequest]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <SingerAlbumDetail id={id} title=\"热门50首\" top50={true} />\r\n      {albums.map((item) => {\r\n        return (\r\n          <SingerAlbumDetail\r\n            {...item}\r\n            top50={false}\r\n            needExpand={false}\r\n            key={item.id + \" \" + id}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerAlbum);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\n\r\nconst SingerInfo: React.FC<SingerInfoProps> = (props) => {\r\n  const { show, id } = props;\r\n  const classes = classnames(\"zsw-singer-info\", {\r\n    show\r\n  });\r\n\r\n  const [desc, setDesc] = useState<ISingerDesc[]>([]);\r\n\r\n  useEffect(() => {\r\n    setDesc([]);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    function parseDesc(data: any) {\r\n      const arr: ISingerDesc[] = [];\r\n      arr.push({\r\n        title: \"简介\",\r\n        content: data.briefDesc\r\n      });\r\n      const introduction = data.introduction as any[];\r\n      for (let i = 0; i < introduction.length; i++) {\r\n        const item = introduction[i];\r\n        arr.push({\r\n          title: item.ti,\r\n          content: item.txt\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/artist/desc?id=\" + id);\r\n      setDesc(parseDesc(data));\r\n    }\r\n\r\n    if (id) {\r\n      fetchData();\r\n    }\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {desc.map((item) => {\r\n        return (\r\n          <div className=\"zsw-singer-info-item\" key={item.title}>\r\n            <p className=\"title\">{item.title}</p>\r\n            {item.content.split(\"\\n\").map((item, index) => {\r\n              return (\r\n                <p className=\"content\" key={item + index}>\r\n                  {item}\r\n                </p>\r\n              );\r\n            })}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerInfo);\r\n","import React from \"react\";\r\nimport { VideoCameraOutlined } from \"@ant-design/icons\";\r\n\r\nconst SingerMVItem: React.FC<SingerMVItemProps> = (props) => {\r\n  const { playCount, name, duration, picUrl, onClick } = props;\r\n\r\n  return (\r\n    <div className=\"zsw-singer-mv-item\" onClick={onClick}>\r\n      <div>\r\n        <img src={`${picUrl + \"?param=160y90\"}`} alt=\"\" />\r\n        <span className=\"play-count\">\r\n          <VideoCameraOutlined />\r\n          {playCount}\r\n        </span>\r\n        <span className=\"duration\">{duration}</span>\r\n      </div>\r\n      <p>{name}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerMVItem);\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport SingerMVItem from \"./singerMVItem\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { parseTime, parsePlayCount } from \"../../utils\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SingerMV: React.FC<SingerMVProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [mvs, setMVs] = useState<ISingerMVItem[]>([]);\r\n  const classes = classnames(\"zsw-singer-mvs\", {\r\n    show\r\n  });\r\n  const [offset, setOffset] = useState(0);\r\n  const more = useRef(true);\r\n  const [firstRequest, setFirstRequest] = useState(false);\r\n  const context = useContext(SetHistoryStackContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      setFirstRequest(true);\r\n    }\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    more.current = true;\r\n    setMVs([]);\r\n    setOffset(0);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function handleScroll(e: Event) {\r\n      const target = e.target as HTMLDivElement;\r\n      if (!more.current) {\r\n        el.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n      if (\r\n        target.scrollTop >= target.scrollHeight - target.offsetHeight &&\r\n        target.scrollTop > 0\r\n      ) {\r\n        !isUnmount && setOffset((offset) => offset + 30);\r\n      }\r\n    }\r\n    const el = document.getElementsByClassName(\"home-content\")[0];\r\n    if (show) {\r\n      el.addEventListener(\"scroll\", handleScroll);\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n      el.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    function returnUrl() {\r\n      return `/artist/mv?id=${id}&offset=${offset}&limit=30`;\r\n    }\r\n\r\n    function parsemvs(data: any[]) {\r\n      const arr: ISingerMVItem[] = [];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          name: item.name,\r\n          duration: parseTime(item.duration),\r\n          id: item.id,\r\n          picUrl: item.imgurl16v9,\r\n          playCount:\r\n            item.playCount >= 10000\r\n              ? parsePlayCount(item.playCount)\r\n              : item.playCount\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      more.current = data.hasMore;\r\n      setMVs((mvs) => mvs.concat(parsemvs(data.mvs)));\r\n      setLoading(false);\r\n    }\r\n\r\n    if (id && more.current && firstRequest) {\r\n      fetchData();\r\n    }\r\n  }, [id, offset, firstRequest]);\r\n\r\n  function handleClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"mv\");\r\n    history.push(\"/mv/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {mvs.map((item) => {\r\n        return (\r\n          <SingerMVItem\r\n            {...item}\r\n            key={item.id}\r\n            onClick={() => handleClick(item.id)}\r\n          />\r\n        );\r\n      })}\r\n      {loading && (\r\n        <div className=\"zsw-singer-mvs-loading\">\r\n          <LoadingOutlined />\r\n          载入中\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerMV);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst SimiSingers: React.FC<SimiSingersProps> = (props) => {\r\n  const { id, show } = props;\r\n  const [simiSingers, setSimiSingers] = useState<ISimiSingerItem[]>([]);\r\n  const classes = classnames(\"zsw-simi-singers\", {\r\n    show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    setSimiSingers([]);\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    function parseData(data: any[]) {\r\n      const arr: ISimiSingerItem[] = [];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        const item = data[i];\r\n        arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.img1v1Url\r\n        });\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\"/simi/artist?id=\" + id);\r\n      console.log(parseData(data.artists));\r\n      setSimiSingers(parseData(data.artists));\r\n    }\r\n\r\n    if (id && show) {\r\n      fetchData();\r\n    }\r\n  }, [id, show]);\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {simiSingers.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"zsw-simi-singer-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div>\r\n              <img src={item.picUrl + \"?param=120y120\"} alt=\"\" />\r\n            </div>\r\n            <p>{item.name}</p>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SimiSingers);\r\n","import SingerDetail from \"./singerDetail\";\r\n\r\nexport default SingerDetail;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { FolderAddOutlined } from \"@ant-design/icons\";\r\nimport SingerAlbum from \"./singerAlbum\";\r\nimport classnames from \"classnames\";\r\nimport SingerInfo from \"./singerInfo\";\r\nimport SingerMV from \"./singerMV\";\r\nimport SimiSingers from \"./simiSingers\";\r\nimport { match } from \"react-router-dom\";\r\n\r\ninterface SingerDetailProps {\r\n  match: match;\r\n}\r\n\r\ntype currentType = \"album\" | \"mv\" | \"singerInfo\" | \"simiSinger\";\r\nconst SingerDetail: React.FC<SingerDetailProps> = (props) => {\r\n  const match = props.match as match<{ id: string }>;\r\n  const [songsCount, setSongsCount] = useState(0);\r\n  const [albumsCount, setAlbumsCount] = useState(0);\r\n  const [singerName, setSingerName] = useState(\"\");\r\n  const [picUrl, setPicUrl] = useState(\"\");\r\n  const [current, setCurrent] = useState<currentType>(\"album\");\r\n  const classes = classnames(\"zsw-singer-detail\");\r\n\r\n  function itemClick(curr: currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setCurrent(\"album\");\r\n  }, [match.params.id]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    async function fetchSingerSongsCount() {\r\n      const { data } = await axios.get(\r\n        `/artist/songs?id=${match.params.id}&limit=0`\r\n      );\r\n      !isUnmount && setSongsCount(data.total);\r\n    }\r\n    async function fetchSingerAlbums() {\r\n      const { data } = await axios.get(\r\n        `/artist/album?id=${match.params.id}&limit=100`\r\n      );\r\n      if (!isUnmount) {\r\n        setAlbumsCount(data.artist.albumSize);\r\n        setSingerName(data.artist.name);\r\n        setPicUrl(data.artist.picUrl);\r\n      }\r\n    }\r\n    if (match.params.id) {\r\n      fetchSingerSongsCount();\r\n      fetchSingerAlbums();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [match.params.id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"zsw-singer-detail-top\">\r\n          <div\r\n            className=\"zsw-singer-detail-top-img\"\r\n            style={{\r\n              backgroundImage: `url(${picUrl}?param=200y200)`\r\n            }}\r\n          ></div>\r\n          <div className=\"zsw-singer-detail-info\">\r\n            <p className=\"zsw-singer-detail-info-panel-1\">\r\n              <span className=\"zsw-singer-detail-info-panel-1-tag\">歌手</span>\r\n              <span className=\"zsw-singer-detail-info-panel-1-name\">\r\n                {singerName}\r\n              </span>\r\n            </p>\r\n            <p className=\"zsw-singer-detail-info-panel-2\">\r\n              <span className=\"iconfont icon-music_note\">单曲数:</span>\r\n              <span className=\"zsw-singer-detail-info-panel-2-count\">\r\n                {songsCount}\r\n              </span>\r\n            </p>\r\n            <p className=\"zsw-singer-detail-info-panel-3\">\r\n              <span className=\"iconfont icon-changpian1\">专辑数:</span>\r\n              <span className=\"zsw-singer-detail-info-panel-3-count\">\r\n                {albumsCount}\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div className=\"zsw-singer-detail-top-btn\">\r\n            <FolderAddOutlined />\r\n            收藏\r\n          </div>\r\n        </div>\r\n        <ul className=\"playlist-info-nav\">\r\n          <li\r\n            onClick={() => itemClick(\"album\")}\r\n            className={current === \"album\" ? \"sele\" : \"\"}\r\n          >\r\n            专辑\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"mv\")}\r\n            className={current === \"mv\" ? \"sele\" : \"\"}\r\n          >\r\n            MV\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"singerInfo\")}\r\n            className={current === \"singerInfo\" ? \"sele\" : \"\"}\r\n          >\r\n            歌手详情\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"simiSinger\")}\r\n            className={current === \"simiSinger\" ? \"sele\" : \"\"}\r\n          >\r\n            相似歌手\r\n          </li>\r\n        </ul>\r\n        <div className=\"zsw-singer-detail-content\">\r\n          <SingerAlbum id={match.params.id} show={current === \"album\"} />\r\n          <SingerInfo id={match.params.id} show={current === \"singerInfo\"} />\r\n          <SingerMV id={match.params.id} show={current === \"mv\"} />\r\n          <SimiSingers id={match.params.id} show={current === \"simiSinger\"} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SingerDetail);\r\n","import MV from \"./mv\";\r\n\r\nexport default MV;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { LeftOutlined } from \"@ant-design/icons\";\r\nimport Comments from \"../../common/comments\";\r\nimport axios from \"../../network\";\r\nimport { parseDate, parsePlayCount } from \"../../utils\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\n\r\ninterface IMVInfo {\r\n  name: string;\r\n  id: string;\r\n  playCount: string;\r\n  publishTime: string;\r\n  artists: any[];\r\n}\r\n\r\ninterface MVProps {\r\n  match: match;\r\n}\r\n\r\nconst MV: React.FC<MVProps> = (props) => {\r\n  const match = props.match as match<{ id: string }>;\r\n  const classes = classnames(\"zsw-mv\");\r\n  const [url, setUrl] = useState(\"\");\r\n  const [info, setInfo] = useState<IMVInfo>();\r\n  const history = useHistory();\r\n  const context = useContext(SetHistoryStackContext);\r\n\r\n  function back() {\r\n    context.setHistoryStack(\"prev\", \"\");\r\n    history.go(-1);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function parseMVInfo(data: any): IMVInfo {\r\n      return {\r\n        name: data.name,\r\n        artists: data.artists,\r\n        playCount:\r\n          data.playCount > 10000\r\n            ? parsePlayCount(data.playCount) + \"次\"\r\n            : data.playCount + \"次\",\r\n        publishTime: parseDate(\"YYYY-mm-dd\", data.publishTime),\r\n        id: data.id\r\n      };\r\n    }\r\n    async function fetchData() {\r\n      const urlData = await axios.get(\"/mv/url?id=\" + match.params.id);\r\n      const url = urlData.data.data.url;\r\n      setUrl(url);\r\n\r\n      const infoData = await axios.get(\"/mv/detail?mvid=\" + match.params.id);\r\n      setInfo(parseMVInfo(infoData.data.data));\r\n    }\r\n\r\n    if (match.params.id) {\r\n      fetchData();\r\n    }\r\n  }, [match.params.id]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"zsw-mv-top\">\r\n          <div className=\"zsw-mv-top-left\">\r\n            <p>\r\n              <LeftOutlined onClick={back} />\r\n              <span className=\"zsw-mv-name\">{info ? info.name : \"\"}</span>\r\n              {info &&\r\n                info.artists.map((item, index) => {\r\n                  return (\r\n                    <React.Fragment key={item.id}>\r\n                      <span className=\"zsw-mv-singer-name\">{item.name}</span>\r\n                      <span>\r\n                        {index === info.artists.length - 1 ? \"\" : \"/\"}\r\n                      </span>\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n            </p>\r\n            <video src={url} controls></video>\r\n          </div>\r\n          <div className=\"zsw-mv-introduction\">\r\n            <div className=\"title\">MV介绍</div>\r\n            <p>发布时间: {info ? info.publishTime : \"\"}</p>\r\n            <p>播放次数: {info ? info.playCount : \"\"}</p>\r\n          </div>\r\n        </div>\r\n        {match.params.id && <Comments type=\"mv\" id={match.params.id} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(MV);\r\n","import React, { useRef } from \"react\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { Pagination } from \"antd\";\r\n\r\ninterface ResultOfPaginationProps {\r\n  handlePageSizeChange: (page: number) => void;\r\n  attrs: PaginationProps;\r\n  defaultPageSize: number;\r\n}\r\n\r\nconst ResultOfPagination: React.FC<ResultOfPaginationProps> = (props) => {\r\n  const { handlePageSizeChange, attrs, defaultPageSize } = props;\r\n\r\n  const defaultPagination = useRef<PaginationProps>({\r\n    defaultCurrent: 1,\r\n    defaultPageSize: defaultPageSize,\r\n    hideOnSinglePage: true,\r\n    size: \"small\",\r\n    showSizeChanger: false,\r\n    onChange: handlePageSizeChange\r\n  });\r\n\r\n  return (\r\n    <div className=\"result-of-pagination\">\r\n      <Pagination {...defaultPagination.current} {...attrs} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfPagination);\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useCallback,\r\n  useContext\r\n} from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport axios from \"../../network\";\r\nimport classnames from \"classnames\";\r\nimport { parseTime, mergeSingers, parseCopyright } from \"../../utils\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport {\r\n  getSetPlayDetailMapAction,\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction,\r\n  getChangePlayStateAction\r\n} from \"../../common/Player/store\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfSongs: React.FC<ResultOfSongsProps> = (props) => {\r\n  const {\r\n    keywords,\r\n    setLoading,\r\n    setSearchCount,\r\n    current,\r\n    playState,\r\n    setPlayDetailMap,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    changePlayState,\r\n    playQueue,\r\n    urlMap\r\n  } = props;\r\n  const [songs, setSongs] = useState<ISearchOfSongItem[]>([]);\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-songs\", {\r\n    hidden: !show\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const map = useRef<Map<string, PlayDetailItem>>(\r\n    new Map<string, PlayDetailItem>()\r\n  );\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 100\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  const handlePageSizeChange = useCallback((page: number) => {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  function renderIndex(value: any, record: ISearchOfSongItem) {\r\n    return (\r\n      <div className=\"index\">\r\n        {!record.hasCopyRight ? (\r\n          \"无\"\r\n        ) : record.id === current ? (\r\n          <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n        ) : (\r\n          <span>{value}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(record: ISearchOfSongItem) {\r\n    if (!record.hasCopyRight) {\r\n      return message.error({\r\n        content: \"因合作方要求，该资源暂时下架>_<\"\r\n      });\r\n    }\r\n    if (current === record.id && playState === false) {\r\n      return changePlayState(true);\r\n    } else if (current === record.id) return;\r\n    if (playQueue.indexOf(record.id) !== -1) {\r\n      if (!urlMap.get(record.id)) {\r\n        fetchPlayUrl(record.id);\r\n      }\r\n      changePlayIndex(record.id);\r\n    } else {\r\n      pushPlayQueue(record.id);\r\n      fetchPlayUrl(record.id);\r\n      changePlayIndex(record.id);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}`;\r\n    }\r\n    function parseData(songs: any[]) {\r\n      const _arr: ISearchOfSongItem[] = [];\r\n      if (!(songs instanceof Array)) return [];\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const {\r\n          al: { name, picUrl },\r\n          ar,\r\n          id,\r\n          dt,\r\n          noCopyrightRcmd,\r\n          alia,\r\n          pop,\r\n          fee\r\n        } = songs[i];\r\n        const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n        const parsedItem = {\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          id,\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          album: name,\r\n          picUrl,\r\n          name: songs[i].name,\r\n          hasCopyRight: copyright,\r\n          alia: alia.join(\",\"),\r\n          albumId: songs[i].al.id\r\n        };\r\n        if (copyright) {\r\n          map.current.set(id, parsedItem);\r\n        }\r\n        _arr.push(Object.assign({}, parsedItem, { pop }));\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      map.current = new Map<string, PlayDetailItem>();\r\n      setSongs([]);\r\n      setShow(false);\r\n      setLoading(true);\r\n      axios.get(returnUrl()).then(({ data }) => {\r\n        setPagination({\r\n          total: data.result.songCount\r\n        });\r\n        setSearchCount(data.result.songCount);\r\n        setSongs(parseData(data.result.songs));\r\n        setPlayDetailMap(map.current);\r\n        setLoading(false);\r\n        setShow(true);\r\n      });\r\n    }\r\n\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n  }, [keywords, queryParams, setPlayDetailMap, setLoading, setSearchCount]);\r\n\r\n  function renderPop(value: any) {\r\n    return (\r\n      <div className=\"pop\">\r\n        <div className=\"pop-inner\" style={{ width: value + \"%\" }}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"steer\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <Table\r\n        size=\"small\"\r\n        bordered\r\n        dataSource={songs}\r\n        rowKey={(record) => record.id}\r\n        pagination={false}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () => handleDoubleClick(record)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={65}\r\n          dataIndex=\"index\"\r\n          render={renderIndex}\r\n        />\r\n        <Table.Column title=\"操作\" width={65} render={renderManipulation} />\r\n        <Table.Column title=\"音乐标题\" ellipsis dataIndex=\"name\" />\r\n        <Table.Column\r\n          title=\"歌手\"\r\n          ellipsis\r\n          dataIndex=\"singers\"\r\n          render={(value: ISingerInfo[]) => {\r\n            return value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                className=\"singer-name\"\r\n                onClick={() => toSingerDetail(item.id)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ));\r\n          }}\r\n        />\r\n        <Table.Column\r\n          title=\"专辑\"\r\n          ellipsis\r\n          dataIndex=\"album\"\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column title=\"时长\" width={100} dataIndex=\"duration\" />\r\n        <Table.Column\r\n          title=\"热度\"\r\n          width={120}\r\n          dataIndex=\"pop\"\r\n          render={renderPop}\r\n        />\r\n      </Table>\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={100}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    playQueue: player.playQueue,\r\n    urlMap: player.playUrlMap\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    },\r\n    pushPlayQueue(ids: string) {\r\n      dispatch(getPushPlayQueueAction(ids, false));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    },\r\n    changePlayState(flag: boolean) {\r\n      dispatch(getChangePlayStateAction(flag));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(ResultOfSongs));\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfSingers: React.FC<ResultOfSingersProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [singers, setSingers] = useState<ISearchOfSingerItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const classes = classnames(\"result-of-singers\", {\r\n    hidden: !show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parse(artists: any[]) {\r\n      const _arr: ISearchOfSingerItem[] = [];\r\n      if (!(artists instanceof Array)) return [];\r\n      for (let i = 0; i < artists.length; i++) {\r\n        const item = artists[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.img1v1Url\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=100`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setSingers([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      setPagination({\r\n        total: data.result.artistCount\r\n      });\r\n      setSearchCount(data.result.artistCount);\r\n      !isUnmount && setSingers(parse(data.result.artists));\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {singers.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-singers-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=45y45\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfSingers);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfAlbums: React.FC<ResultOfAlbumsProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [albums, setAlbums] = useState<ISearchOfAlbumItem[]>([]);\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-albums\", {\r\n    hidden: !show\r\n  });\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 15\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(e: React.MouseEvent, id: string) {\r\n    if ((e.target as HTMLDivElement).classList.contains(\"singer-name\")) return;\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    function parse(albums: any[]) {\r\n      const _arr: ISearchOfAlbumItem[] = [];\r\n      if (!(albums instanceof Array)) return [];\r\n      for (let i = 0; i < albums.length; i++) {\r\n        const item = albums[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.picUrl,\r\n          singerName: item.artist.name,\r\n          singerId: item.artist.id\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=10`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setAlbums([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      setAlbums(parse(data.result.albums));\r\n      setSearchCount(data.result.albumCount);\r\n      setPagination({\r\n        total: data.result.albumCount\r\n      });\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {albums.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-albums-item\"\r\n            key={item.id}\r\n            onClick={(e) => handleItemClick(e, item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=45y45\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n            <div\r\n              className=\"singer-name\"\r\n              onClick={() => toSingerDetail(item.singerId)}\r\n            >\r\n              {item.singerName}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={15}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfAlbums);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport axios from \"../../network\";\r\nimport { parseTime, mergeSingers, parsePlayCount } from \"../../utils\";\r\nimport { CustomerServiceOutlined } from \"@ant-design/icons\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfMVs: React.FC<ResultOfMVsProps> = (props) => {\r\n  const { keywords, setLoading, setSearchCount } = props;\r\n  const [mvs, setMVs] = useState<ISearchOfMVItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const classes = classnames(\"result-of-mvs\", {\r\n    hidden: !show\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"mv\");\r\n    history.push(\"/mv/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseMVs(mvs: any[]) {\r\n      const _arr: ISearchOfMVItem[] = [];\r\n      if (!(mvs instanceof Array)) return [];\r\n      for (let i = 0; i < mvs.length; i++) {\r\n        const item = mvs[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          duration: parseTime(item.duration),\r\n          playCount: parsePlayCount(item.playCount),\r\n          singers: mergeSingers(item.artists),\r\n          picUrl: item.cover\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=1004`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setLoading(true);\r\n      setMVs([]);\r\n      const { data } = await axios.get(returnUrl());\r\n      !isUnmount && setMVs(parseMVs(data.result.mvs));\r\n      setPagination({\r\n        total: data.result.mvCount\r\n      });\r\n      setSearchCount(data.result.mvCount);\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div className=\"result-of-mvs-content\">\r\n        {mvs.map((item) => {\r\n          return (\r\n            <div\r\n              className=\"result-of-mvs-item\"\r\n              key={item.id}\r\n              onClick={() => handleItemClick(item.id)}\r\n            >\r\n              <div>\r\n                <img src={item.picUrl + \"?param=199y112\"} alt=\"\" />\r\n                <span className=\"duration\">{item.duration}</span>\r\n                <div className=\"playCount\">\r\n                  <CustomerServiceOutlined />\r\n                  {item.playCount}\r\n                </div>\r\n              </div>\r\n              <p className=\"name\">{item.name}</p>\r\n              <p className=\"singer-name\">\r\n                {item.singers.map((singer) => (\r\n                  <span key={singer.id}>{singer.name}</span>\r\n                ))}\r\n              </p>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfMVs);\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport axios from \"../../network\";\r\nimport { PaginationProps } from \"antd/es/pagination\";\r\nimport ResultOfPagination from \"./resultOfPagination\";\r\nimport classnames from \"classnames\";\r\nimport { SetHistoryStackContext } from \"../Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport interface IQueryParams {\r\n  page: number;\r\n  limit: number;\r\n}\r\n\r\nconst ResultOfPlaylists: React.FC<ResultOfPlaylistsProps> = (props) => {\r\n  const { setLoading, setSearchCount, keywords } = props;\r\n  const [playlists, setPlaylists] = useState<ResultOfPlaylistItem[]>([]);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    page: 0,\r\n    limit: 20\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const classes = classnames(\"result-of-playlists\", {\r\n    hidden: !show\r\n  });\r\n  const [pagination, setPagination] = useState<PaginationProps>({\r\n    current: 1\r\n  });\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function handleItemClick(id: string) {\r\n    context.setHistoryStack(\"push\", \"playlist\");\r\n    history.push(\"/playlist/\" + id);\r\n  }\r\n\r\n  function handlePageSizeChange(page: number) {\r\n    setQueryParams((data) => {\r\n      return {\r\n        page: page - 1,\r\n        limit: data.limit\r\n      };\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parsePlaylists(playlists: any[]) {\r\n      const _arr: ResultOfPlaylistItem[] = [];\r\n      if (!(playlists instanceof Array)) return [];\r\n      for (let i = 0; i < playlists.length; i++) {\r\n        const item = playlists[i];\r\n        _arr.push({\r\n          id: item.id,\r\n          name: item.name,\r\n          picUrl: item.coverImgUrl,\r\n          total: item.trackCount + \"首\",\r\n          creatorName: \"by \" + item.creator.nickname\r\n        });\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    function returnUrl() {\r\n      const { page, limit } = queryParams;\r\n      const offset = page * limit;\r\n      return `/cloudsearch?keywords=${keywords}&offset=${offset}&limit=${limit}&type=1000`;\r\n    }\r\n    async function fetchData() {\r\n      setShow(false);\r\n      setPlaylists([]);\r\n      setLoading(true);\r\n      const { data } = await axios.get(returnUrl());\r\n      !isUnmount && setPlaylists(parsePlaylists(data.result.playlists));\r\n      setSearchCount(data.result.playlistCount);\r\n      setPagination({\r\n        total: data.result.playlistCount\r\n      });\r\n      setLoading(false);\r\n      setShow(true);\r\n    }\r\n\r\n    if (keywords) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [keywords, queryParams, setLoading, setSearchCount]);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      {playlists.map((item) => {\r\n        return (\r\n          <div\r\n            className=\"result-of-playlists-item\"\r\n            key={item.id}\r\n            onClick={() => handleItemClick(item.id)}\r\n          >\r\n            <div className=\"img\">\r\n              <img src={item.picUrl + \"?param=50y50\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"name\">{item.name}</div>\r\n            <div className=\"total\">{item.total}</div>\r\n            <div className=\"creator-name\">{item.creatorName}</div>\r\n          </div>\r\n        );\r\n      })}\r\n      <ResultOfPagination\r\n        attrs={pagination}\r\n        handlePageSizeChange={handlePageSizeChange}\r\n        defaultPageSize={20}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(ResultOfPlaylists);\r\n","import React, { useState, useCallback } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport ResultOfSongs from \"./resultOfSongs\";\r\nimport ResultOfSingers from \"./resultOfSingers\";\r\nimport ResultOfAlbums from \"./resultOfAlbums\";\r\nimport ResultOfMVs from \"./resultOfMVs\";\r\nimport ResultOfPlaylists from \"./resultOfPlaylists\";\r\nimport { match } from \"react-router-dom\";\r\n\r\ninterface SearchResultProps {\r\n  match: match;\r\n}\r\n\r\ntype currentType = \"单曲\" | \"歌手\" | \"专辑\" | \"MV\" | \"歌单\";\r\n\r\nconst typeArr: currentType[] = [\"单曲\", \"歌手\", \"专辑\", \"MV\", \"歌单\"];\r\n\r\nconst SearchResult: React.FC<SearchResultProps> = (props) => {\r\n  const match = props.match as match<{ keywords: string }>;\r\n  const [curr, setCurr] = useState<currentType>(\"单曲\");\r\n  const [searchCount, setSearchCount] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = classnames(\"search-result\");\r\n\r\n  const setCount = useCallback((num: number) => {\r\n    setSearchCount(num);\r\n  }, []);\r\n\r\n  const changeLoading = useCallback((flag: boolean) => {\r\n    setLoading(flag);\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"search-result-header\">\r\n          搜索\"<span>{match.params.keywords}</span>\",找到{searchCount}首{curr}\r\n        </div>\r\n        <div className=\"search-result-tabs\">\r\n          {typeArr.map((item) => {\r\n            const classes = classnames(\"search-result-tabs-item\", {\r\n              selected: item === curr\r\n            });\r\n            return (\r\n              <div className={classes} key={item} onClick={() => setCurr(item)}>\r\n                {item}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        {loading && (\r\n          <div className=\"search-result-loading\">\r\n            <LoadingOutlined />\r\n            <span>载入中</span>\r\n          </div>\r\n        )}\r\n        {curr === \"单曲\" && (\r\n          <ResultOfSongs\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"歌手\" && (\r\n          <ResultOfSingers\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"专辑\" && (\r\n          <ResultOfAlbums\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"MV\" && (\r\n          <ResultOfMVs\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n        {curr === \"歌单\" && (\r\n          <ResultOfPlaylists\r\n            keywords={match.params.keywords}\r\n            setSearchCount={setCount}\r\n            setLoading={changeLoading}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SearchResult);\r\n","import SearchResult from \"./searchResult\";\r\n\r\nexport default SearchResult;\r\n\r\nexport * from \"./searchResult\";\r\n","import React, { useContext } from \"react\";\r\nimport { Table, message } from \"antd\";\r\nimport * as types from \"./types\";\r\nimport {\r\n  HeartOutlined,\r\n  DownloadOutlined,\r\n  SoundFilled\r\n} from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getPushPlayQueueAction,\r\n  fetchPlayUrl,\r\n  getChangePlayIndexAction\r\n} from \"../../common/Player/store\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\nconst AlbumSongs: React.FC<types.AlbumSongsProps> = (props) => {\r\n  const {\r\n    loading,\r\n    songs,\r\n    current,\r\n    playState,\r\n    pushPlayQueue,\r\n    fetchPlayUrl,\r\n    changePlayIndex,\r\n    willPlaylistId\r\n  } = props;\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function renderIndex(value: any, record: ISearchOfSongItem) {\r\n    return (\r\n      <div className=\"index\">\r\n        {!record.hasCopyRight ? (\r\n          \"无\"\r\n        ) : record.id === current ? (\r\n          <SoundFilled className={`${playState ? \"play\" : \"\"}`} />\r\n        ) : (\r\n          <span>{value}</span>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderPop(value: any) {\r\n    return (\r\n      <div className=\"pop\">\r\n        <div className=\"pop-inner\" style={{ width: value + \"%\" }}></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function handleDoubleClick(id: string, hasCopyRight: boolean) {\r\n    if (!hasCopyRight)\r\n      return message.error({\r\n        content: \"因合作方要求，该资源暂时下架>_<\"\r\n      });\r\n    if (willPlaylistId.indexOf(id) === -1) {\r\n      pushPlayQueue(\r\n        songs.map((song) => song.id),\r\n        id\r\n      );\r\n    }\r\n    fetchPlayUrl(id);\r\n    changePlayIndex(id);\r\n  }\r\n\r\n  function renderManipulation() {\r\n    return (\r\n      <div className=\"steer\">\r\n        <HeartOutlined />\r\n        <DownloadOutlined />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function toSingerDetail(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  function toAlbum(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"album\");\r\n    history.push(\"/album/\" + id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"album-songs\">\r\n      <Table\r\n        bordered\r\n        pagination={false}\r\n        rowKey={(record) => record.index}\r\n        size=\"small\"\r\n        showSorterTooltip={false}\r\n        loading={loading}\r\n        dataSource={songs}\r\n        onRow={(record) => {\r\n          return {\r\n            onDoubleClick: () =>\r\n              handleDoubleClick(record.id, record.hasCopyRight)\r\n          };\r\n        }}\r\n      >\r\n        <Table.Column\r\n          title=\"\"\r\n          width={40}\r\n          align=\"right\"\r\n          dataIndex=\"index\"\r\n          render={renderIndex}\r\n        />\r\n        <Table.Column title=\"操作\" width={60} render={renderManipulation} />\r\n        <Table.Column title=\"音乐标题\" dataIndex=\"name\" ellipsis />\r\n        <Table.Column\r\n          title=\"歌手\"\r\n          dataIndex=\"singers\"\r\n          ellipsis\r\n          render={(value: ISingerInfo[]) => {\r\n            return value.map((item) => (\r\n              <span\r\n                key={item.id}\r\n                className=\"singer-name\"\r\n                onClick={() => toSingerDetail(item.id)}\r\n              >\r\n                {item.name}\r\n              </span>\r\n            ));\r\n          }}\r\n        />\r\n        <Table.Column\r\n          title=\"专辑\"\r\n          dataIndex=\"album\"\r\n          ellipsis\r\n          render={(value: any, record: ISongSheetItem) => {\r\n            return (\r\n              <span\r\n                onClick={() => toAlbum(record.albumId)}\r\n                className=\"album-name\"\r\n              >\r\n                {record.album}\r\n              </span>\r\n            );\r\n          }}\r\n        />\r\n        <Table.Column title=\"时长\" width={150} dataIndex=\"duration\" />\r\n        <Table.Column\r\n          title=\"热度\"\r\n          width={120}\r\n          dataIndex=\"pop\"\r\n          render={renderPop}\r\n        />\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const player = state.player;\r\n  const current = player.current;\r\n\r\n  return {\r\n    current: player.playQueue[current],\r\n    playState: player.playState,\r\n    willPlaylistId: player.willplaylistId\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    pushPlayQueue(ids: string | Array<string>, playlistId: string) {\r\n      dispatch(getPushPlayQueueAction(ids, true, playlistId));\r\n    },\r\n    fetchPlayUrl(id: string) {\r\n      dispatch(fetchPlayUrl(id));\r\n    },\r\n    changePlayIndex(id: string) {\r\n      dispatch(getChangePlayIndexAction(id));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(AlbumSongs));\r\n","import Album from \"./album\";\r\n\r\nexport default Album;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport {\r\n  PlayCircleOutlined,\r\n  FolderAddOutlined,\r\n  ShareAltOutlined,\r\n  DownloadOutlined\r\n} from \"@ant-design/icons\";\r\nimport AlbumSongs from \"./albumSongs\";\r\nimport axios from \"../../network\";\r\nimport * as types from \"./types\";\r\nimport {\r\n  parseDate,\r\n  parseTime,\r\n  mergeSingers,\r\n  parseCopyright\r\n} from \"../../utils\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSetPlayDetailMapAction } from \"../../common/Player/store\";\r\nimport Comments from \"../../common/comments\";\r\nimport classnames from \"classnames\";\r\nimport { match, useHistory } from \"react-router-dom\";\r\nimport { SetHistoryStackContext } from \"../../pages/Home\";\r\n\r\ninterface AlbumProps {\r\n  setPlayDetailMap: (map: Map<string, PlayDetailItem>) => void;\r\n  match: match;\r\n}\r\n\r\nconst Album: React.FC<AlbumProps> = (props) => {\r\n  const { setPlayDetailMap } = props;\r\n  const [current, setCurrent] = useState<types.currentType>(\"songs\");\r\n  const [info, setInfo] = useState<types.AlbumInfo>();\r\n  const [songs, setSongs] = useState<types.IAlbumSongItem[]>([]);\r\n  const map = useRef<Map<string, PlayDetailItem>>(\r\n    new Map<string, PlayDetailItem>()\r\n  );\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = classnames(\"album\");\r\n  const match = props.match as match<{ id: string }>;\r\n  const context = useContext(SetHistoryStackContext);\r\n  const history = useHistory();\r\n\r\n  function toSingerDetail(id: string) {\r\n    if (!id) return;\r\n    context.setHistoryStack(\"push\", \"singerDetail\");\r\n    history.push(\"/singerDetail/\" + id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parseInfo(data: any): types.AlbumInfo {\r\n      return {\r\n        picUrl: data.picUrl,\r\n        publishTime: data.publishTime,\r\n        name: data.name,\r\n        description: data.description,\r\n        artistName: data.artist.name,\r\n        shareCount: data.info.shareCount,\r\n        id: data.artist.id\r\n      };\r\n    }\r\n    function parseSongs(songs: any[]) {\r\n      const _arr: types.IAlbumSongItem[] = [];\r\n\r\n      for (let i = 0; i < songs.length; i++) {\r\n        const {\r\n          al: { name, picUrl },\r\n          ar,\r\n          id,\r\n          dt,\r\n          noCopyrightRcmd,\r\n          alia,\r\n          pop,\r\n          fee\r\n        } = songs[i];\r\n        const copyright = parseCopyright(noCopyrightRcmd, fee);\r\n\r\n        const parsedItem = {\r\n          duration: parseTime(dt),\r\n          singers: mergeSingers(ar),\r\n          id,\r\n          index: (i + 1).toString().padStart(2, \"0\"),\r\n          album: name,\r\n          picUrl,\r\n          name: songs[i].name,\r\n          hasCopyRight: copyright,\r\n          alia: alia.join(\",\"),\r\n          albumId: songs[i].ar.id\r\n        };\r\n        if (copyright) {\r\n          map.current.set(id, parsedItem);\r\n        }\r\n        _arr.push(Object.assign({}, parsedItem, { pop }));\r\n      }\r\n\r\n      return _arr;\r\n    }\r\n    async function fetchData() {\r\n      !isUnmount && setSongs([]);\r\n      !isUnmount && setLoading(true);\r\n      const { data } = await axios.get(\"/album?id=\" + match.params.id);\r\n      !isUnmount && setInfo(parseInfo(data.album));\r\n      !isUnmount && setSongs(parseSongs(data.songs));\r\n      !isUnmount && setPlayDetailMap(map.current);\r\n      !isUnmount && setLoading(false);\r\n    }\r\n    if (match.params.id && current === \"songs\") {\r\n      fetchData();\r\n    }\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [match.params.id, current, setPlayDetailMap]);\r\n\r\n  function itemClick(curr: types.currentType) {\r\n    setCurrent(curr);\r\n  }\r\n\r\n  function parseDescription(str: string) {\r\n    const arr = str.split(/(\\n)+/);\r\n\r\n    return arr.map((item, index) => {\r\n      return (\r\n        <p className=\"content\" key={index}>\r\n          {item}\r\n        </p>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <div>\r\n        <div className=\"album-top\">\r\n          <div className=\"album-top-left\">\r\n            <img\r\n              src={\r\n                info\r\n                  ? info.picUrl + \"?param=200y200\"\r\n                  : \"https://p2.music.126.net/VnZiScyynLG7atLIZ2YPkw==/18686200114669622.jpg\"\r\n              }\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n          <div className=\"album-top-right\">\r\n            <div className=\"album-panel-1\">\r\n              <i>专辑</i>\r\n              <span>{info ? info.name : \"\"}</span>\r\n            </div>\r\n            <div className=\"album-panel-2\">\r\n              <ul>\r\n                <li>\r\n                  <PlayCircleOutlined />\r\n                  播放全部\r\n                </li>\r\n                <li>\r\n                  <FolderAddOutlined />\r\n                  收藏\r\n                </li>\r\n                <li>\r\n                  <ShareAltOutlined />\r\n                  分享({info ? info.shareCount : \"\"})\r\n                </li>\r\n                <li>\r\n                  <DownloadOutlined />\r\n                  下载全部\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"album-panel-3\">\r\n              <p>\r\n                歌手:\r\n                <span\r\n                  className=\"singer-name\"\r\n                  onClick={() => toSingerDetail(info!.id)}\r\n                >\r\n                  {info ? info.artistName : \"\"}\r\n                </span>\r\n              </p>\r\n              <p>\r\n                时间:\r\n                <span>\r\n                  {info ? parseDate(\"YYYY-mm-dd\", info.publishTime) : \"\"}\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ul className=\"album-nav\">\r\n          <li\r\n            onClick={() => itemClick(\"songs\")}\r\n            className={current === \"songs\" ? \"sele\" : \"\"}\r\n          >\r\n            歌曲列表\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"comments\")}\r\n            className={current === \"comments\" ? \"sele\" : \"\"}\r\n          >\r\n            评论\r\n          </li>\r\n          <li\r\n            onClick={() => itemClick(\"albumInfo\")}\r\n            className={current === \"albumInfo\" ? \"sele\" : \"\"}\r\n          >\r\n            专辑详情\r\n          </li>\r\n        </ul>\r\n        {current === \"songs\" && <AlbumSongs songs={songs} loading={loading} />}\r\n        {current === \"comments\" && (\r\n          <Comments type=\"album\" id={match.params.id} />\r\n        )}\r\n        {current === \"albumInfo\" && (\r\n          <div className=\"album-info\">\r\n            <div className=\"title\">专辑介绍</div>\r\n            {info ? parseDescription(info.description) : \"\"}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {\r\n    setPlayDetailMap(map: Map<string, PlayDetailItem>) {\r\n      dispatch(getSetPlayDetailMapAction(map));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(React.memo(Album));\r\n","import Mylove from \"./mylove\";\r\n\r\nexport default Mylove;\r\n\r\nexport * from \"./mylove\";\r\n","import React, { useEffect, useState } from \"react\";\r\nimport SongSheet from \"../../common/PlaylistInfo/components/songsheet\";\r\nimport * as types from \"./type\";\r\nimport axios from \"../../network\";\r\nimport { match } from \"react-router-dom\";\r\n\r\n// const uid = \"1425924625\";\r\n// const imgUrl =\r\n//   \"https://p4.music.126.net/ydi3P1xDFrrzbXrPZIwmBA==/109951164806102901.jpg?param=200y200\";\r\n// const userName = \"HolypureV\";\r\n\r\nconst Mylove: React.FC<types.MyloveProps> = (props) => {\r\n  const { userName, avatarUrl } = props;\r\n  const _match = props.match as match<{ id: string }>;\r\n  const [trackIds, setTrackIds] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    function parse(data: any) {\r\n      const arr: string[] = [];\r\n      for (let i = 0; i < data.trackIds.length; i++) {\r\n        const item = data.trackIds[i];\r\n        arr.push(item.id);\r\n      }\r\n      return arr;\r\n    }\r\n\r\n    async function fetchData() {\r\n      const { data } = await axios.get(\r\n        \"/playlist/detail?id=\" + _match.params.id\r\n      );\r\n      !isUnmount && setTrackIds(parse(data.playlist));\r\n    }\r\n\r\n    if (_match.params.id) {\r\n      fetchData();\r\n    }\r\n\r\n    return () => {\r\n      isUnmount = true;\r\n    };\r\n  }, [_match.params.id]);\r\n\r\n  return (\r\n    <div className=\"mylove\">\r\n      <div>\r\n        <div className=\"mylove-top clearfix\">\r\n          <div className=\"profile\">\r\n            {avatarUrl && <img src={avatarUrl + \"?param=200y200\"} alt=\"\" />}\r\n          </div>\r\n          <div className=\"main\">\r\n            <div className=\"panel-1\">\r\n              <span className=\"tag\">歌单</span>\r\n              <span className=\"title\">我喜欢的音乐</span>\r\n            </div>\r\n            <div className=\"panel-2\">\r\n              <span className=\"prefix\">创作者名称: </span>\r\n              <span className=\"name\">{userName}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mylove-playlist\">\r\n          <SongSheet trackIds={trackIds} keywords=\"\" show={true} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default React.memo(Mylove);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"../../common/Header\";\r\nimport SignIn from \"../../common/SignIn\";\r\nimport { Layout, Menu, message } from \"antd\";\r\nimport { CustomerServiceOutlined, UnderlineOutlined } from \"@ant-design/icons\";\r\nimport SearchMusic from \"../SearchMusic\";\r\nimport Player from \"../../common/Player\";\r\nimport SongDetail from \"../../common/SongDetail\";\r\nimport MoreComments from \"../../common/comments/moreComments\";\r\nimport { connect } from \"react-redux\";\r\nimport { UnionStateTypes } from \"../../store\";\r\nimport PlayList from \"../PlayList\";\r\nimport SingerDetail from \"../SingerDetail\";\r\nimport MV from \"../MV\";\r\nimport SearchResult from \"../SearchResult\";\r\nimport Album from \"../Album\";\r\nimport { Route, Link, Switch, useHistory, Redirect } from \"react-router-dom\";\r\nimport { KeepAlive, createContext } from \"react-activation\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport Mylove from \"../Mylove\";\r\nimport axios from \"../../network\";\r\n\r\nexport interface HomeProps {\r\n  userState: boolean;\r\n  userId: string;\r\n  userName: string;\r\n  avatarUrl: string;\r\n}\r\n\r\nexport interface HistoryStackProps {\r\n  prev?: HistoryStackProps;\r\n  next?: HistoryStackProps;\r\n  name: string;\r\n}\r\n\r\nexport interface IMylove {\r\n  name: string;\r\n  id: string;\r\n}\r\n\r\nexport const SetHistoryStackContext = createContext<{\r\n  setHistoryStack: (\r\n    type: \"prev\" | \"next\" | \"push\" | \"remove\" | \"clear\",\r\n    name: string\r\n  ) => void;\r\n}>({\r\n  setHistoryStack: () => {}\r\n});\r\n\r\nconst Home: React.FC<HomeProps> = (props) => {\r\n  const { userId, userName, avatarUrl } = props;\r\n  const [current, setCurrent] = useState(\"recommend\");\r\n  const [historyStack, setHistoryStack] = useState<HistoryStackProps>({\r\n    name: \"recommend\"\r\n  });\r\n  const [myloves, setMyloves] = useState<IMylove[]>([]);\r\n  const history = useHistory();\r\n  const passedSetHistoryStack: {\r\n    setHistoryStack: (\r\n      type: \"prev\" | \"next\" | \"push\" | \"remove\" | \"clear\",\r\n      name: string\r\n    ) => void;\r\n  } = {\r\n    setHistoryStack(type, name) {\r\n      switch (type) {\r\n        case \"push\": {\r\n          const item: HistoryStackProps = {\r\n            name,\r\n            prev: historyStack\r\n          };\r\n          historyStack.next = item;\r\n          setHistoryStack(item);\r\n          break;\r\n        }\r\n        case \"next\": {\r\n          setHistoryStack(historyStack.next as HistoryStackProps);\r\n          break;\r\n        }\r\n        case \"prev\": {\r\n          setHistoryStack(historyStack.prev as HistoryStackProps);\r\n          break;\r\n        }\r\n        case \"remove\": {\r\n          if (name === \"prev\") {\r\n            if (historyStack.prev) {\r\n              historyStack.prev.next = undefined;\r\n              setHistoryStack(historyStack.prev as HistoryStackProps);\r\n            }\r\n          } else {\r\n            if (historyStack.next) {\r\n              historyStack.next.next = undefined;\r\n              setHistoryStack(historyStack.next as HistoryStackProps);\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case \"clear\": {\r\n          historyStack.prev = undefined;\r\n          historyStack.next = undefined;\r\n          historyStack.name = \"recommend\";\r\n          setHistoryStack(historyStack);\r\n          break;\r\n        }\r\n        default:\r\n          return;\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    function handleOffline() {\r\n      console.log(\"offline\");\r\n      message.error({\r\n        content: \"亲, 请连接网络 !!\",\r\n        duration: 0\r\n      });\r\n    }\r\n\r\n    function handleOnline() {\r\n      console.log(\"online\");\r\n      message.destroy();\r\n      message.success({\r\n        content: \"已连接到网络 !!\",\r\n        duration: 1\r\n      });\r\n    }\r\n    window.addEventListener(\"offline\", handleOffline);\r\n    window.addEventListener(\"online\", handleOnline);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function fetchData() {\r\n      axios.get(\"/user/playlist?uid=\" + userId).then(({ data }) => {\r\n        const arr: IMylove[] = [];\r\n        const playlists = data.playlist as any[];\r\n        for (let i = 0; i < playlists.length; i++) {\r\n          const item = playlists[i];\r\n          arr.push({\r\n            name: item.name,\r\n            id: item.id\r\n          });\r\n        }\r\n        setMyloves(arr);\r\n      });\r\n    }\r\n\r\n    if (userId) fetchData();\r\n    else {\r\n      setMyloves([]);\r\n      setCurrent(\"recommend\");\r\n    }\r\n  }, [userId]);\r\n\r\n  function handleItemClick(e: any) {\r\n    const key = e.key as string;\r\n    const keyarr = key.split(\" \");\r\n    if (keyarr.length === 2) {\r\n      history.push(`/${keyarr[0]}/${keyarr[1]}`);\r\n      passedSetHistoryStack.setHistoryStack(\"push\", keyarr[0]);\r\n      setCurrent(key);\r\n      return;\r\n    }\r\n    history.push(`/${key === \"recommend\" ? \"\" : key}`);\r\n    passedSetHistoryStack.setHistoryStack(\"push\", key);\r\n    setCurrent(key);\r\n  }\r\n\r\n  function returnMyLoves() {\r\n    return myloves.map((love) => {\r\n      return (\r\n        <Menu.Item\r\n          title={love.name}\r\n          icon={<UnderlineOutlined />}\r\n          key={\"mylove \" + love.id}\r\n        >\r\n          {love.name}\r\n        </Menu.Item>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n        <Header historyStack={historyStack} />\r\n      </SetHistoryStackContext.Provider>\r\n      <SignIn />\r\n      <Layout style={{ overflow: \"hidden\" }}>\r\n        <Layout.Sider className=\"home-sider\">\r\n          <Menu selectedKeys={[current]} onClick={handleItemClick}>\r\n            <Menu.ItemGroup title=\"推荐\">\r\n              <Menu.Item\r\n                title=\"发现音乐\"\r\n                icon={<CustomerServiceOutlined />}\r\n                key=\"recommend\"\r\n              >\r\n                <Link to=\"/\">发现音乐</Link>\r\n              </Menu.Item>\r\n            </Menu.ItemGroup>\r\n            <Menu.ItemGroup title=\"我的音乐(需登录)\">\r\n              {returnMyLoves()}\r\n            </Menu.ItemGroup>\r\n          </Menu>\r\n          <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n            <SongDetail />\r\n          </SetHistoryStackContext.Provider>\r\n        </Layout.Sider>\r\n        <Layout.Content className=\"home-content\">\r\n          <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n            <Switch>\r\n              <Route path=\"/mylove/:id\">\r\n                {(render) =>\r\n                  userId ? (\r\n                    <KeepAlive name=\"mylove\">\r\n                      <Mylove\r\n                        match={render.match!}\r\n                        avatarUrl={avatarUrl}\r\n                        userName={userName}\r\n                      />\r\n                    </KeepAlive>\r\n                  ) : (\r\n                    <Redirect to=\"/\" />\r\n                  )\r\n                }\r\n              </Route>\r\n              <Route path=\"/moreComments/:type/:id\">\r\n                {(render) => <MoreComments match={render.match!} />}\r\n              </Route>\r\n              <Route path=\"/singerDetail/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"album\">\r\n                    <SingerDetail match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/mv/:id\">\r\n                {(render) => (\r\n                  <CSSTransition\r\n                    in={render.location.pathname.includes(\"mv\")}\r\n                    timeout={200}\r\n                    mountOnEnter\r\n                    classNames={{\r\n                      enter: \"animate__animated\",\r\n                      enterActive: \"animate__fadeIn\"\r\n                    }}\r\n                    unmountOnExit\r\n                  >\r\n                    <MV match={render.match!} />\r\n                  </CSSTransition>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/album/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"album\">\r\n                    <Album match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/playlist/:id\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"playlist\">\r\n                    <PlayList match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/searchResult/:keywords\">\r\n                {(render) => (\r\n                  <KeepAlive name=\"searchResult\">\r\n                    <SearchResult match={render.match!} />\r\n                  </KeepAlive>\r\n                )}\r\n              </Route>\r\n              <Route path=\"/\">\r\n                <SearchMusic />\r\n              </Route>\r\n            </Switch>\r\n          </SetHistoryStackContext.Provider>\r\n        </Layout.Content>\r\n      </Layout>\r\n      <Layout.Footer className=\"home-footer\">\r\n        <SetHistoryStackContext.Provider value={passedSetHistoryStack}>\r\n          <Player />\r\n        </SetHistoryStackContext.Provider>\r\n      </Layout.Footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: UnionStateTypes) => {\r\n  const header = state.header;\r\n\r\n  return {\r\n    userState: header.userState,\r\n    userId: header.user.userId,\r\n    userName: header.user.nickname,\r\n    avatarUrl: header.user.avatarUrl\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(React.memo(Home));\r\n","import Home from \"./home\";\r\n\r\nexport default Home;\r\n\r\nexport * from \"./home\";\r\n","import React from \"react\";\nimport Home from \"./pages/Home\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { HeaderActionType } from \"./actionType\";\r\nimport { SET_USER_INFO, UPDATE_USER_STATE, USER_LOG_OUT } from \"./actionType\";\r\n\r\nconst defaultState: HeaderStoreStateProps = {\r\n  userState: false,\r\n  user: {\r\n    avatarUrl: \"\",\r\n    nickname: \"\",\r\n    userId: \"\"\r\n  }\r\n};\r\n\r\nfunction reset(state: HeaderStoreStateProps) {\r\n  state.userState = false;\r\n  state.user.avatarUrl = \"\";\r\n  state.user.nickname = \"\";\r\n  state.user.userId = \"\";\r\n  return state;\r\n}\r\n\r\nconst HeaderReducer = (state = defaultState, action: HeaderActionType) => {\r\n  switch (action.type) {\r\n    case SET_USER_INFO: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.user = action.user;\r\n      return newState;\r\n    }\r\n    case UPDATE_USER_STATE: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      newState.userState = action.state;\r\n      return newState;\r\n    }\r\n    case USER_LOG_OUT: {\r\n      const newState: HeaderStoreStateProps = JSON.parse(JSON.stringify(state));\r\n      return reset(newState);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default HeaderReducer;\r\n","import Reducer from \"./reducer\";\r\n\r\nexport default Reducer;\r\n","import SignInReducer from \"./reducer\";\r\n\r\nexport default SignInReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport HeadeReducer from \"../common/Header/store\";\r\nimport SignInReducer from \"../common/SignIn/store\";\r\nimport PlayerReducer from \"../common/Player/store\";\r\n\r\nexport default combineReducers({\r\n  header: HeadeReducer,\r\n  signIn: SignInReducer,\r\n  player: PlayerReducer\r\n});\r\n","//@ts-nocheck\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducer\";\r\nimport UnionStateTypes from \"./stateType\";\r\n\r\nconst composeEnhancers =\r\n  typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\n\r\nconst store = createStore(reducer, enhancer);\r\n\r\nexport { UnionStateTypes };\r\n\r\nexport default store;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"antd/dist/antd.min.css\";\nimport \"./styles/index.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"animate.css\";\nimport { AliveScope } from \"react-activation\";\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <HashRouter>\n      <AliveScope>\n        <App />\n      </AliveScope>\n    </HashRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}